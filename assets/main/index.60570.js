window.__require=function e(t,o,a){function n(c,r){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return n(t[c][1][e]||e)},u,u.exports,e,t,o,a)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<a.length;c++)n(a[c]);return n}({Analysis:[function(e,t){"use strict";cc._RF.push(t,"efdfcLtZc9JKan7/8MpBMjZ","Analysis"),t.exports={umKey:"65825555a7208a5af18ab116",wxgamecid:"",init:function(){if(CC_WECHATGAME){wx.uma.init({appKey:this.umKey,useOpenid:!1,autoGetOpenid:!1,debug:!0});var e=wx.getLaunchOptionsSync().query.wxgamecid;this.wxgamecid=e||"self",console.log("-------------wx.uma.init------------")}},reportAnalytics:function(e,t){CC_WECHATGAME&&wx.uma.trackEvent(e,t)},channelReportAnalytics:function(e,t,o){CC_WECHATGAME&&wx.uma.trackEvent(e,{wxgamecid:this.wxgamecid,state:t,jump:o})}},cc._RF.pop()},{}],AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"79a22TQCuBD3b8ahoygIeWQ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,c=e("commonData"),r=function(e){function t(){var t=e.call(this)||this;return t.groundMusic=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.playGroundMusice=function(){c.default.musicOn&&this.groundMusic.play()},t.prototype.stopGroundMusice=function(){this.groundMusic.stop()},t.instance=null,__decorate([i({type:cc.AudioSource,tooltip:"\u80cc\u666f\u97f3\u4e50"})],t.prototype,"groundMusic",void 0),o=__decorate([n],t)}(cc.Component);o.default=r,cc._RF.pop()},{commonData:"commonData"}],BattleManager:[function(e,t,o){"use strict";cc._RF.push(t,"13aeaf8gU1AXIuOvWuNgVuw","BattleManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.isLiveMode=o.isTestMode=void 0;var a=e("Game"),n=e("commonData"),i=e("platform"),c=e("config"),r=cc._decorator,s=r.ccclass,l=r.property;o.isTestMode=!0,o.isLiveMode=!1;var u=function(e){function t(){var t=e.call(this)||this;return t.layerStart=null,t.achieveMentPopup=null,t.setMusic=null,t.digMusic=null,t.fallMusic=null,t.winMusic=null,t.failMusic=null,t.boxOpenMusic=null,t.testNode=[],t.gameNode=null,t.ttNode=[],t.wxNode=[],t.wxGZHNode=null,t.gameBundle=null,t.stageBundle=null,r.instance=t,t}var r;return __extends(t,e),r=t,t.prototype.start=function(){var e=cc.find("Canvas").getComponent(cc.Canvas);cc.view.getVisibleSize().height/cc.view.getVisibleSize().width<1.8?(e.fitHeight=!0,e.fitWidth=!1,console.log("ipad")):(e.fitHeight=!1,e.fitWidth=!0),this.changetestNode(),this.changePlatformNode(),1==n.default.screwSkinData.skinData[7]&&(console.log("=========test wx gzh node======1"),null!=this.wxGZHNode&&(console.log("=========test wx gzh node======2"),this.wxGZHNode.active=!1))},t.prototype.changetestNode=function(){if(o.isTestMode)for(var e=0;e<this.testNode.length;e++)this.testNode[e].active=!0},t.prototype.changePlatformNode=function(){c.currentPlatform==c.platformEnum.wechat?(this.showWXBtn(!0),this.showTTBtn(!1)):c.currentPlatform==c.platformEnum.toutiao&&(this.showWXBtn(!1),this.showTTBtn(!0))},t.prototype.showWXBtn=function(e){for(var t=0;t<this.wxNode.length;t++)this.wxNode[t].active=e},t.prototype.showTTBtn=function(e){for(var t=0;t<this.ttNode.length;t++)this.ttNode[t].active=e},t.prototype.onLoad=function(){null!=this.layerStart&&(this.layerStart.active=!0),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-980)},t.prototype.playBGM=function(){a.default.resManager.loadBundleRes("audio","BG",cc.AudioClip).catch(function(){console.error("\u52a0\u8f7dBGM\u5931\u8d25")}).then(function(e){cc.audioEngine.playMusic(e,!0),console.log("\u64ad\u653e\u80cc\u666f\u97f3\u4e50")}),this.playGroundMusic()},t.prototype.playGroundMusic=function(){n.default.musicOn?cc.audioEngine.setMusicVolume(1):cc.audioEngine.setMusicVolume(0)},t.prototype.stopGroundMusic=function(){cc.audioEngine.setMusicVolume(0),console.log("-----stop")},t.prototype.playWinSound=function(){n.default.soundOn&&this.winMusic.play()},t.prototype.stopWinSound=function(){this.winMusic.stop()},t.prototype.playFailSound=function(){n.default.soundOn&&this.failMusic.play()},t.prototype.stopFailSound=function(){this.failMusic.stop()},t.prototype.playSetSound=function(){n.default.soundOn&&this.setMusic.play()},t.prototype.playDigSound=function(){n.default.soundOn&&this.digMusic.play()},t.prototype.playFallSound=function(){n.default.soundOn&&this.fallMusic.play()},t.prototype.playBoxOpenSound=function(){n.default.soundOn&&this.boxOpenMusic.play()},t.prototype.showAchievementPopup=function(){n.default.GameMode!=n.GAME_MODE_ENUM.NORMAL&&n.default.GameMode!=n.GAME_MODE_ENUM.CHALLENGE||(this.achieveMentPopup.active=!0)},t.prototype.setArrData=function(e){var t;switch(e){case"skinData":t=n.default.boardSkinData.skinData;break;case"piece":t=n.default.boardSkinData.piece;break;case"screwSkinData":t=n.default.screwSkinData.skinData;break;case"claimAchievementRewards":t=n.default.AchievementData.claimAchievementRewards;break;case"provincePoint":t=n.default.provincePoint;break;case"recentRecord":t=n.default.recentGameRecord.recentRecord;var o=JSON.stringify(t);return void cc.sys.localStorage.setItem("recentRecord",o)}for(var a="",i=0;i<t.length;i++)a+=t[i],i!=t.length-1&&(a+=",");cc.sys.localStorage.setItem(e,a)},t.prototype.playVibe=function(){n.default.vibrateOn&&(i.vibrateShort(),this.scheduleOnce(function(){i.vibrateShort()},.1))},t.prototype.loadGameBundle=function(e){var t=this;return new Promise(function(o,a){t.gameBundle&&t.gameBundle.name==e?o(1):cc.assetManager.loadBundle(e,function(e,n){e?a():(t.gameBundle&&t.gameBundle.releaseAll(),t.gameBundle=n,o(1))})})},t.prototype.loadGameScene=function(e){var t=this;return new Promise(function(o){t.gameBundle.loadScene(e,function(e,t){e||o(t)})})},t.prototype.getIsTestMode=function(){return o.isTestMode},t.instance=null,__decorate([l(cc.Node)],t.prototype,"layerStart",void 0),__decorate([l(cc.Node)],t.prototype,"achieveMentPopup",void 0),__decorate([l({type:cc.AudioSource,tooltip:"\u8bbe\u7f6e\u97f3\u6548"})],t.prototype,"setMusic",void 0),__decorate([l({type:cc.AudioSource,tooltip:"\u6253\u5b54\u97f3\u6548"})],t.prototype,"digMusic",void 0),__decorate([l({type:cc.AudioSource,tooltip:"\u6d88\u9664\u97f3\u6548"})],t.prototype,"fallMusic",void 0),__decorate([l({type:cc.AudioSource,tooltip:"\u80dc\u5229\u97f3\u6548"})],t.prototype,"winMusic",void 0),__decorate([l({type:cc.AudioSource,tooltip:"\u5931\u8d25\u97f3\u6548"})],t.prototype,"failMusic",void 0),__decorate([l({type:cc.AudioSource,tooltip:"\u5f00\u7bb1\u97f3\u6548"})],t.prototype,"boxOpenMusic",void 0),__decorate([l(cc.Node)],t.prototype,"testNode",void 0),__decorate([l(cc.Node)],t.prototype,"gameNode",void 0),__decorate([l(cc.Node)],t.prototype,"ttNode",void 0),__decorate([l(cc.Node)],t.prototype,"wxNode",void 0),__decorate([l(cc.Node)],t.prototype,"wxGZHNode",void 0),r=__decorate([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{Game:"Game",commonData:"commonData",config:"config",platform:"platform"}],CompGameLevel:[function(e,t,o){"use strict";var a;cc._RF.push(t,"186e02ycKpPvpqTjHjWEeUW","CompGameLevel"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_SCREW_STATUS=void 0;var n,i=e("commonData"),c=e("itemView"),r=e("CompGameManager"),s=e("noviceView"),l=cc._decorator,u=l.ccclass,d=l.property,h=80;(n=a=o.ENUM_SCREW_STATUS||(o.ENUM_SCREW_STATUS={})).IDLE="idle",n.ACTIVE="active",n.MOVING="moving",n.Ani="ani";var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.screwPre=null,t.screwOutPre=null,t.holePre=null,t.steelPre=null,t.steel_holePre=null,t.steel_hole2Pre=null,t.lockPre=null,t.spSteelPre=[],t.spSteelPre2=[],t.holeMaskPre=null,t.skinNodePre=null,t.bg=null,t.Holes=null,t.Steels=null,t.Screws=null,t.currentScrew=null,t.screwOut=null,t.screwTop=null,t.screwStatus=a.IDLE,t.currentLevelconfig=null,t.cloneNode=null,t.cloneNode1=null,t.cloneNode2=null,t.collisionPos=[],t.steelx=[],t.steely=[],t.desScrew=null,t}return __extends(t,e),t.prototype.init=function(){i.default.windowHeight/i.default.windowWidth<1.8&&(h=70),this.screwStatus=a.IDLE,console.log("factor",h),i.default.isgameing=!0,i.default.useItemNum=[0,0,0,0],i.default.isAddTime=!1,i.default.screwNum=0,i.default.isUnLock=!0,i.default.isGetAnswer=!1,this.cloneNode=null,this.cloneNode1=null,this.cloneNode2=null,this.screwOut=null,this.currentScrew=null,this.screwTop=null,this.desScrew=null,console.log("=========init"),this.bg=this.node.getChildByName("bg"),this.Holes=this.bg.getChildByName("holenode"),this.Steels=this.bg.getChildByName("steelnode"),this.Screws=this.bg.getChildByName("screwnode"),r.default.instance.changeWithDrew(),r.default.instance.changeDigBtn(),r.default.instance.changeReset(),this.createLevelAni(),this.bg.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.reload=function(){var e=this;i.default.useItemNum[0]=0,i.default.useItemNum[1]=0,i.default.useItemNum[3]=0,i.default.isAddTime=!1,i.default.screwNum=0,i.default.isgameing=!0,this.screwStatus=a.IDLE,this.Holes.removeAllChildren(),this.Steels.removeAllChildren(),this.Screws.removeAllChildren(),this.cloneNode=null,this.cloneNode1=null,this.cloneNode2=null,this.screwOut=null,this.currentScrew=null,this.screwTop=null,this.desScrew=null,i.default.isUnLock=!0,i.default.isDig=!1,r.default.instance.changeWithDrew(),r.default.instance.changeDigBtn(),r.default.instance.changeReset(),this.scheduleOnce(function(){e.createLevelAni()})},t.prototype.unLock=function(){if(!i.default.isUnLock)for(var e=function(e){var o=t.Holes.children[e];if(o.children.length>0){var a=cc.moveBy(.8,cc.v2(0,10));return cc.tween(o.children[0].children[0]).then(a).call(function(){r.default.instance.playUnlockAni(),o.children[0].destroy(),r.default.instance.playVibe(),r.default.instance.changeDigBtn()}).start(),i.default.isUnLock=!0,i.default.useItemNum[0]++,"break"}},t=this,o=0;o<this.Holes.children.length&&"break"!==e(o);o++);},t.prototype.onDestroy=function(){console.log("--------destory"),this.bg.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onTouchStart=function(e){var t=this;if(this.screwStatus!=a.MOVING&&this.screwStatus!=a.Ani){var o=e.getLocation(),n=this.findHole(o);if(n&&n.children.length>0)c.default.instance.clickDigHole_video();else{if(i.default.isPullOut){if(s=this.findScrew(o))console.log("\u627e\u5230\u87ba\u4e1d",s.name),r.default.instance.setAniNodePosition(s.position,1),this.currentScrew!=s&&(this.setScrewActive(this.currentScrew,!1),this.setScrewActive(s,!0));else{if(null==this.screwOut)return;if(r.default.instance.setAniNodePosition(cc.v2(this.currentScrew.position),1),null==this.findScrew2(o))return}return this.desScrew=o,this.currentScrew.destroy(),i.default.isPullOut=!1,this.screwStatus=a.Ani,i.default.screwNum--,this.scheduleOnce(function(){cc.tween(t.screwOut).to(.2,{scaleX:1.4,scaleY:1.4}).call(function(){r.default.instance.playPullOutAni()}).to(.2,{scaleX:1.5,scaleY:1.5,opacity:0}).call(function(){t.screwOut.destroy(),t.screwOut=null,t.currentScrew=null,t.screwStatus=a.IDLE,t.setSpeed()}).start()},.25),void r.default.instance.changePullOutBtn()}var s;if(this.currentScrew)if(s=this.findScrew(o))s==this.currentScrew?this.setScrewActive(this.currentScrew,!1):(this.setScrewActive(this.currentScrew,!1),this.setScrewActive(s,!0));else{var l=this.findHole(o);if(l){for(var u=l.convertToWorldSpaceAR(cc.v2(0,0)),d=l.getComponent(cc.CircleCollider).radius,p=(l.getBoundingBox(),!1),f=!1,m=!1,g=[],v=0;v<this.Steels.children.length;v++){var w=this.Steels.children[v];w.getComponent(cc.RigidBody).syncPosition(!0);var y=w.convertToNodeSpaceAR(u),S=(cc.v2(w.x,w.y),w.convertToWorldSpaceAR(cc.v2(0,0))),P=!1;if("steel"==w.name||"spSteel_square"==w.name){var _=w.getComponent(cc.PhysicsPolygonCollider).points;P=cc.Intersection.polygonCircle(_,{position:y,radius:d})}else if("spSteel_circle"==w.name){var A=w.getComponent(cc.PhysicsCircleCollider).radius;P=cc.Intersection.circleCircle({position:S,radius:A},{position:u,radius:d})}if(P){p=!0,console.log("=====\u6d1e\u548c\u94a2\u6761\u76f8\u4ea4");for(var b=0;b<w.children.length;b++){var k,N,C=w.children[b],M=C.convertToWorldSpaceAR(cc.v2(0,0)),I=(this.Holes.convertToNodeSpaceAR(M),C.getBoundingBox());if("steel"==w.name){if(N=this.getRectPos(cc.v2(C.x,C.y),C.parent.angle,I.width,I.height),k=this.getRectPos(cc.v2(C.x,C.y),C.parent.angle,I.width-h,I.height),cc.Intersection.polygonCircle(N,{position:y,radius:d})&&"steel_hole"==C.name){console.log("=====\u6d1e\u548c\u5e26\u5b54\u7684\u94a2\u6761\u76f8\u4ea4");var L=this.getDistance(u,M),B=85;if(70==h&&(B=65),console.log("\u4e24\u70b9\u95f4\u7684\u8ddd\u79bb",L,B),L>B)continue;if(!(L<=8)){m=!0;break}g.push(C)}if(cc.Intersection.polygonCircle(k,{position:y,radius:d})){if(I.width<h)continue;"steel_hole"!=C.name&&(console.log("=====\u6d1e\u548c\u4e0d\u5e26\u5b54\u7684\u94a2\u6761\u76f8\u4ea4"),m=!0)}}else if("spSteel_circle"==w.name){if(console.log("==\u5706\u6761\u5b54\u6d1e\u548c\u6d1e\u76f8\u4ea4"),cc.Intersection.circleCircle({position:y,radius:d},{position:cc.v2(C.position),radius:d})){if(L=this.getDistance(u,M),console.log("===\u5706\u6761\u5b54\u6d1e\u548c\u6d1e\u7684\u8ddd\u79bb",L),B=85,70==h&&(B=65),L>B)continue;if(!(L<=8)){m=!0;break}g.push(C),f=!1}}else if("spSteel_square"==w.name){if(L=this.getDistance(u,M),console.log("===\u65b9\u5757\u5b54\u6d1e\u548c\u6d1e\u7684\u8ddd\u79bb",L),L>113)continue;if(!(L<=8)){m=!0;break}g.push(C)}}}}if((m||f)&&(g=[]),0!=l.children.length&&(p=!0,g=[],console.log("\u8fd9\u4e2a\u6d1e\u88ab\u9501\u4f4f\u4e86")),p&&g.length<=0)return console.log("\u5b54\u88ab\u906e\u6321\u4e86"),this.screwStatus=a.Ani,void this.playAni();this.screwStatus=a.MOVING,this.saveLevelData();var D=cc.moveTo(.5,cc.v2(l.x,l.y+40));cc.tween(this.screwOut).then(D).call(function(){g.length?t.setScrew(l,g):t.setScrew(l)}).start()}else this.setScrewActive(this.currentScrew,!1)}else(s=this.findScrew(o))&&this.setScrewActive(s,!0)}}else console.log("--------------return--------------",this.screwStatus)},t.prototype.findScrew=function(e){for(var t=null,o=0;o<this.Screws.children.length;o++){var a=this.Screws.children[o],n=a.getBoundingBox(),i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){if("screwOut"!=(t=a).name)break;t=null}}return t},t.prototype.findScrew2=function(e){for(var t=null,o=0;o<this.Screws.children.length;o++){var a=this.Screws.children[o],n=a.getBoundingBox(),i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){if("screwOut"==(t=a).name)break;t=null;break}}return t},t.prototype.playAni=function(){var e=this,t=this.screwOut.getPosition();cc.tween(this.screwOut).to(.1,{position:new cc.Vec3(t.x+5,t.y,0)},{easing:"quadInOut"}).to(.1,{position:new cc.Vec3(t.x-5,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x+8,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x-8,t.y,0)},{easing:"quadInOut"}).to(.02,{position:new cc.Vec3(t.x,t.y,0)},{easing:"quadInOut"}).call(function(){e.screwStatus=a.IDLE}).start()},t.prototype.findHole=function(e){for(var t=null,o=0;o<this.Holes.children.length;o++){var a=this.Holes.children[o],n=a.getBoundingBox();n.width+=30,n.height+=30;var i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){t=a;break}}if(t){var c=t.getBoundingBox();for(o=0;o<this.Screws.children.length;o++){var r=this.Screws.children[o];if("screw"==r.name){var s=r.getBoundingBox();if(cc.Intersection.rectRect(c,s)){t=null;break}}}}return t},t.prototype.setScrewActive=function(e,t){var o=this;if(void 0===t&&(t=!0),e&&"screwOut"!=e.name)if(1==i.default.currLevel&&0==i.default.passedNovice&&s.default.instance.nextStep(),t){this.screwStatus=a.ACTIVE;var n=cc.v2(e.x,e.y);e.opacity=0,this.currentScrew=e,this.screwOut=cc.instantiate(this.screwOutPre),70==h&&(this.screwOut.getChildByName("top").width=60,this.screwOut.getChildByName("top").height=60,this.screwOut.width=60,this.screwOut.height=60),this.screwOut.parent=e.parent,this.screwOut.name="screwOut",this.screwOut.setPosition(n),this.screwOut.opacity=255,this.screwTop=this.screwOut.getChildByName("top");var c=20;70==h&&(c=10);var r=cc.moveBy(.2,0,40),l=cc.moveBy(.2,0,c);cc.tween(this.screwOut).then(r).start(),cc.tween(this.screwTop).then(l).start()}else{c=20,70==h&&(c=10),r=cc.moveBy(.2,0,-40),l=cc.moveBy(.2,0,-c);var u=this.screwOut,d=this.screwTop,p=e;this.currentScrew=null,this.screwOut=null,this.screwTop=null,cc.tween(u).then(r).start(),cc.tween(d).then(l).call(function(){u.destroy(),p==o.currentScrew&&null!=o.screwOut||(e.opacity=255),o.screwStatus=a.IDLE}).start()}},t.prototype.setScrew=function(e,t){var o=this;1==i.default.currLevel&&0==i.default.passedNovice&&2==s.default.instance.progress&&s.default.instance.nextStep();var n=20;70==h&&(n=10);var c=cc.moveBy(.2,0,-40),r=cc.moveBy(.2,0,-n);cc.tween(this.screwOut).then(c).start(),cc.tween(this.screwTop).then(r).call(function(){o.currentScrew&&o.currentScrew.destroy(),o.currentScrew=null,o.screwOut.destroy(),o.screwOut=null,o.screwTop=null;var n=cc.instantiate(o.screwPre);if(70==h&&(n.width=60,n.height=60,n.getComponent(cc.PhysicsCircleCollider).radius=18),n.setPosition(e.position),n.setParent(o.Screws),o.screwStatus=a.IDLE,t){n.group="default",n.getComponent(cc.PhysicsCircleCollider).apply();for(var i=function(e){for(var a=t[e],i=a.convertToWorldSpaceAR(cc.v2(0,0)),c=a.parent,r=c.convertToNodeSpaceAR(i),s=c.getComponents(cc.RevoluteJoint),l=null,u=null,d=0;d<s.length;d++){var h=s[d];if(o.getDistance(h.anchor,r)<=20){l=h,u=h.anchor,console.log("\u627e\u5230\u5173\u8282",e,d);break}}l&&(l.destroy(),o.scheduleOnce(function(){n.group="screw",n.getComponent(cc.PhysicsCircleCollider).apply();var e=c.addComponent(cc.RevoluteJoint);e.anchor.x=u.x,e.anchor.y=u.y,e.connectedBody=n.getComponent(cc.RigidBody)}))},c=0;c<t.length;c++)i(c)}o.setSpeed(),o.screwStatus=a.IDLE}).start()},t.prototype.saveLevelData=function(){console.log("\u8bb0\u5f55\u5173\u5361\u914d\u7f6e"),this.cloneNode2=this.cloneNode1,this.cloneNode1=this.cloneNode,this.cloneNode=cc.instantiate(this.bg),r.default.instance.changeWithDrew()},t.prototype.withDrew=function(){if(null!=this.cloneNode){this.bg.removeFromParent(),this.bg.destroy(),this.cloneNode.setParent(this.node),this.cloneNode.setPosition(0,0),this.bg=this.cloneNode,this.cloneNode=this.cloneNode1,this.cloneNode1=this.cloneNode2,this.cloneNode2=null,this.Holes=this.bg.getChildByName("holenode"),this.Steels=this.bg.getChildByName("steelnode"),this.Screws=this.bg.getChildByName("screwnode"),this.screwOut=this.Screws.getChildByName("screwOut"),this.screwOut&&this.screwOut.destroy();for(var e=0;e<this.Screws.children.length;e++)0==this.Screws.children[e].opacity&&(this.Screws.children[e].opacity=255);if(i.default.isUnLock)for(e=0;e<this.Holes.children.length;e++)this.Holes.children[e].children.length>0&&this.Holes.children[e].children[0].destroy();if(null!=this.desScrew){var t=this.findScrew(this.desScrew);null==t||t.destroy()}this.screwOut=null,this.screwTop=null,this.currentScrew=null,this.bg.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),i.default.clearSteelNum-=this.Steels.children.length-i.default.TotalSteel,i.default.TotalSteel=this.Steels.children.length,r.default.instance.UserNode.children[0].children[1].getComponent(cc.Label).string=String(i.default.wholeSteelNum-i.default.clearSteelNum),console.log("\u64a4\u56de",i.default.useItemNum[1]),this.screwStatus=a.IDLE,r.default.instance.changeWithDrew()}else console.log("\u65e0\u6cd5\u64a4\u56de")},t.prototype.setSpriteType=function(e){for(;null==e.getChildByName("skinNode");)e=e.getChildByName("holemask");e.getChildByName("skinNode").getComponent(cc.Sprite).type=cc.Sprite.Type.TILED},t.prototype.createLevelAni=function(){var e=this;this.currentLevelconfig=i.default.CompTypeLevelConfig[i.default.currLevel],this.bg.width=this.currentLevelconfig.bg.x*h,this.bg.height=this.currentLevelconfig.bg.y*h;for(var t=this.currentLevelconfig.hole.num,o=0;o<t;o++)if(1==this.currentLevelconfig.hole[o].screw){var a=cc.instantiate(this.screwPre),n=cc.instantiate(this.holePre),c=cc.instantiate(this.screwOutPre);i.default.screwNum++,70==h&&(a.width=60,a.height=60,n.width=50,n.height=50,n.getComponent(cc.CircleCollider).radius=18,a.getComponent(cc.PhysicsCircleCollider).radius=18,c.getChildByName("top").width=60,c.getChildByName("top").height=60,c.width=60,c.height=60),a.x=h*this.currentLevelconfig.hole[o].x,a.y=h*this.currentLevelconfig.hole[o].y,a.setParent(this.Screws),a.name="screw",a.group="screw",a.opacity=0,n.x=h*this.currentLevelconfig.hole[o].x,n.y=h*this.currentLevelconfig.hole[o].y,n.setParent(this.Holes),c.setParent(this.Screws),c.x=h*this.currentLevelconfig.hole[o].x,c.y=h*this.currentLevelconfig.hole[o].y+40,c.getChildByName("top").y=40,c.name="screwOut"}else if(n=cc.instantiate(this.holePre),70==h&&(n.getComponent(cc.CircleCollider).radius=18,n.width=50,n.height=50),n.x=h*this.currentLevelconfig.hole[o].x,n.y=h*this.currentLevelconfig.hole[o].y,n.setParent(this.Holes),1==this.currentLevelconfig.hole[o].lock){var s=cc.instantiate(this.lockPre);s.setParent(n),s.setPosition(0,0),r.default.instance.setAniNodePosition(cc.v2(n.position),0),i.default.isUnLock=!1,r.default.instance.changeDigBtn()}if(r.default.instance.changePullOutBtn(),this.currentLevelconfig.spSteel){console.log("\u6709\u7279\u6b8a\u94a2\u676111");var l=this.currentLevelconfig.spSteel.num;for(o=0;o<l;o++){var u=this.currentLevelconfig.spSteel[o].index,d=cc.v2(this.currentLevelconfig.spSteel[o].x*h,this.currentLevelconfig.spSteel[o].y*h),p=void 0;p=70==h?cc.instantiate(this.spSteelPre2[u]):cc.instantiate(this.spSteelPre[u]),0==u?p.getComponent(cc.PhysicsPolygonCollider).enabled=!1:1==u&&(p.getComponent(cc.PhysicsCircleCollider).enabled=!1),p.setPosition(d),p.setParent(this.Steels),p.getComponent(cc.RigidBody).gravityScale=0}}var f,m,g,v=this.currentLevelconfig.steel.num;i.default.TotalSteel=v,i.default.LevelSteel=v;var w=function(t){var o=new cc.Node;o.setParent(y.Steels),o.name="steel",y.steelx=[],y.steely=[];for(var a=Object.keys(y.currentLevelconfig.steel[t]).length-1,n=0;n<a;n++)y.steelx.push(y.currentLevelconfig.steel[t][n].x),y.steely.push(y.currentLevelconfig.steel[t][n].y);var i,c=y.currentLevelconfig.steel[t].color;y.sortPos(),i=Math.atan2(y.steely[0]-y.steely[1],y.steelx[0]-y.steelx[1])*(180/Math.PI);var s=(y.steelx[0]+y.steelx[a-1])/2*h,l=(y.steely[a-1]+y.steely[0])/2*h,u=y.getDistance(cc.v2(y.steelx[0],y.steely[0]),cc.v2(y.steelx[a-1],y.steely[a-1]))*h+h+50;for(f=null,m=null,n=0;n<a;n++){var d=null;0==n||n==a-1?(d=cc.instantiate(y.steel_hole2Pre)).getComponent(cc.Sprite).spriteFrame=y.setColor(c,0):(d=cc.instantiate(y.steel_holePre)).getComponent(cc.Sprite).spriteFrame=y.setColor(c,1),70==h&&(d.scale=.7),d.setPosition(y.steelx[n]*h,y.steely[n]*h),d.setParent(o),0==n?d.angle=i-90:(d.angle=i+90,d.setScale(-.8,.8),70==h&&d.setScale(-.7,.7)),d.name="steel_hole";var p=d.convertToWorldSpaceAR(cc.v2(0,0)),w=cc.instantiate(y.holeMaskPre);if(null==m)m=w,g=o.convertToNodeSpaceAR(p),m.setParent(o),m.setPosition(g);else{var S=f.convertToNodeSpaceAR(p);w.setPosition(S),w.setParent(f)}f=w}for(n=0;n<a-1;n++){var P=Math.sqrt(Math.pow(y.steelx[n]-y.steelx[n+1],2)+Math.pow(y.steely[n]-y.steely[n+1],2))-1;if(!(P<=0)){var _=cc.instantiate(y.steelPre);70==h&&(_.width=70,_.height=70),_.setPosition((y.steelx[n]+y.steelx[n+1])*h/2,(y.steely[n]+y.steely[n+1])*h/2),_.setParent(o),_.scaleY=P,_.getComponent(cc.Sprite).spriteFrame=y.setColor(c,2),_.angle=i-90}}m.removeFromParent(),m.setParent(o),m.setPosition(g),y.setSkinNode(o,s,l,u,i,f,c);var A=cc.v2(o.position);t%2==1?o.setPosition(1e3,0):o.setPosition(-1e3,0);var b=cc.moveTo(.5,A);y.scheduleOnce(function(){cc.tween(o).then(b).call(function(){t==v-1&&e.scheduleOnce(function(){e.Steels.removeAllChildren(),r.default.instance.hideMask(),e.createLevel()})}).start()},.1*t)},y=this;for(o=0;o<v;o++)w(o)},t.prototype.createLevel=function(){var e=20;70==h&&(e=10);for(var t=cc.moveBy(.3,0,-40),o=cc.moveBy(.3,0,-e),a=function(e){var a=n.Screws.children[e];"screw"==a.name?n.scheduleOnce(function(){a.opacity=255},.3):"screwOut"==a.name&&(cc.tween(a).then(t).start(),cc.tween(a.getChildByName("top")).then(o).call(function(){a.destroy()}).start())},n=this,c=0;c<this.Screws.children.length;c++)a(c);var r=this.currentLevelconfig.steel.num;for(i.default.TotalSteel=r,i.default.LevelSteel=r,this.currentLevelconfig.spSteel&&this.createSpSteel(),console.log("------\u5173\u5361\u94a2\u6761\u6570\u91cf",i.default.TotalSteel),c=0;c<r;c++){var s=new cc.Node;s.setParent(this.Steels),s.group="default",s.name="steel",s.addComponent(cc.RigidBody).linearDamping=1;var l,u,d=s.addComponent(cc.PhysicsPolygonCollider);this.steelx=[],this.steely=[];for(var p=Object.keys(this.currentLevelconfig.steel[c]).length-1,f=0;f<p;f++)this.steelx.push(this.currentLevelconfig.steel[c][f].x),this.steely.push(this.currentLevelconfig.steel[c][f].y);var m=this.currentLevelconfig.steel[c].color;this.sortPos(),l=(u=Math.atan2(this.steely[0]-this.steely[1],this.steelx[0]-this.steelx[1]))*(180/Math.PI);var g,v=(this.steelx[0]+this.steelx[p-1])/2*h,w=(this.steely[p-1]+this.steely[0])/2*h,y=this.getDistance(cc.v2(this.steelx[0],this.steely[0]),cc.v2(this.steelx[p-1],this.steely[p-1]))*h+h+50,S=this.getRectPos(cc.v2(v,w),u,y,h);for(f=0;f<d.points.length;f++)null!=S[f]&&(d.points[f]=S[f]);s.getComponent(cc.PhysicsPolygonCollider).apply();var P=null,_=null;for(f=0;f<p;f++){var A=null;0==f||f==p-1?(A=cc.instantiate(this.steel_hole2Pre)).getComponent(cc.Sprite).spriteFrame=this.setColor(m,0):(A=cc.instantiate(this.steel_holePre)).getComponent(cc.Sprite).spriteFrame=this.setColor(m,1),A.setPosition(this.steelx[f]*h,this.steely[f]*h),A.setParent(s),70==h&&(A.scale=.7),0==f?A.angle=l-90:(A.angle=l+90,A.setScale(-.8,.8),70==h&&A.setScale(-.7,.7)),A.name="steel_hole";var b=A.convertToWorldSpaceAR(cc.v2(0,0)),k=(this.Steels.convertToNodeSpaceAR(b),this.findScrew(b));if("screwOut"==(null==k?void 0:k.name)&&(k=null),k){var N=s.addComponent(cc.RevoluteJoint);N.anchor.x=this.steelx[f]*h,N.anchor.y=this.steely[f]*h,N.connectedBody=k.getComponent(cc.RigidBody)}var C=cc.instantiate(this.holeMaskPre);if(null==_)_=C,g=s.convertToNodeSpaceAR(b),_.setParent(s),_.setPosition(g);else{var M=P.convertToNodeSpaceAR(b);C.setPosition(M),C.setParent(P)}P=C}for(f=0;f<p-1;f++){var I=Math.sqrt(Math.pow(this.steelx[f]-this.steelx[f+1],2)+Math.pow(this.steely[f]-this.steely[f+1],2))-1;if(!(I<=0)){var L=cc.instantiate(this.steelPre);70==h&&(L.width=70,L.height=70),L.setPosition((this.steelx[f]+this.steelx[f+1])*h/2,(this.steely[f]+this.steely[f+1])*h/2),L.setParent(s),L.scaleY=I,L.getComponent(cc.Sprite).spriteFrame=this.setColor(m,2),L.angle=l-90,L.name="steel"}}_.removeFromParent(),_.setParent(s),_.setPosition(g),this.setSkinNode(s,v,w,y,l,P,m)}},t.prototype.setSkinNode=function(e,t,o,a,n,c,r){var s=cc.instantiate(this.skinNodePre),l=s.getComponent(cc.Sprite);i.default.boardSkinData.currentSkin<=6?l.spriteFrame=i.default.skinImgArr[r]:l.spriteFrame=i.default.skinImgArr[0],s.setParent(e),s.setPosition(t,o);var u=s.convertToWorldSpaceAR(cc.v2(0,0)),d=c.convertToNodeSpaceAR(u);s.setParent(c),s.setPosition(d),l.type=cc.Sprite.Type.TILED,s.width=.9*h,s.height=a-10,s.angle=n+90,s.name="skinNode"},t.prototype.createSpSteel=function(){console.log("\u6709\u7279\u6b8a\u94a2\u676122");var e=this.currentLevelconfig.spSteel.num;i.default.TotalSteel+=e,i.default.LevelSteel+=e;for(var t=0;t<e;t++){var o=this.currentLevelconfig.spSteel[t].index,a=i.default.spSteelData[o].baseIndex,n=void 0;n=70==h?cc.instantiate(this.spSteelPre2[o]):cc.instantiate(this.spSteelPre[o]);var c=cc.v2(this.currentLevelconfig.spSteel[t].x*h,this.currentLevelconfig.spSteel[t].y*h);n.setPosition(c),n.setParent(this.Steels),0==a?(n.name="spSteel_square",n.getComponent(cc.PhysicsPolygonCollider).enabled=!0):1==a&&(n.name="spSteel_circle",n.getComponent(cc.PhysicsCircleCollider).enabled=!0);for(var r=0;r<n.children.length;r++){var s=n.children[r],l=s.convertToWorldSpaceAR(cc.v2(0,0)),u=(this.Steels.convertToNodeSpaceAR(l),this.findScrew(l));if("screwOut"==(null==u?void 0:u.name)&&(u=null),u){var d=n.addComponent(cc.RevoluteJoint);d.anchor.x=s.x,d.anchor.y=s.y,d.connectedBody=u.getComponent(cc.RigidBody)}}}},t.prototype.getDistance=function(e,t){var o=cc.v2(e.x-t.x,e.y-t.y);return Math.sqrt(o.x*o.x+o.y*o.y)},t.prototype.getRectPos=function(e,t,o,a){var n=[];return n.push(new cc.Vec2(e.x+o*Math.cos(t)/2-a*Math.sin(t)/2,e.y+o*Math.sin(t)/2+a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x-o*Math.cos(t)/2-a*Math.sin(t)/2,e.y-o*Math.sin(t)/2+a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x-o*Math.cos(t)/2+a*Math.sin(t)/2,e.y-o*Math.sin(t)/2-a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x+o*Math.cos(t)/2+a*Math.sin(t)/2,e.y+o*Math.sin(t)/2-a*Math.cos(t)/2)),n},t.prototype.getRotatePos=function(e,t,o){for(var a=[],n=0;n<e.length;n++){var i=e[n].x-t.x,c=e[n].y-t.y,r=i*Math.cos(o)-c*Math.sin(o),s=i*Math.sin(o)+c*Math.cos(o);a.push(cc.v2(r+t.x,s+t.y))}return a},t.prototype.sortPos=function(){this.steelx[0]==this.steelx[1]?this.selectSortMIN(1):this.steely[0]==this.steely[1]?this.selectSortMIN(0):this.steelx[0]>this.steelx[1]&&this.steely[0]>this.steely[1]?(this.selectSortMIN(1),this.selectSortMIN(0)):this.steelx[0]>this.steelx[1]&&this.steely[0]<this.steely[1]&&(this.selectSortMIN(1),this.selectSortMAX(0))},t.prototype.selectSortMIN=function(e){var t=[];0==e?t=this.steelx:1==e&&(t=this.steely);for(var o,a=t.length,n=0;n<a-1;n++){o=n;for(var i=n+1;i<a;i++)t[o]>t[i]&&(o=i);if(o!=n){var c=t[n];t[n]=t[o],t[o]=c}}return t},t.prototype.selectSortMAX=function(e){var t=[];0==e?t=this.steelx:1==e&&(t=this.steely);for(var o,a=t.length,n=0;n<a-1;n++){o=n;for(var i=n+1;i<a;i++)t[o]<t[i]&&(o=i);if(o!=n){var c=t[n];t[n]=t[o],t[o]=c}}return t},t.prototype.setColor=function(e,t){var o;return o=0==t?r.default.instance.steelholeImg:1==t?r.default.instance.steelholeCenterImg:r.default.instance.steelImg,i.default.boardSkinData.currentSkin<=6?o[e]:o[4]},t.prototype.setSpeed=function(){for(var e,t,o=function(o){for(var n=a.Steels.children[o],i=n.getComponent(cc.RigidBody),c=n.getComponents(cc.RevoluteJoint),r=0,s=0;s<c.length;s++)(null===(t=null===(e=c[s].connectedBody)||void 0===e?void 0:e.node)||void 0===t?void 0:t.active)&&(r+=1);1==r&&a.scheduleOnce(function(){i.angularVelocity<2&&(i.angularVelocity=5)}),0==r&&a.scheduleOnce(function(){i.linearVelocity.x<15&&(i.linearDamping=.2,i.linearVelocity=cc.v2(50,0))})},a=this,n=0;n<this.Steels.children.length;n++)o(n)},t.prototype.clickSkip=function(){this.Screws.destroyAllChildren()},__decorate([d(cc.Prefab)],t.prototype,"screwPre",void 0),__decorate([d(cc.Prefab)],t.prototype,"screwOutPre",void 0),__decorate([d(cc.Prefab)],t.prototype,"holePre",void 0),__decorate([d(cc.Prefab)],t.prototype,"steelPre",void 0),__decorate([d(cc.Prefab)],t.prototype,"steel_holePre",void 0),__decorate([d(cc.Prefab)],t.prototype,"steel_hole2Pre",void 0),__decorate([d(cc.Prefab)],t.prototype,"lockPre",void 0),__decorate([d(cc.Prefab)],t.prototype,"spSteelPre",void 0),__decorate([d(cc.Prefab)],t.prototype,"spSteelPre2",void 0),__decorate([d(cc.Prefab)],t.prototype,"holeMaskPre",void 0),__decorate([d(cc.Prefab)],t.prototype,"skinNodePre",void 0),__decorate([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{CompGameManager:"CompGameManager",commonData:"commonData",itemView:"itemView",noviceView:"noviceView"}],CompGameManager:[function(e,t,o){"use strict";cc._RF.push(t,"6b0d2CjLYFGQIqUGspaI/JT","CompGameManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("compGameOvertView"),i=e("platform"),c=e("config"),r=e("Game"),s=e("BattleManager"),l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=e.call(this)||this;return t.timeLabel=null,t.revivePnl=null,t.setPnl=null,t.gameOverPnl=null,t.mask=null,t.aniNode=[],t.lockAni=null,t.pulloutAni=null,t.ButtonNode=null,t.lvProgress=null,t.progressPre=null,t.UserNode=null,t.playerAvatarNode=[],t.decreasePre=null,t.lvProgressImg=[],t.Btn=[],t.steelImg=[],t.steelholeImg=[],t.steelholeCenterImg=[],t.SimulatedData=[],t.rivalsRemoveNum=[],t.isplayAni=0,t.nowLoadLv=1,t.levelindex=0,t.checkTime=0,t.answerAni=!1,t.isloadSkin=!1,t.COMBO_count=0,t.COMBO_time=0,t.deltaTime=-1,t.gameNodePosition1=[3],t.gameNodePosition2=[],o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.aniNode[2].active=!1},t.prototype.onEnable=function(){console.log("---------\u5f53\u524d\u6a21\u5f0f",a.default.GameMode,a.default.isgameing)},t.prototype.initCompData=function(){i.reportPage("compGamePage",0),a.default.gameTime=300,a.default.clearSteelNum=0,a.default.gamingtime=0,a.default.playerData.is_pass="false",a.default.playerData.pass_time="",a.default.playerData.del_board_num="",this.rivalsRemoveNum=[],this.SimulatedData=[],this.initLevelProgress(),this.initRivalProData(),this.allocateBlocksAndTime(),this.levelindex=0},t.prototype.startClock=function(){var e=this;this.Btn[0].schedule(function(){a.default.isPause||a.default.gamingtime++},1),this.scheduleOnce(function(){e.simulatePlay()},2)},t.prototype.getCompLevel=function(){var e=a.default.CompetitionLevel[this.levelindex].type,t=a.default.CompetitionLevel[this.levelindex].index;a.default.currLevel=t,a.default.CompTypeLevelConfig=a.default.CompLevelConfig[e]},t.prototype.playDestroyAni=function(){},t.prototype.init=function(){i.reportLevel(this.levelindex,"startLevel",a.default.GameMode),this.getCompLevel(),a.default.windowHeight/a.default.windowWidth<1.8&&(this.node.getChildByName("Btn").scale=.8),-1!=this.gameNodePosition1.indexOf(a.default.currLevel)?this.node.getChildByName("gameNode").y=0:-1!=this.gameNodePosition2.indexOf(a.default.currLevel)?this.node.getChildByName("gameNode").y=-50:this.node.getChildByName("gameNode").y=-70,this.mask.getChildByName("ani").active=!1,this.Btn[3].node.active=!1,this.mask.opacity=0,this.revivePnl.active=!1,this.setPnl.active=!1,a.default.currLevel>10&&(this.Btn[3].node.active=!1),a.default.isAddTime?a.default.gameTime=120:(this.mask.active=!0,a.default.isPause=!0),this.timeLabel.string=a.default.gameTime+"s",this.updateTime(),this.Btn[3].getComponent(cc.Animation).stop(),this.Btn[0].getComponent(cc.Animation).stop(),a.default.isPullOut=!1,this.answerAni=!1},t.prototype.showAnswerVideoTips=function(e){this.Btn[3].node.getChildByName("ad").active=e},t.prototype.updateTime=function(){var e=this;this.stopTimeSchedule(),this.timeLabel.schedule(function(){a.default.gameTime<=1&&e.timeLabel.unscheduleAllCallbacks(),a.default.gameTime--,a.default.gameTime<0&&(a.default.gameTime=0),e.timeLabel.string=a.default.gameTime+"s",a.default.gameTime<=0&&(null!=a.default.gamelevel.screwOut?(console.log("\u4e0d\u5f39\u51fa\u6e38\u620f\u5931\u8d25"),e.updateTime()):a.default.isAddTime?(console.log("\u6e38\u620f\u5931\u8d25\uff01"),e.showGameoverPnl(0)):(e.revivePnl.getChildByName("bg").scale=0,e.revivePnl.getChildByName("bg").getComponent(cc.Animation).play("appear"),e.revivePnl.active=!0))},1)},t.prototype.stopTimeSchedule=function(){this.timeLabel.unscheduleAllCallbacks()},t.prototype.checkSteel=function(){var e=this;a.default.clearSteelNum++,a.default.AchievementData.TotalRemoveSteel++,this.UserNode.children[0].getChildByName("number").getComponent(cc.Label).string=String(a.default.wholeSteelNum-a.default.clearSteelNum),this.Btn[3].getComponent(cc.Animation).stop(),this.Btn[0].getComponent(cc.Animation).stop(),this.answerAni=!1,this.COMBO_count++,this.COMBO_time=5/this.deltaTime,a.default.vibrateOn&&this.scheduleOnce(function(){i.vibrateShort()},.1),s.default.instance.playFallSound(),a.default.TotalSteel<=0?(this.playDestroyAni(),console.log("\u6e38\u620f\u80dc\u5229\uff01"),a.default.useItemNum=[0,0,0,0],a.default.isGetAnswer=!1,a.default.isAddTime=!1,i.reportLevel(this.levelindex,"passLevel",a.GAME_MODE_ENUM.COMPETITION),this.levelindex++,console.warn("-----------\u5f53\u524d\u5173\u5361",this.levelindex),this.levelindex<a.default.CompMaxLevel?this.scheduleOnce(function(){e.getCompLevel(),e.init(),a.default.gamelevel.reload(),e.lvProgress.getChildByName(""+e.levelindex).getComponent(cc.Sprite).spriteFrame=e.lvProgressImg[1]},1):(a.default.playerData.is_pass="true",this.UserNode.children[0].getChildByName("number").active=!1,this.UserNode.children[0].getChildByName("pass").active=!0,this.scheduleOnce(function(){e.showGameoverPnl(1)},1))):this.playDestroyAni()},t.prototype.showGameoverPnl=function(){this.Btn[0].unscheduleAllCallbacks(),this.timeLabel.unscheduleAllCallbacks(),a.default.isPause=!0,console.log("\u6e38\u620f\u65f6\u95f4\uff1a",a.default.gamingtime),n.default.instance.initGameOverPnl(),this.gameOverPnl.active=!0;for(var e=1;e<4;e++)this.UserNode.children[e].getComponent(cc.Sprite).unscheduleAllCallbacks()},t.prototype.reset=function(){a.default.clearSteelNum-=a.default.LevelSteel-a.default.TotalSteel,this.UserNode.children[0].children[1].getComponent(cc.Label).string=String(a.default.wholeSteelNum-a.default.clearSteelNum),a.default.isAddTime=!1,this.init(),a.default.gamelevel.reload()},t.prototype.clickRevive=function(){var e=this;i.showRewardAD(function(){a.default.isAddTime=!0,e.init(),e.revivePnl.active=!1}),i.showBannerAD(!1),i.showGridAD(!1)},t.prototype.clickGiveup=function(){var e=this;this.revivePnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.revivePnl.active=!1,e.showGameoverPnl(0)},.2)},t.prototype.hideMask=function(){this.mask.active=!1,a.default.isPause=!1},t.prototype.playUnlockAni=function(){this.lockAni.active=!0,this.lockAni.getComponent(sp.Skeleton).animation="animation"},t.prototype.playPullOutAni=function(){this.pulloutAni.active=!0,this.pulloutAni.getComponent(sp.Skeleton).animation="animation"},t.prototype.setAniNodePosition=function(e,t){0==t?this.lockAni.setPosition(e):this.pulloutAni.setPosition(e)},t.prototype.playVibe=function(){a.default.vibrateOn&&(i.vibrateShort(),this.scheduleOnce(function(){i.vibrateShort()},.1))},t.prototype.changeDigBtn=function(){a.default.isUnLock?this.Btn[0].interactable=!1:this.Btn[0].interactable=!0},t.prototype.changePullOutBtn=function(){a.default.screwNum<=0||a.default.useItemNum[3]>=2?this.Btn[4].interactable=!1:this.Btn[4].interactable=!0},t.prototype.changeWithDrew=function(){null==a.default.gamelevel.cloneNode||a.default.useItemNum[1]>=3?this.Btn[1].interactable=!1:this.Btn[1].interactable=!0},t.prototype.changeReset=function(){a.default.useItemNum[2]>=3?this.Btn[2].interactable=!1:this.Btn[2].interactable=!0},t.prototype.loadSkin=function(e){var t=this;if(a.default.skinImgArr=[],e<=6)for(var o=function(o){r.default.resManager.loadBundleRes("levels","skin/"+e+"/"+o,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d","skin/"+e+"/"+o,"\u5931\u8d25!")}).then(function(e){a.default.skinImgArr[o-1]=e,7==o&&(t.isloadSkin=!0)})},n=1;n<=7;n++)o(n);else r.default.resManager.loadBundleRes("levels","skin/newSkin/"+e,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d","skin/newSkin/"+e,"\u5931\u8d25!")}).then(function(e){a.default.skinImgArr[0]=e,t.isloadSkin=!0})},t.prototype.changeUseItemMethod=function(e){if(console.log("----------11-------------\u66f4\u6539\u83b7\u53d6\u9053\u5177\u7684\u65b9\u5f0f",e),c.currentPlatform==c.platformEnum.wechat)if(console.log("----------22-------------\u66f4\u6539\u83b7\u53d6\u9053\u5177\u7684\u65b9\u5f0f",e),0==e){a.default.isShareUseProp=!1;for(var t=0;t<this.ButtonNode.children.length;t++)this.ButtonNode.children[t].getChildByName("share").active=!1;console.log("\u6539\u4e3a\u89c6\u9891\u83b7\u53d6\u9053\u5177")}else{for(a.default.isShareUseProp=!0,t=0;t<this.ButtonNode.children.length;t++)this.ButtonNode.children[t].getChildByName("share").active=!0;console.log("\u6539\u4e3a\u5206\u4eab\u83b7\u53d6\u9053\u5177")}},t.prototype.initLevelProgress=function(){this.lvProgress.removeAllChildren();for(var e=0;e<a.default.CompMaxLevel;e++){var t=cc.instantiate(this.progressPre);t.name=e+"",0==e&&(t.getComponent(cc.Sprite).spriteFrame=this.lvProgressImg[1]),t.setParent(this.lvProgress)}},t.prototype.initRivalProData=function(){for(var e=0;e<4;e++)this.UserNode.children[e].getChildByName("number").getComponent(cc.Label).string=""+a.default.wholeSteelNum,this.UserNode.children[e].getChildByName("pass").active=!1,this.UserNode.children[e].getChildByName("number").active=!0},t.prototype.simulatePlay=function(){for(var e=0,t=0;t<3;t++)e=this.SimulatedData[t].time[0]/this.SimulatedData[t].blocks[0],this.simulateDecrease(e,0,t);this.transposition()},t.prototype.simulateDecrease=function(e,t,o){var a=this,n=0;e=this.SimulatedData[0].time[t]/this.SimulatedData[0].blocks[t],this.UserNode.children[o+1].getComponent(cc.Sprite).schedule(function(){a.rivalsRemoveNum[o]++,a.playDecreaseAni(o),++n>=a.SimulatedData[o].blocks[t]&&(t++,a.UserNode.children[o+1].getComponent(cc.Sprite).unscheduleAllCallbacks(),t<33&&a.simulateDecrease(e,t,o))},e)},t.prototype.allocateBlocksAndTime=function(){for(var e=0;e<3;e++){this.rivalsRemoveNum.push(0);for(var t=a.default.Random_Rivals.rivals[e],o=this.allocateNumber(t.del_board_num),n=this.allocateNumber(parseInt(t.pass_time)-2),i=0;i<n.length;i++)n[i];var c=this.shuffleArray(o),r=this.shuffleArray(n);this.SimulatedData.push({blocks:c,time:r})}console.log("------\u5339\u914d\u6570\u636e",this.SimulatedData)},t.prototype.allocateNumber=function(e){for(var t=[.05,.04,.03,.02,.01],o=[7,7,6,6,7],a=[],n=e,i=0;i<o.length;i++)for(var c=o[i],r=Math.floor(n*t[i]),s=0;s<c;s++)a.push(r),n-=r;for(var l=0;n>0;)a[l]++,n--,l=(l+1)%a.length;return a},t.prototype.playDecreaseAni=function(e){var t=cc.instantiate(this.decreasePre);this.UserNode.children[e+1].getChildByName("number").getComponent(cc.Label).string=a.default.wholeSteelNum-this.rivalsRemoveNum[e]+"",a.default.wholeSteelNum-this.rivalsRemoveNum[e]<=0&&(this.UserNode.children[e+1].getChildByName("number").active=!1,this.UserNode.children[e+1].getChildByName("pass").active=!0,this.UserNode.children[e+1].getComponent(cc.Sprite).unscheduleAllCallbacks()),t.x=this.UserNode.children[e+1].x+35,t.y=-50,t.setParent(this.UserNode),cc.tween(t).to(.3,{y:-40}).to(.2,{y:-35,opacity:0}).call(function(){t.destroy()}).start()},t.prototype.shuffleArray=function(e){for(var t,o=e.length-1;o>0;o--){var a=Math.floor(Math.random()*(o+1));t=[e[a],e[o]],e[o]=t[0],e[a]=t[1]}return e},t.prototype.transposition=function(){var e,t=this;if(1!=this.gameOverPnl.active){this.scheduleOnce(function(){t.transposition()},.5);var o=[];o.push({point:a.default.wholeSteelNum-a.default.clearSteelNum,index:0});for(var n=1;n<4;n++)o.push({point:a.default.wholeSteelNum-this.rivalsRemoveNum[n-1],index:n});for(n=1;n<4;n++)for(var i=0;i<4-n;i++)o[i].point>o[i+1].point&&(e=[o[i+1],o[i]],o[i]=e[0],o[i+1]=e[1]);for(n=0;n<4;n++){var c=-1;for(i=0;i<4;i++)o[i].index!=n||(c=i);if(this.UserNode.children[n].position.x!=180*c-250){var r=cc.moveTo(.4,cc.v2(180*c-250,0));cc.tween(this.UserNode.children[n]).then(r).start()}}}},t.prototype.update=function(e){this.deltaTime<0&&(this.deltaTime=e),this.COMBO_time>0?this.COMBO_time--:this.COMBO_time<=0&&(this.COMBO_time=0,this.COMBO_count=0)},t.prototype.clickSkip=function(){a.default.gamelevel.clickSkip()},t.instance=null,__decorate([d(cc.Label)],t.prototype,"timeLabel",void 0),__decorate([d(cc.Node)],t.prototype,"revivePnl",void 0),__decorate([d(cc.Node)],t.prototype,"setPnl",void 0),__decorate([d(cc.Node)],t.prototype,"gameOverPnl",void 0),__decorate([d(cc.Node)],t.prototype,"mask",void 0),__decorate([d(cc.Node)],t.prototype,"aniNode",void 0),__decorate([d(cc.Node)],t.prototype,"lockAni",void 0),__decorate([d(cc.Node)],t.prototype,"pulloutAni",void 0),__decorate([d(cc.Node)],t.prototype,"ButtonNode",void 0),__decorate([d(cc.Node)],t.prototype,"lvProgress",void 0),__decorate([d(cc.Prefab)],t.prototype,"progressPre",void 0),__decorate([d(cc.Node)],t.prototype,"UserNode",void 0),__decorate([d(cc.Node)],t.prototype,"playerAvatarNode",void 0),__decorate([d(cc.Prefab)],t.prototype,"decreasePre",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"lvProgressImg",void 0),__decorate([d(cc.Button)],t.prototype,"Btn",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"steelImg",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"steelholeImg",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"steelholeCenterImg",void 0),o=__decorate([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{BattleManager:"BattleManager",Game:"Game",commonData:"commonData",compGameOvertView:"compGameOvertView",config:"config",platform:"platform"}],Enum:[function(e,t,o){"use strict";cc._RF.push(t,"e342dQ3tBtDi5E4Wy3Kc0ur","Enum"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_GAME_STATES=o.ENUM_SCREW_STATES=o.ENUM_PROP_STATES=void 0;var a,n=cc._decorator;n.ccclass,n.property,(a=o.ENUM_PROP_STATES||(o.ENUM_PROP_STATES={})).NONE="none",a.ADD_HOLE="addHole",a.CHANGE_BOX="changeBox",a.CLEAR_HOLE="clearHole",a.CRESH_STEEL_PRE="crashSteelpre",a.CRESH_STEEL="crashSteel",function(e){e.IDLE="idle",e.MOVETOHOLE="moveToHole",e.MOVETOBOX="moveToHole",e.BOXANI="boxani",e.PROPANI="propani"}(o.ENUM_SCREW_STATES||(o.ENUM_SCREW_STATES={})),function(e){e.WIN="Win",e.LOSE="Lose",e.NORMAL="noarmal"}(o.ENUM_GAME_STATES||(o.ENUM_GAME_STATES={})),cc._RF.pop()},{}],GameLevel:[function(e,t,o){"use strict";var a;cc._RF.push(t,"867cdsXhsBLz471gL/1MGkL","GameLevel"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_SCREW_STATUS=void 0;var n,i=e("commonData"),c=e("itemView"),r=e("GameManager"),s=e("noviceView"),l=e("config"),u=e("UIManager"),d=e("ScrewNumberManager"),h=cc._decorator,p=h.ccclass,f=h.property,m=80;(n=a=o.ENUM_SCREW_STATUS||(o.ENUM_SCREW_STATUS={})).IDLE="idle",n.ACTIVE="active",n.MOVING="moving",n.Ani="ani";var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.screwPre=null,t.screwOutPre=null,t.holePre=null,t.steelPre=null,t.steel_holePre=null,t.steel_hole2Pre=null,t.lockPre=null,t.spSteelPre=[],t.spSteelPre2=[],t.holeMaskPre=null,t.skinNodePre=null,t.bg=null,t.Holes=null,t.Steels=null,t.Screws=null,t.currentScrew=null,t.screwOut=null,t.screwTop=null,t.screwStatus=a.IDLE,t.currentLevelconfig=null,t.cloneNode=null,t.cloneNode1=null,t.cloneNode2=null,t.collisionPos=[],t.steelx=[],t.steely=[],t.desScrew=null,t}return __extends(t,e),t.prototype.init=function(){i.default.windowHeight/i.default.windowWidth<1.8&&(m=70),this.screwStatus=a.IDLE,console.log("factor",m),i.default.isgameing=!0,i.default.isPause=!1,i.default.useItemNum=[0,0,0,0],i.default.isAddTime=!1,i.default.screwNum=0,i.default.isUnLock=!0,i.default.isGetAnswer=!1,this.cloneNode=null,this.cloneNode1=null,this.cloneNode2=null,this.screwOut=null,this.currentScrew=null,this.screwTop=null,this.desScrew=null,console.log("=========init"),this.bg=this.node.getChildByName("bg"),this.Holes=this.bg.getChildByName("holenode"),this.Steels=this.bg.getChildByName("steelnode"),this.Screws=this.bg.getChildByName("screwnode"),r.default.instance.changeWithDrew(),r.default.instance.changeDigBtn(),r.default.instance.changeReset(),this.createLevelAni(),this.bg.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.reload=function(){var e=this;i.default.useItemNum[0]=0,i.default.useItemNum[1]=0,i.default.useItemNum[3]=0,i.default.isAddTime=!1,i.default.screwNum=0,i.default.isgameing=!0,this.screwStatus=a.IDLE,this.Holes.removeAllChildren(),this.Steels.removeAllChildren(),this.Screws.removeAllChildren(),this.cloneNode=null,this.cloneNode1=null,this.cloneNode2=null,this.screwOut=null,this.currentScrew=null,this.screwTop=null,this.desScrew=null,i.default.isUnLock=!0,i.default.isDig=!1,r.default.instance.changeWithDrew(),r.default.instance.changeDigBtn(),r.default.instance.changeReset(),this.scheduleOnce(function(){e.createLevelAni()})},t.prototype.unLock=function(){if(!i.default.isUnLock)for(var e=function(e){var o=t.Holes.children[e];if(o.children.length>0){var a=cc.moveBy(.8,cc.v2(0,10));return cc.tween(o.children[0].children[0]).then(a).call(function(){r.default.instance.playUnlockAni(),o.children[0].destroy(),r.default.instance.playVibe(),r.default.instance.changeDigBtn()}).start(),i.default.isUnLock=!0,i.default.useItemNum[0]++,"break"}},t=this,o=0;o<this.Holes.children.length&&"break"!==e(o);o++);},t.prototype.onDestroy=function(){console.log("--------destroy"),this.bg.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onTouchStart=function(e){var t=this;if(this.screwStatus!=a.MOVING&&this.screwStatus!=a.Ani){var o=e.getLocation(),n=this.findHole(o);if(n&&n.children.length>0)c.default.instance.clickDigHole_video();else{if(i.default.isPullOut){if(s=this.findScrew(o))console.log("\u627e\u5230\u87ba\u4e1d",s.name),r.default.instance.setAniNodePosition(s.position,1),this.currentScrew!=s&&(this.setScrewActive(this.currentScrew,!1),this.setScrewActive(s,!0));else{if(null==this.screwOut)return;if(r.default.instance.setAniNodePosition(cc.v2(this.currentScrew.position),1),null==this.findScrew2(o))return}return this.desScrew=o,console.log("\u6b21\u6570\u9650\u5236",i.default.GameMode),l.currentPlatform!=l.platformEnum.wechat&&(i.default.GameMode==i.GAME_MODE_ENUM.GARAPHICAL||i.default.useItemNum[3]++),this.currentScrew.destroy(),i.default.isPullOut=!1,this.screwStatus=a.Ani,i.default.screwNum--,this.scheduleOnce(function(){cc.tween(t.screwOut).to(.2,{scaleX:1.4,scaleY:1.4}).call(function(){r.default.instance.playPullOutAni()}).to(.2,{scaleX:1.5,scaleY:1.5,opacity:0}).call(function(){t.screwOut.destroy(),t.screwOut=null,t.currentScrew=null,t.screwStatus=a.IDLE,t.setSpeed()}).start()},.25),void r.default.instance.changePullOutBtn()}var s;if(this.currentScrew)if(s=this.findScrew(o))s==this.currentScrew?this.setScrewActive(this.currentScrew,!1):(this.setScrewActive(this.currentScrew,!1),this.setScrewActive(s,!0));else{var u=this.findHole(o);if(u){console.log("\u628a\u87ba\u4e1d\u632a\u5230\u8fd9\u91cc");for(var d=u.convertToWorldSpaceAR(cc.v2(0,0)),h=u.getComponent(cc.CircleCollider).radius,p=(u.getBoundingBox(),!1),f=!1,g=!1,v=[],w=0;w<this.Steels.children.length;w++){var y=this.Steels.children[w];y.getComponent(cc.RigidBody).syncPosition(!0);var S=y.convertToNodeSpaceAR(d),P=(cc.v2(y.x,y.y),y.convertToWorldSpaceAR(cc.v2(0,0))),_=!1;if("steel"==y.name||"spSteel_square"==y.name){var A=y.getComponent(cc.PhysicsPolygonCollider).points;_=cc.Intersection.polygonCircle(A,{position:S,radius:h})}else if("spSteel_circle"==y.name){var b=y.getComponent(cc.PhysicsCircleCollider).radius;_=cc.Intersection.circleCircle({position:P,radius:b},{position:d,radius:h})}if(_){p=!0,console.log("=====\u6d1e\u548c\u94a2\u6761\u76f8\u4ea4"),"spSteel_circle"==y.name&&(g=!0);for(var k=0;k<y.children.length;k++){var N,C,M=y.children[k],I=M.convertToWorldSpaceAR(cc.v2(0,0)),L=(this.Holes.convertToNodeSpaceAR(I),M.getBoundingBox());if("steel"==y.name){if(C=this.getRectPos(cc.v2(M.x,M.y),M.parent.angle,L.width,L.height),N=this.getRectPos(cc.v2(M.x,M.y),M.parent.angle,L.width-m,L.height),cc.Intersection.polygonCircle(C,{position:S,radius:h})&&"steel_hole"==M.name){console.log("=====\u6d1e\u548c\u5e26\u5b54\u7684\u94a2\u6761\u76f8\u4ea4");var B=this.getDistance(d,I),D=85;if(70==m&&(D=65),console.log("\u4e24\u70b9\u95f4\u7684\u8ddd\u79bb",B,D),B>D)continue;if(!(B<=8)){f=!0;break}v.push(M)}if(cc.Intersection.polygonCircle(N,{position:S,radius:h})){if(L.width<m)continue;"steel_hole"!=M.name&&(console.log("=====\u6d1e\u548c\u4e0d\u5e26\u5b54\u7684\u94a2\u6761\u76f8\u4ea4"),f=!0)}}else if("spSteel_circle"==y.name){if(console.log("==\u5706\u6761\u5b54\u6d1e\u548c\u6d1e\u76f8\u4ea4"),cc.Intersection.circleCircle({position:S,radius:h},{position:cc.v2(M.position),radius:h})){if(B=this.getDistance(d,I),console.log("===\u5706\u6761\u5b54\u6d1e\u548c\u6d1e\u7684\u8ddd\u79bb",B),D=85,70==m&&(D=65),B>D)continue;if(!(B<=8)){f=!0;break}v.push(M),g=!1}}else if("spSteel_square"==y.name){if(B=this.getDistance(d,I),console.log("===\u65b9\u5757\u5b54\u6d1e\u548c\u6d1e\u7684\u8ddd\u79bb",B),B>113)continue;if(!(B<=8)){f=!0;break}v.push(M)}}}}if((f||g)&&(v=[]),0!=u.children.length&&(p=!0,v=[],console.log("\u8fd9\u4e2a\u6d1e\u88ab\u9501\u4f4f\u4e86")),p&&v.length<=0)return console.log("\u5b54\u88ab\u906e\u6321\u4e86"),this.screwStatus=a.Ani,void this.playAni();this.screwStatus=a.MOVING,this.saveLevelData();var E=cc.moveTo(.3,cc.v2(u.x,u.y+40));cc.tween(this.screwOut).then(E).call(function(){v.length?t.setScrew(u,v):t.setScrew(u)}).start()}else this.setScrewActive(this.currentScrew,!1)}else(s=this.findScrew(o))&&this.setScrewActive(s,!0)}}else console.log("--------------return--------------",this.screwStatus)},t.prototype.findScrew=function(e){for(var t=null,o=0;o<this.Screws.children.length;o++){var a=this.Screws.children[o],n=a.getBoundingBox(),i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){if("screwOut"!=(t=a).name)break;t=null}}return t},t.prototype.findScrew2=function(e){for(var t=null,o=0;o<this.Screws.children.length;o++){var a=this.Screws.children[o],n=a.getBoundingBox(),i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){if("screwOut"==(t=a).name)break;t=null;break}}return t},t.prototype.playAni=function(){var e=this,t=this.screwOut.getPosition();cc.tween(this.screwOut).to(.1,{position:new cc.Vec3(t.x+5,t.y,0)},{easing:"quadInOut"}).to(.1,{position:new cc.Vec3(t.x-5,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x+8,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x-8,t.y,0)},{easing:"quadInOut"}).to(.02,{position:new cc.Vec3(t.x,t.y,0)},{easing:"quadInOut"}).call(function(){e.screwStatus=a.IDLE}).start()},t.prototype.findHole=function(e){for(var t=null,o=0;o<this.Holes.children.length;o++){var a=this.Holes.children[o],n=a.getBoundingBox();n.width+=30,n.height+=30;var i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){t=a;break}}if(t){var c=t.getBoundingBox();for(o=0;o<this.Screws.children.length;o++){var r=this.Screws.children[o];if("screw"==r.name){var s=r.getBoundingBox();if(cc.Intersection.rectRect(c,s)){t=null;break}}}}return t},t.prototype.setScrewActive=function(e,t){var o=this;if(void 0===t&&(t=!0),e&&"screwOut"!=e.name)if(1==i.default.currLevel&&0==i.default.passedNovice&&s.default.instance.nextStep(),t){this.screwStatus=a.ACTIVE;var n=cc.v2(e.x,e.y);e.opacity=0,this.currentScrew=e,d.recordCurScrewNumber(this.currentScrew),this.screwOut=cc.instantiate(this.screwOutPre),70==m&&(this.screwOut.getChildByName("top").width=60,this.screwOut.getChildByName("top").height=60,this.screwOut.width=60,this.screwOut.height=60),this.screwOut.parent=e.parent,this.screwOut.name="screwOut",this.screwOut.setPosition(n),this.screwOut.opacity=255,this.screwTop=this.screwOut.getChildByName("top");var c=20;70==m&&(c=10);var r=cc.moveBy(.2,0,40),l=cc.moveBy(.2,0,c);cc.tween(this.screwOut).then(r).start(),cc.tween(this.screwTop).then(l).start()}else{c=20,70==m&&(c=10),r=cc.moveBy(.2,0,-40),l=cc.moveBy(.2,0,-c);var u=this.screwOut,h=this.screwTop,p=e;this.currentScrew=null,this.screwOut=null,this.screwTop=null,cc.tween(u).then(r).start(),cc.tween(h).then(l).call(function(){u.destroy(),p==o.currentScrew&&null!=o.screwOut||(e.opacity=255),o.screwStatus=a.IDLE}).start()}},t.prototype.setScrew=function(e,t){var o=this;1==i.default.currLevel&&0==i.default.passedNovice&&2==s.default.instance.progress&&s.default.instance.nextStep();var n=20;70==m&&(n=10);var c=cc.moveBy(.2,0,-40),r=cc.moveBy(.2,0,-n);cc.tween(this.screwOut).then(c).start(),cc.tween(this.screwTop).then(r).call(function(){o.currentScrew&&o.currentScrew.destroy(),o.currentScrew=null,o.screwOut.destroy(),o.screwOut=null,o.screwTop=null;var n=cc.instantiate(o.screwPre);if(d.screwNumberRecord(n,d.curScrewNumber),70==m&&(n.width=60,n.height=60,n.getComponent(cc.PhysicsCircleCollider).radius=18),n.setPosition(e.position),n.setParent(o.Screws),o.screwStatus=a.IDLE,t){n.group="default",n.getComponent(cc.PhysicsCircleCollider).apply();for(var i=function(e){for(var a=t[e],i=a.convertToWorldSpaceAR(cc.v2(0,0)),c=a.parent,r=c.convertToNodeSpaceAR(i),s=c.getComponents(cc.RevoluteJoint),l=null,u=null,d=0;d<s.length;d++){var h=s[d];if(o.getDistance(h.anchor,r)<=20){l=h,u=h.anchor,console.log("\u627e\u5230\u5173\u8282",e,d);break}}l&&(l.destroy(),o.scheduleOnce(function(){n.group="screw",n.getComponent(cc.PhysicsCircleCollider).apply();var e=c.addComponent(cc.RevoluteJoint);e.anchor.x=u.x,e.anchor.y=u.y,e.connectedBody=n.getComponent(cc.RigidBody)}))},c=0;c<t.length;c++)i(c)}o.setSpeed(),o.screwStatus=a.IDLE}).start()},t.prototype.saveLevelData=function(){console.log("\u8bb0\u5f55\u5173\u5361\u914d\u7f6e"),this.cloneNode2=this.cloneNode1,this.cloneNode1=this.cloneNode,this.cloneNode=cc.instantiate(this.bg),r.default.instance.changeWithDrew(),this.desScrew=null},t.prototype.withDrew=function(){if(null!=this.cloneNode){this.bg.removeFromParent(),this.bg.destroy(),this.cloneNode.setParent(this.node),this.cloneNode.setPosition(0,0),this.bg=this.cloneNode,this.cloneNode=this.cloneNode1,this.cloneNode1=this.cloneNode2,this.cloneNode2=null,this.Holes=this.bg.getChildByName("holenode"),this.Steels=this.bg.getChildByName("steelnode"),this.Screws=this.bg.getChildByName("screwnode"),this.screwOut=this.Screws.getChildByName("screwOut"),this.screwOut&&this.screwOut.destroy();for(var e=0;e<this.Screws.children.length;e++)0==this.Screws.children[e].opacity&&(this.Screws.children[e].opacity=255);if(i.default.isUnLock)for(e=0;e<this.Holes.children.length;e++)this.Holes.children[e].children.length>0&&this.Holes.children[e].children[0].destroy();if(null!=this.desScrew){var t=this.findScrew(this.desScrew);null==t||t.destroy()}this.screwOut=null,this.screwTop=null,this.currentScrew=null,this.bg.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),i.default.TotalSteel=this.Steels.children.length,i.default.screwNum=this.Screws.children.length,console.log("\u64a4\u56de",i.default.useItemNum[1]),this.screwStatus=a.IDLE,r.default.instance.changeWithDrew(),r.default.instance.changePullOutBtn()}else console.log("\u65e0\u6cd5\u64a4\u56de")},t.prototype.setSpriteType=function(e){for(;null==e.getChildByName("skinNode");)e=e.getChildByName("holemask");e.getChildByName("skinNode").getComponent(cc.Sprite).type=cc.Sprite.Type.TILED},t.prototype.createLevelAni=function(){var e=this;this.currentLevelconfig=i.default.levelConfig[i.default.currLevel],console.log("\u5f53\u524d\u5173\u5361",i.default.currLevel),this.bg.width=i.default.levelConfig[i.default.currLevel].bg.x*m,this.bg.height=i.default.levelConfig[i.default.currLevel].bg.y*m;for(var t=this.currentLevelconfig.hole.num,o=0;o<t;o++)if(1==this.currentLevelconfig.hole[o].screw){var a=cc.instantiate(this.screwPre),n=cc.instantiate(this.holePre),c=cc.instantiate(this.screwOutPre);i.default.screwNum++,70==m&&(a.width=60,a.height=60,n.width=50,n.height=50,n.getComponent(cc.CircleCollider).radius=18,a.getComponent(cc.PhysicsCircleCollider).radius=18,c.getChildByName("top").width=60,c.getChildByName("top").height=60,c.width=60,c.height=60),a.x=m*this.currentLevelconfig.hole[o].x,a.y=m*this.currentLevelconfig.hole[o].y,a.setParent(this.Screws),a.name="screw",a.group="screw",a.opacity=0,n.x=m*this.currentLevelconfig.hole[o].x,n.y=m*this.currentLevelconfig.hole[o].y,n.setParent(this.Holes),c.setParent(this.Screws),c.x=m*this.currentLevelconfig.hole[o].x,c.y=m*this.currentLevelconfig.hole[o].y+40,c.getChildByName("top").y=40,c.name="screwOut"}else if(n=cc.instantiate(this.holePre),70==m&&(n.getComponent(cc.CircleCollider).radius=18,n.width=50,n.height=50),n.x=m*this.currentLevelconfig.hole[o].x,n.y=m*this.currentLevelconfig.hole[o].y,n.setParent(this.Holes),1==this.currentLevelconfig.hole[o].lock){var s=cc.instantiate(this.lockPre);s.setParent(n),s.setPosition(0,0),r.default.instance.setAniNodePosition(cc.v2(n.position),0),i.default.isUnLock=!1,r.default.instance.changeDigBtn()}if(r.default.instance.changePullOutBtn(),this.currentLevelconfig.spSteel){console.log("\u6709\u7279\u6b8a\u94a2\u676111");var l=this.currentLevelconfig.spSteel.num;for(o=0;o<l;o++){var u=this.currentLevelconfig.spSteel[o].index,d=cc.v2(this.currentLevelconfig.spSteel[o].x*m,this.currentLevelconfig.spSteel[o].y*m),h=void 0;h=70==m?cc.instantiate(this.spSteelPre2[u]):cc.instantiate(this.spSteelPre[u]),0==u?h.getComponent(cc.PhysicsPolygonCollider).enabled=!1:1==u&&(h.getComponent(cc.PhysicsCircleCollider).enabled=!1),h.setPosition(d),h.setParent(this.Steels),h.getComponent(cc.RigidBody).gravityScale=0}}var p,f,g,v=this.currentLevelconfig.steel.num;i.default.TotalSteel=v,i.default.LevelSteel=v;var w=function(t){var o=new cc.Node;o.setParent(y.Steels),o.name="steel",y.steelx=[],y.steely=[];for(var a=Object.keys(y.currentLevelconfig.steel[t]).length-1,n=0;n<a;n++)y.steelx.push(y.currentLevelconfig.steel[t][n].x),y.steely.push(y.currentLevelconfig.steel[t][n].y);var c,s=y.currentLevelconfig.steel[t].color;y.sortPos(),c=Math.atan2(y.steely[0]-y.steely[1],y.steelx[0]-y.steelx[1])*(180/Math.PI);var l=(y.steelx[0]+y.steelx[a-1])/2*m,u=(y.steely[a-1]+y.steely[0])/2*m,d=y.getDistance(cc.v2(y.steelx[0],y.steely[0]),cc.v2(y.steelx[a-1],y.steely[a-1]))*m+m+50;for(p=null,f=null,n=0;n<a;n++){var h=null;0==n||n==a-1?(h=cc.instantiate(y.steel_hole2Pre)).getComponent(cc.Sprite).spriteFrame=y.setColor(s,0):(h=cc.instantiate(y.steel_holePre)).getComponent(cc.Sprite).spriteFrame=y.setColor(s,1),70==m&&(h.scale=.7),h.setPosition(y.steelx[n]*m,y.steely[n]*m),h.setParent(o),0==n?h.angle=c-90:(h.angle=c+90,h.setScale(-.8,.8),70==m&&h.setScale(-.7,.7)),h.name="steel_hole";var w=h.convertToWorldSpaceAR(cc.v2(0,0)),S=cc.instantiate(y.holeMaskPre);if(null==f)f=S,g=o.convertToNodeSpaceAR(w),f.setParent(o),f.setPosition(g);else{var P=p.convertToNodeSpaceAR(w);S.setPosition(P),S.setParent(p)}p=S}for(n=0;n<a-1;n++){var _=Math.sqrt(Math.pow(y.steelx[n]-y.steelx[n+1],2)+Math.pow(y.steely[n]-y.steely[n+1],2))-1;if(!(_<=0)){var A=cc.instantiate(y.steelPre);70==m&&(A.width=70,A.height=70),A.setPosition((y.steelx[n]+y.steelx[n+1])*m/2,(y.steely[n]+y.steely[n+1])*m/2),A.setParent(o),A.scaleY=_,A.getComponent(cc.Sprite).spriteFrame=y.setColor(s,2),A.angle=c-90}}f.removeFromParent(),f.setParent(o),f.setPosition(g),y.setSkinNode(o,l,u,d,c,p,s);var b=cc.v2(o.position);t%2==1?o.setPosition(1e3,0):o.setPosition(-1e3,0),1==i.default.currLevel&&0==i.default.passedNovice&&r.default.instance.showNovice();var k=cc.moveTo(.5,b);y.scheduleOnce(function(){cc.tween(o).then(k).call(function(){t==v-1&&e.scheduleOnce(function(){e.Steels.removeAllChildren(),r.default.instance.hideMask(),e.createLevel()})}).start()},.08*t)},y=this;for(o=0;o<v;o++)w(o)},t.prototype.createLevel=function(){d.isShowNumberInit(),1==u.default.instance.setPnl.active||(i.default.isPause=!1);var e=20;70==m&&(e=10);for(var t=cc.moveBy(.3,0,-40),o=cc.moveBy(.3,0,-e),a=0,n=function(e){var n=c.Screws.children[e];"screw"==n.name?(a++,d.screwNumberRecord(n,a.toString()),c.scheduleOnce(function(){n.opacity=255},.3)):"screwOut"==n.name&&(cc.tween(n).then(t).start(),cc.tween(n.getChildByName("top")).then(o).call(function(){n.destroy()}).start())},c=this,r=0;r<this.Screws.children.length;r++)n(r);var s=this.currentLevelconfig.steel.num;for(i.default.TotalSteel=s,i.default.LevelSteel=s,this.currentLevelconfig.spSteel&&this.createSpSteel(),console.log("-----------\u677f\u5b50\u6570\u91cf",i.default.LevelSteel),r=0;r<s;r++){var l=new cc.Node;l.setParent(this.Steels),l.group="default",l.name="steel",l.addComponent(cc.RigidBody).linearDamping=1;var h,p,f=l.addComponent(cc.PhysicsPolygonCollider);this.steelx=[],this.steely=[];for(var g=Object.keys(this.currentLevelconfig.steel[r]).length-1,v=0;v<g;v++)this.steelx.push(this.currentLevelconfig.steel[r][v].x),this.steely.push(this.currentLevelconfig.steel[r][v].y);var w=this.currentLevelconfig.steel[r].color;this.sortPos(),h=(p=Math.atan2(this.steely[0]-this.steely[1],this.steelx[0]-this.steelx[1]))*(180/Math.PI);var y,S=(this.steelx[0]+this.steelx[g-1])/2*m,P=(this.steely[g-1]+this.steely[0])/2*m,_=this.getDistance(cc.v2(this.steelx[0],this.steely[0]),cc.v2(this.steelx[g-1],this.steely[g-1]))*m+m+50,A=this.getRectPos(cc.v2(S,P),p,_,m);for(v=0;v<f.points.length;v++)null!=A[v]&&(f.points[v]=A[v]);l.getComponent(cc.PhysicsPolygonCollider).apply();var b=null,k=null;for(v=0;v<g;v++){var N=null;0==v||v==g-1?(N=cc.instantiate(this.steel_hole2Pre)).getComponent(cc.Sprite).spriteFrame=this.setColor(w,0):(N=cc.instantiate(this.steel_holePre)).getComponent(cc.Sprite).spriteFrame=this.setColor(w,1),N.setPosition(this.steelx[v]*m,this.steely[v]*m),N.setParent(l),70==m&&(N.scale=.7),0==v?N.angle=h-90:(N.angle=h+90,N.setScale(-.8,.8),70==m&&N.setScale(-.7,.7)),N.name="steel_hole";var C=N.convertToWorldSpaceAR(cc.v2(0,0)),M=(this.Steels.convertToNodeSpaceAR(C),this.findScrew(C));if("screwOut"==(null==M?void 0:M.name)&&(M=null),M){var I=l.addComponent(cc.RevoluteJoint);I.anchor.x=this.steelx[v]*m,I.anchor.y=this.steely[v]*m,I.connectedBody=M.getComponent(cc.RigidBody)}var L=cc.instantiate(this.holeMaskPre);if(null==k)k=L,y=l.convertToNodeSpaceAR(C),k.setParent(l),k.setPosition(y);else{var B=b.convertToNodeSpaceAR(C);L.setPosition(B),L.setParent(b)}b=L}for(v=0;v<g-1;v++){var D=Math.sqrt(Math.pow(this.steelx[v]-this.steelx[v+1],2)+Math.pow(this.steely[v]-this.steely[v+1],2))-1;if(!(D<=0)){var E=cc.instantiate(this.steelPre);70==m&&(E.width=70,E.height=70),E.setPosition((this.steelx[v]+this.steelx[v+1])*m/2,(this.steely[v]+this.steely[v+1])*m/2),E.setParent(l),E.scaleY=D,E.getComponent(cc.Sprite).spriteFrame=this.setColor(w,2),E.angle=h-90,E.name="steel"}}k.removeFromParent(),k.setParent(l),k.setPosition(y),this.setSkinNode(l,S,P,_,h,b,w)}},t.prototype.setSkinNode=function(e,t,o,a,n,c,r){var s=cc.instantiate(this.skinNodePre),l=s.getComponent(cc.Sprite);i.default.boardSkinData.currentSkin<=6?l.spriteFrame=i.default.skinImgArr[r]:l.spriteFrame=i.default.skinImgArr[0],s.setParent(e),s.setPosition(t,o);var u=s.convertToWorldSpaceAR(cc.v2(0,0)),d=c.convertToNodeSpaceAR(u);s.setParent(c),s.setPosition(d),l.type=cc.Sprite.Type.TILED,s.width=.9*m,s.height=a-10,s.angle=n+90,s.name="skinNode"},t.prototype.createSpSteel=function(){console.log("\u6709\u7279\u6b8a\u94a2\u676122");var e=this.currentLevelconfig.spSteel.num;i.default.TotalSteel+=e,i.default.LevelSteel+=e;for(var t=0;t<e;t++){var o=this.currentLevelconfig.spSteel[t].index,a=i.default.spSteelData[o].baseIndex,n=void 0;70==m?n=cc.instantiate(this.spSteelPre2[o]):(console.log("------------"),n=cc.instantiate(this.spSteelPre[o]));var c=cc.v2(this.currentLevelconfig.spSteel[t].x*m,this.currentLevelconfig.spSteel[t].y*m);n.setPosition(c),n.setParent(this.Steels),0==a?(n.name="spSteel_square",n.getComponent(cc.PhysicsPolygonCollider).enabled=!0):1==a&&(n.name="spSteel_circle",n.getComponent(cc.PhysicsCircleCollider).enabled=!0);for(var r=0;r<n.children.length;r++){var s=n.children[r],l=s.convertToWorldSpaceAR(cc.v2(0,0)),u=(this.Steels.convertToNodeSpaceAR(l),this.findScrew(l));if("screwOut"==(null==u?void 0:u.name)&&(u=null),u){var d=n.addComponent(cc.RevoluteJoint);d.anchor.x=s.x,d.anchor.y=s.y,d.connectedBody=u.getComponent(cc.RigidBody)}}}},t.prototype.getDistance=function(e,t){var o=cc.v2(e.x-t.x,e.y-t.y);return Math.sqrt(o.x*o.x+o.y*o.y)},t.prototype.getRectPos=function(e,t,o,a){var n=[];return n.push(new cc.Vec2(e.x+o*Math.cos(t)/2-a*Math.sin(t)/2,e.y+o*Math.sin(t)/2+a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x-o*Math.cos(t)/2-a*Math.sin(t)/2,e.y-o*Math.sin(t)/2+a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x-o*Math.cos(t)/2+a*Math.sin(t)/2,e.y-o*Math.sin(t)/2-a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x+o*Math.cos(t)/2+a*Math.sin(t)/2,e.y+o*Math.sin(t)/2-a*Math.cos(t)/2)),n},t.prototype.getRotatePos=function(e,t,o){for(var a=[],n=0;n<e.length;n++){var i=e[n].x-t.x,c=e[n].y-t.y,r=i*Math.cos(o)-c*Math.sin(o),s=i*Math.sin(o)+c*Math.cos(o);a.push(cc.v2(r+t.x,s+t.y))}return a},t.prototype.sortPos=function(){this.steelx[0]==this.steelx[1]?this.selectSortMIN(1):this.steely[0]==this.steely[1]?this.selectSortMIN(0):this.steelx[0]>this.steelx[1]&&this.steely[0]>this.steely[1]?(this.selectSortMIN(1),this.selectSortMIN(0)):this.steelx[0]>this.steelx[1]&&this.steely[0]<this.steely[1]&&(this.selectSortMIN(1),this.selectSortMAX(0))},t.prototype.selectSortMIN=function(e){var t=[];0==e?t=this.steelx:1==e&&(t=this.steely);for(var o,a=t.length,n=0;n<a-1;n++){o=n;for(var i=n+1;i<a;i++)t[o]>t[i]&&(o=i);if(o!=n){var c=t[n];t[n]=t[o],t[o]=c}}return t},t.prototype.selectSortMAX=function(e){var t=[];0==e?t=this.steelx:1==e&&(t=this.steely);for(var o,a=t.length,n=0;n<a-1;n++){o=n;for(var i=n+1;i<a;i++)t[o]<t[i]&&(o=i);if(o!=n){var c=t[n];t[n]=t[o],t[o]=c}}return t},t.prototype.setColor=function(e,t){var o;return o=0==t?r.default.instance.steelholeImg:1==t?r.default.instance.steelholeCenterImg:r.default.instance.steelImg,i.default.boardSkinData.currentSkin<=6?o[e]:o[4]},t.prototype.setSpeed=function(){for(var e,t,o=function(o){for(var n=a.Steels.children[o],i=n.getComponent(cc.RigidBody),c=n.getComponents(cc.RevoluteJoint),r=0,s=0;s<c.length;s++)(null===(t=null===(e=c[s].connectedBody)||void 0===e?void 0:e.node)||void 0===t?void 0:t.active)&&(r+=1);1==r&&a.scheduleOnce(function(){i.angularVelocity<2&&(i.angularVelocity=5)}),0==r&&a.scheduleOnce(function(){i.linearVelocity.x<15&&(i.linearDamping=.2,i.linearVelocity=cc.v2(50,0))})},a=this,n=0;n<this.Steels.children.length;n++)o(n)},__decorate([f(cc.Prefab)],t.prototype,"screwPre",void 0),__decorate([f(cc.Prefab)],t.prototype,"screwOutPre",void 0),__decorate([f(cc.Prefab)],t.prototype,"holePre",void 0),__decorate([f(cc.Prefab)],t.prototype,"steelPre",void 0),__decorate([f(cc.Prefab)],t.prototype,"steel_holePre",void 0),__decorate([f(cc.Prefab)],t.prototype,"steel_hole2Pre",void 0),__decorate([f(cc.Prefab)],t.prototype,"lockPre",void 0),__decorate([f(cc.Prefab)],t.prototype,"spSteelPre",void 0),__decorate([f(cc.Prefab)],t.prototype,"spSteelPre2",void 0),__decorate([f(cc.Prefab)],t.prototype,"holeMaskPre",void 0),__decorate([f(cc.Prefab)],t.prototype,"skinNodePre",void 0),__decorate([p],t)}(cc.Component);o.default=g,cc._RF.pop()},{GameManager:"GameManager",ScrewNumberManager:"ScrewNumberManager",UIManager:"UIManager",commonData:"commonData",config:"config",itemView:"itemView",noviceView:"noviceView"}],GameManager:[function(e,t,o){"use strict";cc._RF.push(t,"e16c1zSHQxBZZW5sjFVWQvG","GameManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("startView"),i=e("gameOverView"),c=e("topView"),r=e("platform"),s=e("config"),l=e("PostUserData"),u=e("Game"),d=e("BattleManager"),h=e("GraphicalGameLevel"),p=e("UIManager"),f=e("unscrew"),m=e("ScrewNumberManager"),g=cc._decorator,v=g.ccclass,w=g.property,y=function(e){function t(){var t=e.call(this)||this;return t.levelLabel=null,t.levelLabel2=null,t.timeLabel=null,t.startPnl=null,t.novicePnl=null,t.mask=null,t.aniNode=[],t.lockAni=null,t.pulloutAni=null,t.ButtonNode=null,t.Btn=[],t.LvEditBox=null,t.steelImg=[],t.steelholeImg=[],t.steelholeCenterImg=[],t.destroyAni3=null,t.destoryNodeArr=[],t.putIn=null,t.putOut=null,t.isplayAni=0,t.nowLoadLv=1,t.checkTime=0,t.answerAni=!1,t.isloadSkin=!1,t.COMBO_count=0,t.COMBO_time=0,t.deltaTime=-1,t.gameNodePosition1=[2,17,23,41,43,53,80,83,117,122,126,153,154,155,156,173,161,191,194,196,198,262,330,351],t.gameNodePosition2=[16,31,45,48,49,51,55,64,65,76,82,84,85,86,95,97,98,101,102,106,108,111,113,120,123,130,138,140,143,151,152,160,171,189,193,195,200,207,214,215,217,222,243,250,255,270,292,293,297,305,308,318,323],t.gameNodePosition3=[145,176,212,213,272,287,280,300,312,315,317],t.testNode=null,t.topPnl=null,t.UIChangeBtn=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onEnable=function(){c.default.instance.BgColorInit(),c.default.instance.changeSetBtn(),this.setBtn(),this.checkTestMode()},t.prototype.startClock=function(){this.levelLabel.schedule(function(){a.default.isPause||a.default.gamingtime++},1)},t.prototype.playDestroyAni=function(){},t.prototype.init=function(){if(c.default.instance.BgColorInit(),this.node.getChildByName("dialogNode").destroyAllChildren(),console.log("\u5173\u5361\u6a21\u5f0f",a.default.GameMode,a.default.currLevel),r.reportLevel(a.default.currLevel,"startLevel",a.default.GameMode),r.reportPage(a.default.GameMode+"_startlevel",a.default.currLevel),this.changePosition(),a.default.GameMode==a.GAME_MODE_ENUM.NORMAL||a.default.GameMode==a.GAME_MODE_ENUM.CHALLENGE?a.default.currLevel%2==0||-1!=a.default.challengePool.indexOf(a.default.currLevel)?(this.mask.getChildByName("ani").getComponent(sp.Skeleton).animation="animation",this.mask.opacity=255,a.default.isGetAnswer||this.showAnswerVideoTips(!0)):this.mask.opacity=0:a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL?this.hideMask():a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW&&(a.default.currLevel%2==0?(this.mask.getChildByName("ani").getComponent(sp.Skeleton).animation="animation",this.mask.opacity=255):this.mask.opacity=0,this.node.getChildByName("gameNode").y=0),p.default.instance.revivePnl.active=!1,p.default.instance.setPnl.active=!1,a.default.isAddTime?a.default.gameTime=120:(a.default.gameTime=180,a.default.GameMode!=a.GAME_MODE_ENUM.NORMAL&&a.default.GameMode!=a.GAME_MODE_ENUM.CHALLENGE&&a.default.GameMode!=a.GAME_MODE_ENUM.UNSCREW||(this.mask.active=!0),a.default.isPause=!0),a.default.GameMode==a.GAME_MODE_ENUM.CHALLENGE)this.levelLabel.string="\u6311\u6218\u5173\u5361",this.levelLabel2.node.active=!1;else if(a.default.GameMode==a.GAME_MODE_ENUM.NORMAL)this.levelLabel2.node.active=!0,this.levelLabel.string="\u7b2c "+Math.ceil(a.default.currLevel/2)+" \u5173",a.default.currLevel%2==1?this.levelLabel2.string="\u5173\u5361 1/2":this.levelLabel2.string="\u5173\u5361 2/2";else if(a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL){console.log("--------------\u6765\u8fd9\u91cc\u5417",a.default.currLevel),this.levelLabel2.node.active=!1;var e=a.default.currLevel;a.default.currLevel>1e4&&(e-=1e4),this.levelLabel.string="\u7b2c "+e+" \u5173"}else if(a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW){var t=cc.sys.localStorage.getItem("currLvUnscrew");parseInt(t)>a.default.unscrewMaxLv?(this.levelLabel.string="\u6311\u6218\u5173\u5361",this.levelLabel2.node.active=!1):(this.levelLabel2.node.active=!0,this.levelLabel.string="\u7b2c "+Math.ceil(a.default.currLevel/2)+" \u5173",a.default.currLevel%2==1?this.levelLabel2.string="\u5173\u5361 1/2":this.levelLabel2.string="\u5173\u5361 2/2")}this.timeLabel.string=a.default.gameTime+"s",this.updateTime(),this.Btn[3].getComponent(cc.Animation).stop(),this.Btn[0].getComponent(cc.Animation).stop(),a.default.isPullOut=!1,this.checkTime=0,this.COMBO_count=0,this.COMBO_time=0,this.answerAni=!1},t.prototype.setBtn=function(){a.default.windowHeight/a.default.windowWidth<1.8&&(this.node.getChildByName("Btn").scale=.8),this.Btn.forEach(function(e){e.node.active=!1});var e=this.ButtonNode.getComponent(cc.Layout);a.default.GameMode==a.GAME_MODE_ENUM.NORMAL||a.default.GameMode==a.GAME_MODE_ENUM.CHALLENGE?(this.Btn[0].node.active=!0,this.Btn[1].node.active=!0,this.Btn[4].node.active=!0,e.spacingX=100):a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL?(this.Btn[1].node.active=!0,this.Btn[2].node.active=!0,this.Btn[4].node.active=!0,e.spacingX=100):a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW&&(this.Btn[2].node.active=!0,this.Btn[5].node.active=!0,e.spacingX=150)},t.prototype.changePosition=function(){a.default.GameMode==a.GAME_MODE_ENUM.NORMAL||a.default.GameMode==a.GAME_MODE_ENUM.CHALLENGE?(-1!=this.gameNodePosition1.indexOf(a.default.currLevel)?this.node.getChildByName("gameNode").y=0:-1!=this.gameNodePosition2.indexOf(a.default.currLevel)?this.node.getChildByName("gameNode").y=-50:-1!=this.gameNodePosition3.indexOf(a.default.currLevel)?this.node.getChildByName("gameNode").y=-100:this.node.getChildByName("gameNode").y=-70,201==a.default.currLevel?this.node.getChildByName("gameNode").x=-50:this.node.getChildByName("gameNode").x=0):a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL&&(9==a.default.currLevel?this.node.getChildByName("gameNode").y=150:10==a.default.currLevel?this.node.getChildByName("gameNode").y=50:this.node.getChildByName("gameNode").y=0)},t.prototype.showAnswerVideoTips=function(e){this.Btn[3].node.getChildByName("ad").active=e},t.prototype.showNovice=function(){this.novicePnl.active=!0},t.prototype.hideNovice=function(){this.novicePnl.active=!1,a.default.passedNovice=!0,cc.sys.localStorage.setItem("passedNovice",!0)},t.prototype.clickNextLevel=function(){if(a.default.currLevel==a.default.maxLv&&(a.default.GameMode=a.GAME_MODE_ENUM.CHALLENGE),a.default.GameMode==a.GAME_MODE_ENUM.CHALLENGE)this.getChallengeLv(),this.init(),a.default.gamelevel.reload();else if(a.default.GameMode==a.GAME_MODE_ENUM.NORMAL)this.hideNovice(),a.default.currLevel++,cc.sys.localStorage.setItem("currentLevel",a.default.currLevel),this.init(),a.default.gamelevel.reload();else{if(a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL){if(console.log("-------\u5f53\u524d\u5173\u5361",a.default.currLevel),a.default.currLevel>1e4){var e=a.default.graphicalTestLevel.indexOf(a.default.currLevel);return e<a.default.graphicalTestLevel.length&&e++,a.default.currLevel=a.default.graphicalTestLevel[e],void this.reloadGraphicalLevel()}if(a.default.currLevel+1>a.default.graphicalMaxLv)return;return a.default.currLevel++,void this.reloadGraphicalLevel()}if(a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW){if(a.default.currLevel++,a.default.currLevel>a.default.unscrewMaxLv){for(var t=Math.ceil(Math.random()*a.default.unscrewMaxLv);t==a.default.currLevel;)t=Math.ceil(Math.random()*a.default.unscrewMaxLv);a.default.currLevel=t}this.init(),f.default.instance.reset()}}a.default.isGetAnswer=!1},t.prototype.updateTime=function(){var e=this;this.stopTimeSchedule(),this.timeLabel.schedule(function(){if(a.default.gameTime<=1&&e.timeLabel.unscheduleAllCallbacks(),!a.default.isPause&&a.default.passedNovice&&(a.default.gameTime--,e.checkTime++),e.checkTime>=30&&0==e.answerAni&&(e.Btn[3].getComponent(cc.Animation).play(),a.default.isUnLock||e.Btn[0].getComponent(cc.Animation).play(),e.answerAni=!0),a.default.gameTime<0&&(a.default.gameTime=0),e.timeLabel.string=a.default.gameTime+"s",a.default.gameTime<=0){var t=a.default.gamelevel.screwOut;a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL&&(t=h.default.instance.screwOut),null!=t?(console.log("\u4e0d\u5f39\u51fa\u6e38\u620f\u5931\u8d25"),e.updateTime()):a.default.isAddTime?(console.log("\u6e38\u620f\u5931\u8d25\uff01"),e.showGameoverPnl(0)):(p.default.instance.showRevivePnl(!0),r.reportPage("revivePage",a.default.currLevel))}},1)},t.prototype.stopTimeSchedule=function(){this.timeLabel.unscheduleAllCallbacks()},t.prototype.checkSteel=function(){var e=this;if(this.checkTime=0,this.Btn[3].getComponent(cc.Animation).stop(),this.Btn[0].getComponent(cc.Animation).stop(),this.answerAni=!1,a.default.AchievementData.TotalRemoveSteel++,cc.sys.localStorage.setItem("TotalRemoveSteel",a.default.AchievementData.TotalRemoveSteel),this.COMBO_count++,this.COMBO_time=4/this.deltaTime,console.log("\u8fde\u51fb\u6b21\u6570",this.COMBO_count),a.default.vibrateOn&&(r.vibrateShort(),this.scheduleOnce(function(){r.vibrateShort()},.1)),d.default.instance.playFallSound(),a.default.TotalSteel<=0)if(this.playDestroyAni(),console.log("\u6e38\u620f\u80dc\u5229\uff01"),a.default.useItemNum=[0,0,0],a.default.isGetAnswer=!1,a.default.isAddTime=!1,r.reportPage(a.default.GameMode+"_passlevel",a.default.currLevel),a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL){if(r.reportLevel(a.default.currLevel,"passLevel",a.default.GameMode),cc.sys.localStorage.getItem("currLvGraphical")>a.default.graphicalMaxLv){for(var t=Math.ceil(Math.random()*a.default.graphicalMaxLv);t==a.default.currLevel;)t=Math.ceil(Math.random()*a.default.graphicalMaxLv);a.default.currLevel=t,console.log("-------\u5df2\u7ecf\u901a\u5173\u4e86\u62c6\u56fe\u6a21\u5f0f\uff0c\u968f\u673a\u8fdb\u5165\u5173\u5361",a.default.currLevel)}else a.default.currLevel++,cc.sys.localStorage.setItem("currLvGraphical",a.default.currLevel),console.log("---------",a.default.currLevel);this.scheduleOnce(function(){e.showGameoverPnl(1)},.5)}else a.default.GameMode==a.GAME_MODE_ENUM.CHALLENGE?(r.reportLevel(a.default.currLevel,"passLevel",a.default.GameMode),this.getChallengeLv(),r.reportPage("GamePage_ChallengeLevel",a.default.currLevel),this.scheduleOnce(function(){e.showGameoverPnl(1)},.5)):(this.setRank(),a.default.currLevel++,r.reportLevel(a.default.currLevel,"passLevel"),r.reportPage("GamePage_passlevel",a.default.currLevel),0==a.default.passedNovice&&this.hideNovice(),a.default.currLevel<=a.default.maxLv?(cc.sys.localStorage.setItem("currentLevel",a.default.currLevel),a.default.currLevel%2==0?this.scheduleOnce(function(){e.init(),a.default.gamelevel.reload()},.5):this.scheduleOnce(function(){e.showGameoverPnl(1)},.5)):(cc.sys.localStorage.setItem("currentLevel",a.default.maxLv),a.default.GameMode==a.GAME_MODE_ENUM.NORMAL&&(a.default.GameMode=a.GAME_MODE_ENUM.CHALLENGE,cc.sys.localStorage.setItem("currentLevel",a.default.currLevel),this.getChallengeLv(),this.scheduleOnce(function(){e.showGameoverPnl(1)},.5))));else this.playDestroyAni()},t.prototype.getChallengeLv=function(){for(var e=Math.floor(Math.random()*a.default.challengePool.length);a.default.lastChallengeLv[0]==e||a.default.lastChallengeLv[1]==e;)e=Math.floor(Math.random()*a.default.challengePool.length);console.log("LvIndex",e),a.default.currLevel=a.default.challengePool[e],a.default.lastChallengeLv[0]=a.default.lastChallengeLv[1],a.default.lastChallengeLv[1]=e,console.log("\u6311\u6218\u5173\u5361",a.default.currLevel)},t.prototype.showGameoverPnl=function(e){a.default.currLevel!=a.default.maxLv&&0!=e&&2!=e||this.levelLabel.unscheduleAllCallbacks(),-1!=a.default.AchievementData.achievementGoal.indexOf(a.default.passLevel)&&1==e&&d.default.instance.showAchievementPopup(),1!=p.default.instance.gameOverPnl.active&&(a.default.isPause=!0,p.default.instance.revivePnl.active=!1,p.default.instance.setPnl.active=!1,1==e||0==e?(i.default.instance.init(e),p.default.instance.showGameOverPnl(!0),d.default.instance.stopGroundMusic()):(a.default.gamingtime=0,a.default.isgameing=!1,this.node.active=!1,a.default.gamelevel.node.destroy(),a.default.gamelevel=null,this.startPnl.active=!0))},t.prototype.reset=function(){a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL?this.reloadGraphicalLevel():a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW?(f.default.instance.reset(),this.init()):(a.default.gamelevel.reload(),a.default.isAddTime=!1,this.init())},t.prototype.reloadGraphicalLevel=function(){var e=this;m.isShowNumberInit(),this.node.getChildByName("gameNode").children[0].destroy(),n.default.instance.loadImg.active=!0,u.default.resManager.loadBundleRes("graphicalMode","prefab/Lv0",cc.Prefab).catch(function(){console.error("\u52a0\u8f7d\u7279\u6b8a\u5173\u5361\u5931\u8d25!")}).then(function(t){e.init();var o=cc.instantiate(t);o.setParent(e.node.getChildByName("gameNode")),o.setPosition(0,0),console.log("------------newNode name",o.name),a.default.gamelevel=o.getComponent(h.default)})},t.prototype.hideMask=function(){this.mask.active=!1},t.prototype.playUnlockAni=function(){this.lockAni.active=!0,this.lockAni.getComponent(sp.Skeleton).animation="animation"},t.prototype.playPullOutAni=function(){this.pulloutAni.active=!0,this.pulloutAni.getComponent(sp.Skeleton).animation="animation"},t.prototype.setAniNodePosition=function(e,t){0==t?this.lockAni.setPosition(e):this.pulloutAni.setPosition(e)},t.prototype.playVibe=function(){a.default.vibrateOn&&(r.vibrateShort(),this.scheduleOnce(function(){r.vibrateShort()},.1))},t.prototype.changeDigBtn=function(){a.default.isUnLock?this.Btn[0].interactable=!1:this.Btn[0].interactable=!0},t.prototype.changePullOutBtn=function(){a.default.screwNum<=0||a.default.useItemNum[3]>=1?this.Btn[4].interactable=!1:this.Btn[4].interactable=!0},t.prototype.changeWithDrew=function(){var e=a.default.gamelevel.cloneNode;a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL&&(e=h.default.instance.cloneNode),null==e||a.default.useItemNum[1]>=3?this.Btn[1].interactable=!1:this.Btn[1].interactable=!0},t.prototype.changeReset=function(){a.default.useItemNum[2]>=3?this.Btn[2].interactable=!1:this.Btn[2].interactable=!0},t.prototype.changeLoadLv=function(){this.nowLoadLv=parseFloat(this.LvEditBox.string)},t.prototype.loadLv=function(){if(a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL){if(this.nowLoadLv>1e4){if(-1==a.default.graphicalTestLevel.indexOf(this.nowLoadLv))return;return a.default.currLevel=this.nowLoadLv,void this.reloadGraphicalLevel()}if(this.nowLoadLv>a.default.graphicalMaxLv)return;a.default.currLevel=this.nowLoadLv,this.reloadGraphicalLevel()}else if(a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW){if(a.default.currLevel=this.nowLoadLv,a.default.currLevel>a.default.unscrewMaxLv)return;this.init(),f.default.instance.reset()}else a.default.currLevel=this.nowLoadLv,this.init(),a.default.gamelevel.reload()},t.prototype.getRank=function(){r.getRank()},t.prototype.setRank=function(){this.getPassLevel(),a.default.passLevel>a.default.currLevel||(a.default.passLevel=a.default.currLevel,cc.sys.localStorage.setItem("passLevel",a.default.passLevel),r.setRank(a.default.passLevel),""!=a.default.openId&&l.seletPostUserData(["level","board_num"]))},t.prototype.getPassLevel=function(){var e=cc.sys.localStorage.getItem("passLevel");a.default.passLevel=null==e||null==e||""==e?0:parseInt(e)},t.prototype.loadSkin=function(e){var t=this;if(a.default.skinImgArr=[],e<=6)for(var o=function(o){u.default.resManager.loadBundleRes("levels","skin/"+e+"/"+o,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d","skin/"+e+"/"+o,"\u5931\u8d25!")}).then(function(e){a.default.skinImgArr[o-1]=e,7==o&&(t.isloadSkin=!0)})},n=1;n<=7;n++)o(n);else u.default.resManager.loadBundleRes("levels","skin/newSkin/"+e,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d","skin/newSkin/"+e,"\u5931\u8d25!")}).then(function(e){a.default.skinImgArr[0]=e,t.isloadSkin=!0})},t.prototype.changeUseItemMethod=function(e){if(console.log("----------11-------------\u66f4\u6539\u83b7\u53d6\u9053\u5177\u7684\u65b9\u5f0f",e),s.currentPlatform==s.platformEnum.wechat)if(console.log("----------22-------------\u66f4\u6539\u83b7\u53d6\u9053\u5177\u7684\u65b9\u5f0f",e),0==e){a.default.isShareUseProp=!1;for(var t=0;t<this.ButtonNode.children.length;t++)this.ButtonNode.children[t].getChildByName("share").active=!1;console.log("\u6539\u4e3a\u89c6\u9891\u83b7\u53d6\u9053\u5177")}else{for(a.default.isShareUseProp=!0,t=0;t<this.ButtonNode.children.length;t++)this.ButtonNode.children[t].getChildByName("share").active=!0;console.log("\u6539\u4e3a\u5206\u4eab\u83b7\u53d6\u9053\u5177")}},t.prototype.update=function(e){this.deltaTime<0&&(this.deltaTime=e),this.COMBO_time>0?this.COMBO_time--:this.COMBO_time<=0&&(this.COMBO_time=0,this.COMBO_count=0)},t.prototype.playPutIn=function(){a.default.soundOn&&cc.audioEngine.play(this.putIn,!1,1.5)},t.prototype.playPutOut=function(){a.default.soundOn&&cc.audioEngine.play(this.putOut,!1,1.5)},t.prototype.checkTestMode=function(){if(d.default.instance.getIsTestMode()){this.testNode.active=!0,this.UIChangeBtn.active=!0,this.timeLabel.node.parent.active=!0,this.levelLabel.node.active=!0,this.levelLabel2.node.active=!0,this.topPnl.getChildByName("coinboard").active=!0,this.topPnl.getChildByName("\u5207\u6362\u80cc\u666f").active=!0,this.topPnl.getChildByName("Pause").opacity=255,this.node.getChildByName("Btn").active=!0;var e=this.UIChangeBtn.parent.getChildByName("tip");cc.Tween.stopAllByTarget(e),e.opacity=0}else this.testNode.active=!1,this.UIChangeBtn.active=!1},t.prototype.rePlay=function(){a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL?this.reloadGraphicalLevel():a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW?(this.init(),f.default.instance.reset()):(this.init(),a.default.gamelevel.reload())},t.prototype.addTime30s=function(){a.default.gameTime+=30,this.timeLabel.string=a.default.gameTime+"s"},t.prototype.clickChangeUI=function(){var e=255==this.UIChangeBtn.opacity;d.isLiveMode||(this.timeLabel.node.parent.active=!e,this.levelLabel.node.active=!e,this.levelLabel2.node.active=!e,this.topPnl.getChildByName("coinboard").active=!e,this.topPnl.getChildByName("Pause").opacity=e?0:255,this.node.getChildByName("Btn").active=!e),this.UIChangeBtn.opacity=e?0:255,this.testNode.active=!e,this.topPnl.getChildByName("\u5207\u6362\u80cc\u666f").active=!e;var t=this.UIChangeBtn.parent.getChildByName("tip");cc.Tween.stopAllByTarget(t),t.opacity=0,e&&cc.tween(t).delay(.2).to(.2,{opacity:255}).delay(2).to(.5,{opacity:0}).start()},t.prototype.isShowScrewNumber=function(){if(0!=d.default.instance.getIsTestMode())switch(m.isShowNumberChange(),a.default.GameMode){case a.GAME_MODE_ENUM.NORMAL:console.log("\u4e3b\u7ebf\u6a21\u5f0f\u6539\u53d8\u7f16\u53f7\u663e\u793a");for(var e=0;e<a.default.gamelevel.Screws.children.length;e++)"screw"==(t=a.default.gamelevel.Screws.children[e]).name&&(t.getChildByName("screwNumber").active=m.isShowNumber);break;case a.GAME_MODE_ENUM.GARAPHICAL:for(e=0;e<a.default.gamelevel.Screws.children.length;e++){var t;"screw"==(t=a.default.gamelevel.Screws.children[e]).name&&(t.getChildByName("screwNumber").active=m.isShowNumber)}}},t.instance=null,__decorate([w(cc.Label)],t.prototype,"levelLabel",void 0),__decorate([w(cc.Label)],t.prototype,"levelLabel2",void 0),__decorate([w(cc.Label)],t.prototype,"timeLabel",void 0),__decorate([w(cc.Node)],t.prototype,"startPnl",void 0),__decorate([w(cc.Node)],t.prototype,"novicePnl",void 0),__decorate([w(cc.Node)],t.prototype,"mask",void 0),__decorate([w(cc.Node)],t.prototype,"aniNode",void 0),__decorate([w(cc.Node)],t.prototype,"lockAni",void 0),__decorate([w(cc.Node)],t.prototype,"pulloutAni",void 0),__decorate([w(cc.Node)],t.prototype,"ButtonNode",void 0),__decorate([w(cc.Button)],t.prototype,"Btn",void 0),__decorate([w(cc.EditBox)],t.prototype,"LvEditBox",void 0),__decorate([w(cc.SpriteFrame)],t.prototype,"steelImg",void 0),__decorate([w(cc.SpriteFrame)],t.prototype,"steelholeImg",void 0),__decorate([w(cc.SpriteFrame)],t.prototype,"steelholeCenterImg",void 0),__decorate([w(cc.Prefab)],t.prototype,"destroyAni3",void 0),__decorate([w({type:cc.AudioClip,tooltip:"\u63d2\u5165\u97f3\u6548"})],t.prototype,"putIn",void 0),__decorate([w({type:cc.AudioClip,tooltip:"\u62d4\u8d77\u97f3\u6548"})],t.prototype,"putOut",void 0),__decorate([w({type:cc.Node,tooltip:"\u6d4b\u8bd5\u6309\u94ae\u8282\u70b9"})],t.prototype,"testNode",void 0),__decorate([w({type:cc.Node,tooltip:"\u9876\u90e8\u8282\u70b9"})],t.prototype,"topPnl",void 0),__decorate([w({type:cc.Node,tooltip:"UI\u663e\u9690\u6309\u94ae"})],t.prototype,"UIChangeBtn",void 0),o=__decorate([v],t)}(cc.Component);o.default=y,cc._RF.pop()},{BattleManager:"BattleManager",Game:"Game",GraphicalGameLevel:"GraphicalGameLevel",PostUserData:"PostUserData",ScrewNumberManager:"ScrewNumberManager",UIManager:"UIManager",commonData:"commonData",config:"config",gameOverView:"gameOverView",platform:"platform",startView:"startView",topView:"topView",unscrew:"unscrew"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"972c5OjI6NCLpou37yQIGME","Game"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("config"),n=e("platform"),i=e("SceneManager"),c=e("ResourcesManager"),r=e("localStorage"),s=e("commonData"),l=cc._decorator,u=l.ccclass,d=(l.property,function(){function e(){}var t;return t=e,e.loadModeBundle=function(e,o,a){null==t.bundleMap[o]?cc.assetManager.loadBundle(e,function(e,n){if(e)return console.error(e);t.bundleMap[o]=n,a&&a()}):(console.log("\u5df2\u7ecf\u5b58\u5728\u8d44\u6e90  "+o),a&&a())},e.loadLvBundle=function(e,o){null==t.bundleMap[e]?cc.assetManager.loadBundle(e,function(a,n){if(a)return console.log("\u4e91\u5173\u5361\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25  "+e),console.error(a);console.log("\u4e91\u5173\u5361\u8d44\u6e90\u52a0\u8f7d\u6210\u529f  "+e),t.bundleMap[e]=n,o&&o()}):(console.log("\u5df2\u7ecf\u5b58\u5728\u8d44\u6e90  "+e),o&&o())},e.loadBundleRes=function(e,o,a){var n=this;return new Promise(function(i,c){var r=t.bundleMap[e];if(r||i(new Promise(function(n,i){cc.assetManager.loadBundle(e,function(c,r){c?i(null):(t.bundleMap[e]=r,n(t.resManager.loadBundleRes(e,o,a)))})})),n.bundleMapRes[e]){if(n.bundleMapRes[e][o])return i(n.bundleMapRes[e][o]),n.bundleMapRes[e][o]}else n.bundleMapRes[e]={};r.load(o,a,function(t,a){t?(console.log("[\u52a0\u8f7d\u5931\u8d25] "+o,t),c(null)):(n.bundleMapRes[e][o]=a,i(a))})})},e.config=a,e.apiPlatform=n,e.storage=r.default,e.sceneManager=i.default,e.resManager=c.default,e.com=s,e.isCreateLv=!1,e.gameView=null,e.bundleMap={texture:null,levels:null},e.bundleUrl={texture:"texture",levels:"levels"},e.bundleMapRes={},t=__decorate([u],e)}());o.default=d,cc._RF.pop()},{ResourcesManager:"ResourcesManager",SceneManager:"SceneManager",commonData:"commonData",config:"config",localStorage:"localStorage",platform:"platform"}],GraphicalCreateLevel:[function(e,t,o){"use strict";cc._RF.push(t,"630c9wr0StGz4s9m1OLUS3H","GraphicalCreateLevel"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,c=e("commonData"),r=e("GameManager"),s=e("Steel"),l=e("Game"),u=e("GraphicalGameLevel"),d=e("startView"),h=e("ScrewNumberManager"),p=function(e){function t(){var t=e.call(this)||this;return t.screwPre=null,t.screwOutPre=null,t.holePre=null,t.currentLevelconfig=null,t.bg=null,t.Holes=null,t.Steels=null,t.Screws=null,t.tempLevel=-1,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.init()},t.prototype.init=function(){h.isShowNumberInit(),this.bg=this.node.getChildByName("bg"),this.Holes=this.bg.getChildByName("holenode"),this.Steels=this.bg.getChildByName("steelnode"),this.Screws=this.bg.getChildByName("screwnode"),this.readData()},t.prototype.readData=function(){var e,t,o,a=this;if(this.currentLevelconfig=c.default.graphicalLevelConfig[c.default.currLevel],console.log("----------\u5173\u5361\u914d\u7f6e",this.currentLevelconfig,this.currentLevelconfig.children.length),console.log("---------\u52a0\u8f7d\u80cc\u666f"),""!=this.currentLevelconfig.bgSpriteFrame){var n=this.currentLevelconfig.bgSpriteFrame;this.loadTexture(n,this.bg);for(var i=0;i<this.currentLevelconfig.children.length;i++)"holenode"==(r=this.currentLevelconfig.children[i]).name?e=r.children:"steelnode"==r.name?t=r.children:"screwnode"==r.name&&(o=r.children)}else for(i=0;i<this.currentLevelconfig.children.length;i++){var r;if("holenode"==(r=this.currentLevelconfig.children[i]).name)e=r.children;else if("steelnode"==r.name)t=r.children;else if("screwnode"==r.name)o=r.children;else{var l=new cc.Node(r.name);l.addComponent(cc.Sprite),l.setPosition(r.position.x,r.position.y),l.setParent(this.bg.getChildByName("bgnode")),this.loadTexture(r.name,l),this.bg.width=700,this.bg.height=1100}}for(console.log("---------\u52a0\u8f7d\u6d1e"),i=0;i<e.length;i++){var u=e[i],d=cc.instantiate(this.holePre);d.setPosition(u.position.x,u.position.y),d.setParent(this.Holes)}for(console.log("---------\u52a0\u8f7d\u94a2\u6761"),i=0;i<t.length;i++){var h=t[i],p=new cc.Node("steel");p.group=h.group,p.addComponent(cc.Sprite),p.addComponent(s.default),this.loadTexture(h.spriteFrame,p);var f=p.addComponent(cc.RigidBody),m=p.addComponent(cc.PhysicsPolygonCollider);m.density=1e3,f.gravityScale=0;for(var g=0;g<h.points.length;g++)m.points[g]=cc.v2(h.points[g].x,h.points[g].y);for(p.setPosition(h.position.x,h.position.y),p.setParent(this.Steels),g=0;g<h.children.length;g++){var v=h.children[g],w=new cc.Node("holeTarget");w.setPosition(v.position.x,v.position.y),w.setParent(p)}}for(i=0;i<o.length;i++){var y=o[i],S=new cc.Node("ignore");S.setPosition(y.position.x,y.position.y),S.setParent(this.Screws)}this.scheduleOnce(function(){a.createLevel()},1)},t.prototype.loadTexture=function(e,t){l.default.resManager.loadBundleRes("graphicalMode-"+Math.floor(c.default.currLevel/10),"lv"+c.default.currLevel+"/"+e,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d"+e+"\u5931\u8d25!")}).then(function(e){t.getComponent(cc.Sprite).spriteFrame=e})},t.prototype.createLevel=function(){c.default.TotalSteel=this.Steels.children.length,c.default.LevelSteel=this.Steels.children.length;for(var e=0;e<this.Steels.children.length;e++){var t=this.Steels.children[e];t.getComponent(cc.RigidBody).gravityScale=0;for(var o=0;o<t.children.length;o++){var a=t.children[o];a.width=30,a.height=30;var n=a.convertToWorldSpaceAR(cc.v2(0,0)),i=(this.Steels.convertToNodeSpaceAR(n),t.addComponent(cc.RevoluteJoint));i.anchor.x=a.x,i.anchor.y=a.y;var s=this.findScrew(n);if(null==s){var l=this.Screws.convertToNodeSpaceAR(n),p=this.Holes.convertToNodeSpaceAR(n);(g=cc.instantiate(this.screwPre)).setPosition(l),g.setParent(this.Screws),s=g;var f=cc.instantiate(this.holePre);f.setPosition(p),f.setParent(this.Holes)}else if("ignore"==s.name)continue;i.connectedBody=s.getComponent(cc.RigidBody)}}c.default.screwNum=this.Screws.children.length,console.log("---------\u87ba\u4e1d\u6570\u91cf",c.default.screwNum);var m=0;for(r.default.instance.changePullOutBtn(),e=0;e<this.Screws.children.length;e++){var g;"ignore"!=(g=this.Screws.children[e]).name&&(m++,h.screwNumberRecord(g,m.toString())),"ignore"==g.name&&g.destroy()}c.default.gamelevel=this.node.getComponent(u.default),this.node.getComponent(u.default).enabled=!0,d.default.instance.loadImg.active=!1,r.default.instance.changePullOutBtn()},t.prototype.findScrew=function(e){for(var t=null,o=this.Screws.convertToNodeSpaceAR(e),a=0;a<this.Screws.children.length;a++){var n=this.Screws.children[a];n.getBoundingBox().contains(o)&&(t=n)}return t},t.instance=null,__decorate([i(cc.Prefab)],t.prototype,"screwPre",void 0),__decorate([i(cc.Prefab)],t.prototype,"screwOutPre",void 0),__decorate([i(cc.Prefab)],t.prototype,"holePre",void 0),o=__decorate([n],t)}(cc.Component);o.default=p,cc._RF.pop()},{Game:"Game",GameManager:"GameManager",GraphicalGameLevel:"GraphicalGameLevel",ScrewNumberManager:"ScrewNumberManager",Steel:"Steel",commonData:"commonData",startView:"startView"}],GraphicalGameLevel:[function(e,t,o){"use strict";var a;cc._RF.push(t,"aeecbgaQ+NORI6b4Njh5NqU","GraphicalGameLevel"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_SCREW_STATUS=void 0;var n,i=cc._decorator,c=i.ccclass,r=i.property,s=e("GraphicalCreateLevel"),l=e("commonData"),u=e("GameManager"),d=e("noviceView"),h=e("topView"),p=e("ScrewNumberManager");(n=a=o.ENUM_SCREW_STATUS||(o.ENUM_SCREW_STATUS={})).IDLE="idle",n.ACTIVE="active",n.MOVING="moving",n.Ani="ani";var f=function(e){function t(){var t=e.call(this)||this;return t.screwPre=null,t.screwOutPre=null,t.bg=null,t.Holes=null,t.Steels=null,t.Screws=null,t.currentScrew=null,t.screwOut=null,t.screwTop=null,t.screwStatus=a.IDLE,t.cloneNode=null,t.cloneNode1=null,t.cloneNode2=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onEnable=function(){this.init()},t.prototype.init=function(){this.bg=this.node.getChildByName("bg"),this.Holes=this.bg.getChildByName("holenode"),this.Steels=this.bg.getChildByName("steelnode"),this.Screws=this.bg.getChildByName("screwnode"),l.default.useItemNum=[0,0,0,0],l.default.isPause=!1,l.default.isGetAnswer=!1,console.log("----------------gamelevel init",l.default.useItemNum[3]),this.initData(),l.default.gamelevel=this.node.getComponent(o),h.default.instance.changeSetBtn()},t.prototype.reload=function(){l.default.useItemNum[0]=0,l.default.useItemNum[1]=0,l.default.useItemNum[3]=0,console.log("----------------gamelevel reload"),this.initData()},t.prototype.initData=function(){this.screwStatus=a.IDLE,l.default.isgameing=!0,l.default.isAddTime=!1,l.default.isUnLock=!0,this.cloneNode=null,this.cloneNode1=null,this.cloneNode2=null,this.screwOut=null,this.currentScrew=null,this.screwTop=null,u.default.instance.changeWithDrew(),u.default.instance.changeDigBtn(),u.default.instance.changeReset(),this.bg.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onTouchStart=function(e){var t=this;if(this.screwStatus!=a.MOVING&&this.screwStatus!=a.Ani){var o=e.getLocation();if(l.default.isPullOut){var n;if(n=this.findScrew(o))console.log("\u627e\u5230\u87ba\u4e1d",n.name),u.default.instance.setAniNodePosition(n.position,1),this.currentScrew!=n&&(this.setScrewActive(this.currentScrew,!1),this.setScrewActive(n,!0));else{if(null==this.screwOut)return;if(u.default.instance.setAniNodePosition(cc.v2(this.currentScrew.position),1),null==this.findScrew2(o))return}try{s.default.instance.node.getChildByName("bg").getChildByName("mask").active=!1,s.default.instance.node.getChildByName("pulloutTip").active=!1}catch(e){}return this.currentScrew.destroy(),l.default.isPullOut=!1,this.screwStatus=a.Ani,l.default.screwNum--,this.scheduleOnce(function(){cc.tween(t.screwOut).to(.2,{scaleX:1.4,scaleY:1.4}).call(function(){u.default.instance.playPullOutAni()}).to(.2,{scaleX:1.5,scaleY:1.5,opacity:0}).call(function(){t.screwOut.destroy(),t.screwOut=null,t.currentScrew=null,t.screwStatus=a.IDLE,t.setSpeed()}).start()},.25),void u.default.instance.changePullOutBtn()}if(this.currentScrew)if(n=this.findScrew(o))n==this.currentScrew?this.setScrewActive(this.currentScrew,!1):(this.setScrewActive(this.currentScrew,!1),this.setScrewActive(n,!0));else{var i=this.findHole(o);if(i){console.log("\u628a\u87ba\u4e1d\u632a\u5230\u8fd9\u91cc");for(var c=i.convertToWorldSpaceAR(cc.v2(0,0)),r=i.getComponent(cc.CircleCollider).radius,d=i.getBoundingBox(),h=!1,p=!1,f=[],m=0;m<this.Steels.children.length;m++){var g=this.Steels.children[m];g.getComponent(cc.RigidBody).syncPosition(!0);var v=g.convertToNodeSpaceAR(c),w=(cc.v2(g.x,g.y),g.convertToWorldSpaceAR(cc.v2(0,0))),y=!1;if(g.name="steel"){var S=g.getComponent(cc.PhysicsPolygonCollider).points;y=cc.Intersection.polygonCircle(S,{position:v,radius:r})}else if(g.name="steel_circle"){var P=g.getComponent(cc.PhysicsCircleCollider).radius;y=cc.Intersection.circleCircle({position:w,radius:P},{position:c,radius:r})}if(y){h=!0,console.log("=====\u6d1e\u548c\u94a2\u6761\u76f8\u4ea4");for(var _=0;_<g.children.length;_++){var A=g.children[_],b=A.convertToWorldSpaceAR(cc.v2(0,0)),k=this.Holes.convertToNodeSpaceAR(b),N=A.getBoundingBox();if(N.x=k.x,N.y=k.y,N.intersects(d)){console.log("=====\u6d1e\u548c\u5e26\u5b54\u7684\u94a2\u6761\u76f8\u4ea4");var C=this.getDistance(c,b);if(console.log("\u4e24\u70b9\u95f4\u7684\u8ddd\u79bb",C,50),C>50)continue;if(!(C<=8)){p=!0;break}f.push(A)}}}}if(p&&(f=[]),0!=i.children.length&&(h=!0,f=[],console.log("\u8fd9\u4e2a\u6d1e\u88ab\u9501\u4f4f\u4e86")),h&&f.length<=0)return console.log("\u5b54\u88ab\u906e\u6321\u4e86"),this.screwStatus=a.Ani,void this.playAni();this.screwStatus=a.MOVING,this.saveLevelData();var M=cc.moveTo(.5,cc.v2(i.x,i.y+30));cc.tween(this.screwOut).then(M).call(function(){f.length?t.setScrew(i,f):t.setScrew(i)}).start()}else this.setScrewActive(this.currentScrew,!1)}else(n=this.findScrew(o))&&this.setScrewActive(n,!0)}else console.log("--------------return--------------",this.screwStatus)},t.prototype.onDestroy=function(){this.bg.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.onTouchEnd=function(){this.bg.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},t.prototype.findScrew=function(e){for(var t=null,o=0;o<this.Screws.children.length;o++){var a=this.Screws.children[o],n=a.getBoundingBox(),i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){if("screwOut"!=(t=a).name)break;t=null}}return t},t.prototype.findScrew2=function(e){for(var t=null,o=0;o<this.Screws.children.length;o++){var a=this.Screws.children[o],n=a.getBoundingBox(),i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){if("screwOut"==(t=a).name)break;t=null;break}}return t},t.prototype.playAni=function(){var e=this,t=this.screwOut.getPosition();cc.tween(this.screwOut).to(.1,{position:new cc.Vec3(t.x+5,t.y,0)},{easing:"quadInOut"}).to(.1,{position:new cc.Vec3(t.x-5,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x+8,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x-8,t.y,0)},{easing:"quadInOut"}).to(.02,{position:new cc.Vec3(t.x,t.y,0)},{easing:"quadInOut"}).call(function(){e.screwStatus=a.IDLE}).start()},t.prototype.findHole=function(e){for(var t=null,o=0;o<this.Holes.children.length;o++){var a=this.Holes.children[o],n=a.getBoundingBox(),i=a.parent.convertToNodeSpaceAR(e);if(n.contains(i)){t=a;break}}if(t){console.log("targetHole",t.name);var c=t.getBoundingBox();for(o=0;o<this.Screws.children.length;o++){var r=this.Screws.children[o];if("screw"==r.name){var s=r.getBoundingBox();if(cc.Intersection.circleCircle({position:cc.v2(r.position),radius:25},{position:cc.v2(t.position),radius:18})){console.log("-----isRect",c,s),t=null;break}}}}return t},t.prototype.setScrewActive=function(e,t){var o=this;if(void 0===t&&(t=!0),e&&"screwOut"!=e.name)if(t?u.default.instance.playPutOut():u.default.instance.playPutIn(),1==l.default.currLevel&&0==l.default.passedNovice&&d.default.instance.nextStep(),t){this.screwStatus=a.ACTIVE;var n=cc.v2(e.x,e.y);e.opacity=0,this.currentScrew=e,p.recordCurScrewNumber(this.currentScrew),this.screwOut=cc.instantiate(this.screwOutPre),this.screwOut.parent=e.parent,this.screwOut.name="screwOut",this.screwOut.setPosition(n),this.screwOut.opacity=255,this.screwTop=this.screwOut.getChildByName("top");var i=15,c=cc.moveBy(.2,0,30),r=cc.moveBy(.2,0,i);cc.tween(this.screwOut).then(c).start(),cc.tween(this.screwTop).then(r).start()}else{i=15,c=cc.moveBy(.2,0,-30),r=cc.moveBy(.2,0,-i);var s=this.screwOut,h=this.screwTop,f=e;this.currentScrew=null,this.screwOut=null,this.screwTop=null,cc.tween(s).then(c).start(),cc.tween(h).then(r).call(function(){s.destroy(),f==o.currentScrew&&null!=o.screwOut||(e.opacity=255),o.screwStatus=a.IDLE}).start()}},t.prototype.setScrew=function(e,t){var o=this;u.default.instance.playPutIn(),1==l.default.currLevel&&0==l.default.passedNovice&&2==d.default.instance.progress&&d.default.instance.nextStep();var n=cc.moveBy(.2,0,-30),i=cc.moveBy(.2,0,-15);cc.tween(this.screwOut).then(n).start(),cc.tween(this.screwTop).then(i).call(function(){o.currentScrew&&o.currentScrew.destroy(),o.currentScrew=null,o.screwOut.destroy(),o.screwOut=null,o.screwTop=null;var n=cc.instantiate(o.screwPre);if(p.screwNumberRecord(n,p.curScrewNumber),n.setPosition(e.position),n.setParent(o.Screws),o.screwStatus=a.IDLE,t){n.group="default",n.getComponent(cc.PhysicsCircleCollider).apply();for(var i=function(e){for(var a=t[e],i=a.convertToWorldSpaceAR(cc.v2(0,0)),c=a.parent,r=c.convertToNodeSpaceAR(i),s=c.getComponents(cc.RevoluteJoint),l=null,u=null,d=0;d<s.length;d++){var h=s[d];if(o.getDistance(h.anchor,r)<=20){l=h,u=h.anchor,console.log("\u627e\u5230\u5173\u8282",e,d);break}}l&&(l.destroy(),o.scheduleOnce(function(){n.group="screw",n.getComponent(cc.PhysicsCircleCollider).apply();var e=c.addComponent(cc.RevoluteJoint);e.anchor.x=u.x,e.anchor.y=u.y,e.connectedBody=n.getComponent(cc.RigidBody)}))},c=0;c<t.length;c++)i(c)}o.setSpeed(),o.screwStatus=a.IDLE}).start()},t.prototype.setSpeed=function(){for(var e,t,o=function(o){for(var n=a.Steels.children[o],i=n.getComponent(cc.RigidBody),c=n.getComponents(cc.RevoluteJoint),r=0,s=!1,l=0;l<c.length;l++)(null===(t=null===(e=c[l].connectedBody)||void 0===e?void 0:e.node)||void 0===t?void 0:t.active)?r+=1:s=!0;s?(i.gravityScale=2,1==r&&a.scheduleOnce(function(){i.angularVelocity<2&&(i.angularVelocity=5)}),0==r&&a.scheduleOnce(function(){i.linearVelocity.x<15&&(i.linearDamping=.2,i.linearVelocity=cc.v2(50,0))})):i.gravityScale=.1},a=this,n=0;n<this.Steels.children.length;n++)o(n)},t.prototype.getDistance=function(e,t){var o=cc.v2(e.x-t.x,e.y-t.y);return Math.sqrt(o.x*o.x+o.y*o.y)},t.prototype.getRectPos=function(e,t,o,a){var n=[];return n.push(new cc.Vec2(e.x+o*Math.cos(t)/2-a*Math.sin(t)/2,e.y+o*Math.sin(t)/2+a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x-o*Math.cos(t)/2-a*Math.sin(t)/2,e.y-o*Math.sin(t)/2+a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x-o*Math.cos(t)/2+a*Math.sin(t)/2,e.y-o*Math.sin(t)/2-a*Math.cos(t)/2)),n.push(new cc.Vec2(e.x+o*Math.cos(t)/2+a*Math.sin(t)/2,e.y+o*Math.sin(t)/2-a*Math.cos(t)/2)),n},t.prototype.getRotatePos=function(e,t,o){for(var a=[],n=0;n<e.length;n++){var i=e[n].x-t.x,c=e[n].y-t.y,r=i*Math.cos(o)-c*Math.sin(o),s=i*Math.sin(o)+c*Math.cos(o);a.push(cc.v2(r+t.x,s+t.y))}return a},t.prototype.saveLevelData=function(){console.log("\u8bb0\u5f55\u5173\u5361\u914d\u7f6e"),this.cloneNode2=this.cloneNode1,this.cloneNode1=this.cloneNode,this.cloneNode=cc.instantiate(this.bg),u.default.instance.changeWithDrew()},t.prototype.withDrew=function(){if(null!=this.cloneNode){this.bg.removeFromParent(),this.bg.destroy(),this.cloneNode.setParent(this.node),this.cloneNode.setPosition(0,0),this.bg=this.cloneNode,this.cloneNode=this.cloneNode1,this.cloneNode1=this.cloneNode2,this.cloneNode2=null,this.Holes=this.bg.getChildByName("holenode"),this.Steels=this.bg.getChildByName("steelnode"),this.Screws=this.bg.getChildByName("screwnode"),this.screwOut=this.Screws.getChildByName("screwOut"),this.screwOut&&this.screwOut.destroy();for(var e=0;e<this.Screws.children.length;e++)0==this.Screws.children[e].opacity&&(this.Screws.children[e].opacity=255);if(l.default.isUnLock)for(e=0;e<this.Holes.children.length;e++)this.Holes.children[e].children.length>0&&this.Holes.children[e].children[0].destroy();this.screwOut=null,this.screwTop=null,this.currentScrew=null,this.bg.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),l.default.screwNum=this.Screws.children.length,l.default.TotalSteel=this.Steels.children.length,console.log("\u64a4\u56de",l.default.useItemNum[1]),u.default.instance.changeWithDrew(),u.default.instance.changePullOutBtn()}else console.log("\u65e0\u6cd5\u64a4\u56de")},t.instance=null,__decorate([r(cc.Prefab)],t.prototype,"screwPre",void 0),__decorate([r(cc.Prefab)],t.prototype,"screwOutPre",void 0),o=__decorate([c],t)}(cc.Component);o.default=f,cc._RF.pop()},{GameManager:"GameManager",GraphicalCreateLevel:"GraphicalCreateLevel",ScrewNumberManager:"ScrewNumberManager",commonData:"commonData",noviceView:"noviceView",topView:"topView"}],Hole:[function(e,t,o){"use strict";cc._RF.push(t,"26c1f4padZFv4NZ9sj+hJ86","Hole"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),__decorate([n],t)}(cc.Component));o.default=i,cc._RF.pop()},{}],Level:[function(e,t,o){"use strict";cc._RF.push(t,"10fe15oyqJEa6zX8OG6++GH","Level"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=cc._decorator,i=n.ccclass,c=(n.property,e("startView")),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.clickLvBtn=function(){a.default.GameMode==a.GAME_MODE_ENUM.CHALLENGE&&(a.default.GameMode=a.GAME_MODE_ENUM.NORMAL);var e=parseInt(this.node.name);c.default.instance.loadLv(e)},__decorate([i],t)}(cc.Component);o.default=r,cc._RF.pop()},{commonData:"commonData",startView:"startView"}],Load:[function(e,t,o){"use strict";cc._RF.push(t,"9d0d0BOWeZDPbReFdgYR3aG","Load"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("platform"),i=e("config"),c=e("Game"),r=e("BattleManager"),s=e("PostUserData"),l=cc._decorator,u=l.ccclass,d=l.property,h=!1,p=function(e){function t(){var t=e.call(this)||this;return t.progressBar=null,t.mask=null,t.isloadUserData=!1,t.loadSubCount=0,t.preLoadScene=!1,t.startLoad=!1,t.subPackageName=["loadingUI","texture","levels","audio","font","view","levelBundle","sceneBundle"],t.gameBundle=null,t.GameScene=null,t.hasServerLevelData=!1,t.serverLevelData=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){},t.prototype.start=function(){console.log=function(){},console.warn=function(){},this.start0(),n.init()},t.prototype.start0=function(){var e=this,t=cc.find("Canvas").getComponent(cc.Canvas),o=cc.view.getVisibleSize().height,c=cc.view.getVisibleSize().width;a.default.windowHeight=o,a.default.windowWidth=c,console.log("--------lante-------",a.default.windowHeight,a.default.windowWidth),o/c<1.8?(t.fitHeight=!0,t.fitWidth=!1):(t.fitHeight=!1,t.fitWidth=!0),window.tt&&i.currentPlatform==i.platformEnum.toutiao?(this.node.getChildByName("titlett").active=!0,this.node.getChildByName("titlewx").active=!1):i.currentPlatform==i.platformEnum.wechat?(this.node.getChildByName("titlett").active=!1,this.node.getChildByName("titlewx").active=!0):i.currentPlatform==i.platformEnum.web&&(this.node.getChildByName("titlett").active=!0,this.node.getChildByName("titlewx").active=!1),this.scheduleOnce(function(){e.loadSubCount=0,e.mask.width=0,e.preLoadScene=!1,e.startLoad=!0,n.reportPage("loadPage",0),e.loadSubPackages()},.1)},t.prototype.loadSubPackages=function(){var e=this;console.log("---------------\x3e>loadSubPackage begin");for(var t=function(t){c.default.loadModeBundle(o.subPackageName[t],o.subPackageName[t],function(){console.log("\u5206\u5305\u52a0\u8f7d\u6210\u529f",e.subPackageName[t]),e.loadSubCount++,e.loadSubCount==e.subPackageName.length&&(console.log("---------------\x3e>loadSubPackage end"),e.loadData())})},o=this,a=0;a<this.subPackageName.length;a++)t(a)},t.prototype.loadData=function(){var e=this,t=[];if(console.log("---------------\x3e>loadData begin"),window.tt&&i.currentPlatform==i.platformEnum.toutiao){var o=tt.getLaunchOptionsSync();console.log("\u5c0f\u6e38\u620f\u542f\u52a8\u53c2\u6570",o),"021036"==o.scene&&(console.log("\u4ece\u4fa7\u8fb9\u680f\u8fdb\u5165\u6e38\u620f"),a.default.formSidebarCard=!0),o.scene&&(tt.reportAnalytics("scene",{scene:o.scene}),a.default.sceneId=o.scene)}t.push(),t.push(this.loadUIPrefab()),t.push(this.loadBundleScene()),t.push(this.loadSkinPieceImg()),t.push(this.loadLevel()),Promise.all(t).then(function(){e.loadGameScene("Game")}),this.loadSetting(),this.checkData(),this.loadAchievementData(),this.loadRecordData(),""!=a.default.openId?s.getUserInformation():this.loadLocalData(),(new Date).getTime()},t.prototype.loadLocalData=function(){console.log("---------\u52a0\u8f7d\u672c\u5730\u6570\u636e"),this.loadGameData(),this.loadSkinData(),this.loadScrewSkinData(),this.isloadUserData=!0,s.postAllUserData()},t.prototype.update=function(){this.startLoad&&(this.mask.width<.36*480?this.mask.width+=.96:this.mask.width<.78*480&&0==this.preLoadScene?this.mask.width+=.096:this.mask.width<480&&this.loadSubCount==this.subPackageName.length&&1==this.preLoadScene&&1==this.isloadUserData?this.mask.width+=3.84:0==h&&this.mask.width>=480&&(null!=this.serverLevelData&&1==this.serverLevelData.data.display&&1==this.serverLevelData.data.list.maxOpen.display&&(a.default.graphicalMaxLv=this.serverLevelData.data.list.maxOpen.level.trim(),console.log("===>\u83b7\u5f97\u670d\u52a1\u5668\u6700\u5927\u56fe\u5f62\u5173\u5361\u6570",a.default.graphicalMaxLv)),h=!0,cc.director.runScene(this.GameScene)))},t.prototype.loadBundleScene=function(){var e=this;return new Promise(function(t){e.loadGameBundle("sceneBundle").catch(function(){t(null)}).then(function(){t(null)})})},t.prototype.loadUIPrefab=function(){return new Promise(function(e){c.default.resManager.loadBundleRes("view","setPnl",cc.Prefab).catch(function(){console.error("\u52a0\u8f7dsetPnl\u5931\u8d25")}).then(function(){e(null)}),c.default.resManager.loadBundleRes("levels","level0",cc.Prefab).catch(function(){console.error("\u52a0\u8f7dlevel0\u5931\u8d25!")})})},t.prototype.loadLevel=function(){return new Promise(function(e){var t=[];cc.assetManager.loadBundle("levelBundle",function(o,n){if(o)return console.log("\u5173\u5361\u4fe1\u606f\u8bfb\u53d6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),void e(null);console.log("levelBundle success"),t.push(new Promise(function(e){n.load("level",cc.JsonAsset,function(t,o){if(t)return console.log("[\u52a0\u8f7d\u5931\u8d25] level",t),void e(null);a.default.maxLv=Object.keys(o.json.level).length,a.default.levelConfig=o.json.level,console.log("\u5173\u5361\u4fe1\u606f\u52a0\u8f7d\u6210\u529f",a.default.maxLv),e(null)})})),t.push(new Promise(function(e){n.load("compLevel",cc.JsonAsset,function(t,o){if(t)return console.log("\u7ade\u8d5b\u5173\u5361\u4fe1\u606f\u8bfb\u53d6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),void e(null);a.default.CompLevelConfig=o.json.level,console.log("\u7ade\u8d5b\u5173\u5361\u4fe1\u606f\u52a0\u8f7d\u6210\u529f"),e(null)})})),t.push(new Promise(function(e){n.load("graphicalLevel",cc.JsonAsset,function(t,o){if(t)return console.log("\u56fe\u5f62\u5173\u5361\u4fe1\u606f\u8bfb\u53d6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),void e(null);var n=Object.keys(o.json.level);a.default.graphicalMaxLv=n.filter(function(e){return Number(e)<1e4}).length,n.filter(function(e){return Number(e)>1e4}).forEach(function(e){a.default.graphicalTestLevel.push(parseInt(e))}),console.log("-----",a.default.graphicalTestLevel),a.default.graphicalLevelConfig=o.json.level,console.log("\u56fe\u5f62\u5173\u5361\u4fe1\u606f\u52a0\u8f7d\u6210\u529f",a.default.graphicalMaxLv),e(null)})})),t.push(new Promise(function(e){n.load("unscrewLevel",cc.JsonAsset,function(t,o){if(t)return console.log("\u89e3\u5f00\u87ba\u4e1d\u5173\u5361\u4fe1\u606f\u8bfb\u53d6\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),void e(null);a.default.unscrewMaxLv=Object.keys(o.json.level).length,a.default.unscrewLevelConfig=o.json.level,e(null)})}))}),Promise.all(t).then(function(){e(null)})})},t.prototype.loadSetting=function(){var e=cc.sys.localStorage.getItem("music"),t=cc.sys.localStorage.getItem("sound"),o=cc.sys.localStorage.getItem("vibe");this.checkIfExist("music")?(a.default.soundOn="true"==t,a.default.musicOn="true"==e,a.default.vibrateOn="true"==o):(cc.sys.localStorage.setItem("music","true"),cc.sys.localStorage.setItem("sound","true"),cc.sys.localStorage.setItem("vibe","false"),a.default.soundOn=!0,a.default.musicOn=!0,a.default.vibrateOn=!1),this.checkIfExist("openid")&&(a.default.openId=this.checkIfExist("openid")),1!=this.checkIfExist("getTTUserInfo")&&"true"!=this.checkIfExist("getTTUserInfo")||(a.default.getTTUserInfo=!0,a.default.UserAvatarUrl=cc.sys.localStorage.getItem("UserAvatar"),a.default.UserNickName=cc.sys.localStorage.getItem("UserNickName")),1!=this.checkIfExist("getWxUserInfo")&&"true"!=this.checkIfExist("getWxUserInfo")||(a.default.getWxUserInfo=!0,a.default.UserAvatarUrl=cc.sys.localStorage.getItem("UserAvatar"),a.default.UserNickName=cc.sys.localStorage.getItem("UserNickName")),this.checkIfExist("skinProgress")&&(a.default.boardSkinData.skinProgress=this.checkIfExist("skinProgress")),this.checkIfExist("screwSkinProgress")&&(a.default.screwSkinData.skinProgress=this.checkIfExist("screwSkinProgress")),this.checkIfExist("version")?(console.log("-----------has version",a.default.version),cc.sys.localStorage.getItem("version")!=a.default.version&&(a.default.isShowAchievement=!0,cc.sys.localStorage.setItem("version",a.default.version),console.log("-----------has different version "))):(console.log("-----------dont has version"),cc.sys.localStorage.setItem("version",a.default.version),a.default.isShowAchievement=!0);var n=cc.sys.localStorage.getItem("myProvinceIndex");if(isNaN(parseInt(n))?a.default.myProvinceIndex=-1:a.default.myProvinceIndex=parseInt(n),console.log("\u5730\u533a\u4fe1\u606f",a.default.myProvinceIndex),r.default.instance.playBGM(),this.checkIfExist("provincePoint")){var i=this.checkIfExist("provincePoint").split(",");for(c=0;c<a.default.provinceArr.length;c++)a.default.provincePoint[c]=parseInt(i[c])}else{for(var c=0;c<a.default.provinceArr.length;c++){var s=Math.ceil(1e4*Math.random())+1e4;a.default.provincePoint.push(s)}this.setArrData("provincePoint")}var l=cc.sys.localStorage.getItem("isWatchGraphicalAd");null==l||null==l||""==l?(a.default.isWatchGraphicalAd=!1,cc.sys.localStorage.setItem("isWatchGraphicalAd",!1)):a.default.isWatchGraphicalAd=1==l||"true"==l;var u=cc.sys.localStorage.getItem("isWatchUnscrewAd");null==u||null==u||""==u?(a.default.isWatchUnscrewAd=!1,cc.sys.localStorage.setItem("isWatchUnscrewAd",!1)):a.default.isWatchUnscrewAd=1==u||"true"==u;var d=cc.sys.localStorage.getItem("isWatchEliminateAd");null==d||null==d||""==d?(a.default.isWatchEliminateAd=!1,cc.sys.localStorage.setItem("isWatchEliminateAd",!1)):a.default.isWatchEliminateAd=1==d||"true"==d;var h=cc.sys.localStorage.getItem("isSubscribe");null==h||null==h||""==h?a.default.isSubscribe=!1:1!=h&&"true"!=h||(a.default.isSubscribe=!0)},t.prototype.loadGameData=function(){cc.sys.localStorage.getItem("passedNovice"),0==this.checkIfExist("goldNum")?(a.default.goldNum=200,cc.sys.localStorage.setItem("goldNum",a.default.goldNum)):a.default.goldNum=parseInt(this.checkIfExist("goldNum")),a.default.isFirstGame=!1,a.default.passedNovice=!0,this.checkIfExist("currentLevel")?a.default.currLevel=parseInt(this.checkIfExist("currentLevel")):(a.default.currLevel=1,cc.sys.localStorage.setItem("currentLevel",a.default.currLevel)),this.checkIfExist("gametime")&&(cc.sys.localStorage.removeItem("gametime"),a.default.passLevel=30,cc.sys.localStorage.setItem("passLevel",a.default.passLevel),n.setRank(a.default.passLevel)),this.checkIfExist("passLevel")&&(a.default.passLevel=parseInt(this.checkIfExist("passLevel"))),a.default.currLevel<a.default.passLevel&&(a.default.currLevel=a.default.passLevel,cc.sys.localStorage.setItem("currentLevel",a.default.currLevel)),console.log("\u5f53\u524d\u901a\u8fc7\u7684\u6700\u5927\u5173\u5361",a.default.passLevel,cc.sys.localStorage.getItem("passLevel")),this.checkIfExist("pointNum")&&(a.default.pointNum=parseInt(this.checkIfExist("pointNum"))),this.checkIfExist("myRank")&&(a.default.myRank=parseInt(this.checkIfExist("myRank")))},t.prototype.checkData=function(){var e=cc.sys.localStorage.getItem("Data_Day");if(""==e||null==e||null==e||this.changeToDate(Date.now())!=parseInt(e)){console.log("\u4e0d\u662f\u540c\u4e00\u5929",e,this.changeToDate(Date.now())),""==e||null==e||null==e?this.checkContinue(this.changeToDate(Date.now())):this.checkContinue(e);for(var t=0;t<a.default.provinceArr.length;t++)a.default.provincePoint[t]+=Math.floor(300*Math.random()+500);this.setArrData("provincePoint"),cc.sys.localStorage.setItem("Data_Day",String(this.changeToDate(Date.now()))),cc.sys.localStorage.setItem("isShare",!1),cc.sys.localStorage.setItem("isGetSidebarCardGift",!1),cc.sys.localStorage.setItem("shareUseProp",0),a.default.shareUseProp=0,a.default.isShare=!1}else{var o=cc.sys.localStorage.getItem("isShare");a.default.isShare="true"==o;var n=cc.sys.localStorage.getItem("isGetSidebarCardGift");a.default.isGetSidebarCardGift="true"==n||1==n;var i=cc.sys.localStorage.getItem("shareUseProp");a.default.shareUseProp=""==i||null==i||null==i?0:parseInt(i),console.log("\u662f\u540c\u4e00\u5929",e)}console.log("\u4eca\u65e5\u5206\u4eab\u83b7\u5f97\u9053\u5177\u6b21\u6570",a.default.shareUseProp)},t.prototype.checkContinue=function(e){if(i.currentPlatform==i.platformEnum.toutiao){var t=cc.sys.localStorage.getItem("ContinuousLoginDays");if(!isNaN(parseInt(t))&&null!=t&&null!=t)return cc.sys.localStorage.setItem("loginDay",e),cc.sys.localStorage.setItem("ContinuousLoginDay",-1),void cc.sys.localStorage.removeItem("ContinuousLoginDays");var o=cc.sys.localStorage.getItem("loginDay");if(null==o||null==o||isNaN(parseInt(o)))a.default.loginDay=e,a.default.ContinuousLoginDays=0,cc.sys.localStorage.setItem("loginDay",e),cc.sys.localStorage.setItem("ContinuousLoginDay",0);else{if(a.default.loginDay=parseInt(o),this.changeToDate(Date.now())-parseInt(e)==1){var c=parseInt(cc.sys.localStorage.getItem("ContinuousLoginDay"));a.default.ContinuousLoginDays=-1!=c?c+1:-1}else a.default.ContinuousLoginDays=-1;cc.sys.localStorage.setItem("ContinuousLoginDay",a.default.ContinuousLoginDays)}a.default.ContinuousLoginDays<=30&&-1!=a.default.ContinuousLoginDays&&n.reportRemain()}},t.prototype.changeToDate=function(e){return Math.floor(e/864e5)},t.prototype.loadSkinData=function(){var e=cc.sys.localStorage.getItem("skinData");if(null==e||null==e||""==e)this.setArrData("skinData"),console.log("\u8bbe\u7f6e\u76ae\u80a4\u6570\u636e");else{console.log("-------skindata------",e);for(var t=e.split(","),o=0;o<a.default.boardSkinData.skinData.length;o++)o<t.length?a.default.boardSkinData.skinData[o]=parseInt(t[o]):a.default.boardSkinData.skinData[o]=0}var n=cc.sys.localStorage.getItem("piece");if(null==n||null==n||""==n)this.setArrData("piece");else for(console.log("-------piecedata------",n),t=n.split(","),o=0;o<a.default.boardSkinData.piece.length;o++)o<t.length?a.default.boardSkinData.piece[o]=parseInt(t[o]):a.default.boardSkinData.piece[o]=0;var i=cc.sys.localStorage.getItem("currentSkin");null==i||null==i||""==i?(cc.sys.localStorage.setItem("currentSkin",0),a.default.boardSkinData.currentSkin=0):a.default.boardSkinData.currentSkin=parseInt(i)},t.prototype.loadScrewSkinData=function(){var e=cc.sys.localStorage.getItem("screwSkinData");if(null==e||null==e||""==e)this.setArrData("screwSkinData"),console.log("\u8bbe\u7f6e\u76ae\u80a4\u6570\u636e");else{console.log("-------screwSkindata------",e);for(var t=e.split(","),o=0;o<a.default.screwSkinData.skinData.length;o++)o<t.length?a.default.screwSkinData.skinData[o]=parseInt(t[o]):a.default.screwSkinData.skinData[o]=0}var n=cc.sys.localStorage.getItem("currentScrewSkin");null==n||null==n||""==n?(cc.sys.localStorage.setItem("currentScrewSkin",0),a.default.screwSkinData.currentSkin=0):a.default.screwSkinData.currentSkin=parseInt(n)},t.prototype.loadAchievementData=function(){var e=cc.sys.localStorage.getItem("claimAchievementRewards");if(this.checkIfExist("claimAchievementRewards"))for(var t=e.split(","),o=0;o<a.default.AchievementData.claimAchievementRewards.length;o++)o<t.length?a.default.AchievementData.claimAchievementRewards[o]=parseInt(t[o]):a.default.AchievementData.claimAchievementRewards[o]=0;else this.setArrData("claimAchievementRewards");console.log("\u6210\u5c31\u6570\u636e\uff1a",a.default.AchievementData.claimAchievementRewards),this.checkIfExist("TotalRemoveSteel")?a.default.AchievementData.TotalRemoveSteel=parseInt(this.checkIfExist("TotalRemoveSteel")):(a.default.AchievementData.TotalRemoveSteel=0,cc.sys.localStorage.setItem("TotalRemoveSteel",0))},t.prototype.loadRecordData=function(){var e=cc.sys.localStorage.getItem("recentRecord");if(null==e||""==e||null==e);else{var t=JSON.parse(e);a.default.recentGameRecord.recentRecord=t,console.log("\u83b7\u53d6\u5bf9\u5c40\u8bb0\u5f55\u6210\u529f!!!!",a.default.recentGameRecord.recentRecord)}},t.prototype.setArrData=function(e){var t;switch(e){case"skinData":t=a.default.boardSkinData.skinData;break;case"screwSkinData":t=a.default.screwSkinData;break;case"claimAchievementRewards":t=a.default.AchievementData.claimAchievementRewards;break;case"piece":t=a.default.boardSkinData.piece;break;case"provincePoint":t=a.default.provincePoint}for(var o="",n=0;n<t.length;n++)o+=t[n],n!=t.length-1&&(o+=",");cc.sys.localStorage.setItem(e,o)},t.prototype.checkIfExist=function(e){var t=cc.sys.localStorage.getItem(e);return null!=t&&null!=t&&""!=t&&t},t.prototype.loadSkinPieceImg=function(){for(var e=[],t=function(t){e.push(new Promise(function(e){c.default.resManager.loadBundleRes("levels","skin/puzzle/"+String(t+7)+"_off",cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d","skin/puzzle/"+String(t+7)+"_off","\u5931\u8d25!"),e(null)}).then(function(o){a.default.skinPieceImgArr[t]=o,e(null)})})),e.push(new Promise(function(e){c.default.resManager.loadBundleRes("levels","skin/puzzle/"+String(t+7)+"_on",cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d","skin/puzzle/"+String(t+7)+"_on","\u5931\u8d25!"),e(null)}).then(function(o){a.default.skinPieceImgArr[t+6]=o,e(null)})}))},o=0;o<6;o++)t(o);return Promise.all(e)},t.prototype.loadGameBundle=function(e){var t=this;return new Promise(function(o,a){t.gameBundle&&t.gameBundle.name==e?o(1):cc.assetManager.loadBundle(e,function(n,i){if(n)return console.log("\u52a0\u8f7d",e,"\u5931\u8d25",n),void a();t.gameBundle&&t.gameBundle.releaseAll(),t.gameBundle=i,o(1)})})},t.prototype.loadGameScene=function(e){var t=this;return new Promise(function(o){console.log("------\u52a0\u8f7d\u573a\u666f1111"),t.gameBundle.loadScene(e,function(a,n){a?console.log("----\u52a0\u8f7d",e,"\u5931\u8d25",a):(console.log("--------\u52a0\u8f7d\u573a\u666f2222"),t.preLoadScene=!0,t.GameScene=n,o(n))})})},t.prototype.getServerLevelData=function(){var e=new XMLHttpRequest,t=this;e.onreadystatechange=function(){if(4==e.readyState&&e.status>=200&&e.status<400){t.hasServerLevelData=!0;var o=e.responseText;t.serverLevelData=JSON.parse(o),console.log("===>\u83b7\u5f97\u53ef\u8c03\u6700\u5927\u5173\u5361\u6570\u636e\u6210\u529f",t.serverLevelData)}},e.open("GET","https://web.flysheeep.com/tongquApi/newFunctionManage?platform=tt&appId=tt717b07c6ee48360002&version=1.7.5",!0),e.send()},t.instance=null,__decorate([d(cc.ProgressBar)],t.prototype,"progressBar",void 0),__decorate([d(cc.Node)],t.prototype,"mask",void 0),o=__decorate([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{BattleManager:"BattleManager",Game:"Game",PostUserData:"PostUserData",commonData:"commonData",config:"config",platform:"platform"}],Oceanengine:[function(e,t,o){"use strict";cc._RF.push(t,"74a90a4iBhGnLTgCIvOJsrr","Oceanengine"),Object.defineProperty(o,"__esModule",{value:!0}),o.getWXOpenid=o.postVideoSuccess=o.init=void 0;var a=e("commonData"),n=e("PostUserData"),i="tt717b07c6ee48360002",c="",r="",s="";function l(){var e=tt.getLaunchOptionsSync();try{console.log("----------------------\x3e getLaunchOptionsSync",e,e.query),r=e.query.clickid,s=e.query.requestid,r||(r=""),s||(s="")}catch(t){console.log("----------------------\x3e get clickId fail")}}o.init=function(){console.log("----------\u5de8\u91cf\u5f15\u64ce\u521d\u59cb\u5316"),l(),new Promise(function(e){tt.login({success:function(t){var o;o=t.isLogin?t.code:t.anonymousCode,tt.request({url:"https://api.flysheeep.com/api/expro/getttopenid",header:{"Content-Type":"application/json;charset=utf-8"},data:{appid:i,code:o},method:"POST",success:function(t){var o=t.data.data;console.log("----------------------\x3e get open-id json",o),o.openid?(c=o.openid,a.default.openId=c,console.log("----------------------\x3e openid_get",cc.sys.localStorage.getItem("openid_get")),"true"!=cc.sys.localStorage.getItem("openid_get")&&(tt.request({url:"https://api.flysheeep.com/api/expro/set_ecpm_active_newer",data:{openid:c,clickid:r,event_type:"active",adid:"",creativeid:"",creativetype:"",appid:i,requestid:s},header:{"Content-Type":"application/json;charset=utf-8"},method:"POST",success:function(e){cc.sys.localStorage.setItem("openid_get","true"),console.warn("===== fly sheep api =====(active)=====>>  success >>",e)},fail:function(e){console.warn("===== fly sheep api =====(active)=====>> fail >>",e)}}),n.getUserInformation())):o.anonymous_openid&&(c=o.anonymous_openid,a.default.openId=c),console.log("----------------------\x3e get open-id success",c),cc.sys.localStorage.setItem("openid",c),e(c)},fail:function(e){console.log("------------get openid---------fail-------",e),n.getUserInformation()}})},fail:function(e){console.log("------------login---------fail-------",e)}})})},o.postVideoSuccess=function(){tt.request({url:"https://api.flysheeep.com/api/expro/set_ecpm_addiction_newer",data:{openid:c,clickid:r,event_type:"game_addiction",mp_id:i},header:{"Content-Type":"application/json;charset=utf-8"},method:"POST",success:function(e){console.warn("===== fly sheep api =====(video ad)=====>> success >>",e)},fail:function(e){console.warn("===== fly sheep api =====(video ad)=====>> fail >>",e)}})},o.getWXOpenid=function(){return new Promise(function(e){wx.login({success:function(t){var o=t.code;wx.request({url:"https://api.flysheeep.com/api/expro/getopenid",header:{"Content-Type":"application/json;charset=utf-8"},data:{appid:"wxe81c4bd460b9a891",code:o},method:"POST",success:function(t){var o=t.data.data;console.log("----------------------\x3e get open-id res",t),console.log("----------------------\x3e get open-id json",o),o.openid?(c=o.openid,a.default.openId=c,console.log("----------------------\x3e openid_get",cc.sys.localStorage.getItem("openid_get")),"true"!=cc.sys.localStorage.getItem("openid_get")&&n.getUserInformation()):o.anonymous_openid&&(c=o.anonymous_openid,a.default.openId=c),console.log("----------------------\x3e get open-id success",c),cc.sys.localStorage.setItem("openid",c),e(c)},fail:function(e){console.log("------------get openid---------fail-------",e),n.getUserInformation()}})},fail:function(e){console.log("------------login---------fail-------",e)}})})},cc._RF.pop()},{PostUserData:"PostUserData",commonData:"commonData"}],PostUserData:[function(e,t,o){"use strict";cc._RF.push(t,"0c57fEqmxZB8ILAiuqm2KEH","PostUserData"),Object.defineProperty(o,"__esModule",{value:!0}),o.getrankList=o.getMatchData=o.getUserInformation=o.postRecord=o.postPoint=o.postAllUserData=o.seletPostUserData=void 0;var a=e("BattleManager"),n=e("commonData"),i=e("Load"),c=e("compView"),r=e("config"),s="https://api.flysheeep.com/api/tapaway/update_user_info_pig";function l(e){var t;""!=n.default.openId&&(r.currentPlatform==r.platformEnum.toutiao?t=tt:r.currentPlatform==r.platformEnum.wechat&&(t=wx),t.request({url:s,data:e,header:{"Content-Type":"application/json;charset=utf-8"},method:"POST",success:function(e){console.log("===== fly sheep api =====(postUserInformation)=====>> success >>",e),cc.sys.localStorage.setItem("isPostUserData","true")},fail:function(e){console.log("===== fly sheep api =====(postUserInformation)=====>> fail >>",e)}}))}function u(e){for(var t="",o=0;o<e.length;o++)t+=e[o],o!=e.length-1&&(t+=",");return t}function d(e,t){for(var o=e.split(","),a=0;a<t.length;a++)a<o.length?"NaN"==o[a]&&isNaN(parseInt(o[a]))?t[a]=1:t[a]=parseInt(o[a]):t[a]=0}o.seletPostUserData=function(e){for(var t={head_url:n.default.UserAvatarUrl,nick_name:n.default.UserNickName,coin:n.default.goldNum,level:n.default.passLevel+"",board_skin:u(n.default.boardSkinData.skinData),little_man_skin:u(n.default.screwSkinData.skinData),board_num:n.default.AchievementData.TotalRemoveSteel,skin_debris:u(n.default.boardSkinData.piece),area:n.default.provinceArr[n.default.myProvinceIndex],points:n.default.pointNum},o={openid:n.default.openId,platform:r.currentPlatform},a=0,i=e;a<i.length;a++){var c=i[a];t.hasOwnProperty(c)?o[c]=t[c]:console.log(c+"\u5b57\u6bb5\u4e0d\u5b58\u5728")}console.warn("\u4e0a\u62a5\u6570\u636e",o),l(o)},o.postAllUserData=function(){var e={openid:n.default.openId,platform:r.currentPlatform,head_url:n.default.UserAvatarUrl,nick_name:n.default.UserNickName,coin:n.default.goldNum,level:n.default.passLevel+"",board_skin:u(n.default.boardSkinData.skinData),little_man_skin:u(n.default.screwSkinData.skinData),board_num:n.default.AchievementData.TotalRemoveSteel,points:n.default.pointNum,skin_debris:u(n.default.boardSkinData.piece)};console.warn("\u4e0a\u62a5\u5168\u90e8\u6570\u636e",e),l(e)},o.postPoint=function(){l({openid:n.default.openId,platform:r.currentPlatform,points:n.default.pointNum})},o.postRecord=function(e){var t,o="true"==n.default.playerData.is_pass?1:2;r.currentPlatform==r.platformEnum.toutiao?t=tt:r.currentPlatform==r.platformEnum.wechat&&(t=wx),console.log("\u662f\u5426\u8fc7\u5173",o,n.default.playerData.is_pass),t.request({url:"https://api.flysheeep.com/api/tapaway/match_record_pig",data:{openid:n.default.openId,del_board_num:n.default.playerData.del_board_num,is_pass:o,pass_time:parseInt(n.default.playerData.pass_time),user_point:e,platform:r.currentPlatform},header:{"Content-Type":"application/json;charset=utf-8"},method:"POST",success:function(e){console.log("===== fly sheep api =====(postUserInformation)=====>> success >>",e)},fail:function(e){console.log("===== fly sheep api =====(postUserInformation)=====>> fail >>",e)}})},o.getUserInformation=function(e){var t;r.currentPlatform==r.platformEnum.toutiao?t=tt:r.currentPlatform==r.platformEnum.wechat&&(t=wx),t.request({url:"https://api.flysheeep.com/api/tapaway/get_user_info_pig",header:{"Content-Type":"application/json;charset=utf-8"},data:{openid:n.default.openId,platform:r.currentPlatform},method:"POST",success:function(t){if(console.log("=======================lante (get userinformation) success=================",t),t.data)if(t.data.data&&200==t.data.code){console.log("=======================lante (get userinformation) success2=================");var o=t.data.data;n.default.UserAvatarUrl=o.head_url,n.default.UserNickName=o.nick_name,n.default.pointNum=o.points,n.default.goldNum=o.coin,n.default.passLevel=parseInt(o.level),isNaN(n.default.passLevel)&&(n.default.passLevel=0),n.default.currLevel=n.default.passLevel+1,n.default.AchievementData.TotalRemoveSteel=o.board_num,n.default.myProvinceIndex=n.default.provinceArr.indexOf(o.area),d(o.board_skin,n.default.boardSkinData.skinData),d(o.little_man_skin,n.default.screwSkinData.skinData),""==o.skin_debris||d(o.skin_debris,n.default.boardSkinData.piece);for(var c=0;c<=20&&n.default.pointNum>=n.default.rankData[c].points;c++)n.default.myRank=c;-1!=n.default.myProvinceIndex&&cc.sys.localStorage.setItem("myProvinceIndex",n.default.myProvinceIndex),cc.sys.localStorage.setItem("myRank",n.default.myRank),cc.sys.localStorage.setItem("currentLevel",n.default.currLevel),cc.sys.localStorage.setItem("passLevel",n.default.passLevel),cc.sys.localStorage.setItem("goldNum",n.default.goldNum),cc.sys.localStorage.setItem("pointNum",n.default.pointNum),cc.sys.localStorage.setItem("TotalRemoveSteel",n.default.AchievementData.TotalRemoveSteel),cc.sys.localStorage.setItem("UserAvatar",n.default.UserAvatarUrl),cc.sys.localStorage.setItem("UserNickName",n.default.UserNickName),a.default.instance.setArrData("skinData"),a.default.instance.setArrData("screwSkinData"),a.default.instance.setArrData("piece"),n.default.passLevel>=1?(n.default.isFirstGame=!1,n.default.passedNovice=!0,cc.sys.localStorage.setItem("firstgame",!1),cc.sys.localStorage.setItem("passedNovice",!0)):(n.default.isFirstGame=!0,n.default.passedNovice=!1),i.default.instance.isloadUserData=!0}else i.default.instance.loadLocalData();else i.default.instance.loadLocalData();e&&e()},fail:function(){console.log("=======================lante (get userinformation) fail================="),i.default.instance.loadLocalData()}})},o.getMatchData=function(){var e;r.currentPlatform==r.platformEnum.toutiao?e=tt:r.currentPlatform==r.platformEnum.wechat&&(e=wx),e.request({url:"https://api.flysheeep.com/api/tapaway/match_user_pig",header:{"Content-Type":"application/json;charset=utf-8"},data:{openid:n.default.openId,platform:r.currentPlatform},method:"POST",success:function(e){if(console.warn("=======================lante (getMatchUser) succcess=================",e.data),200==e.data.code){var t=e.data.data.users,o=Object.keys(t).length,a=[];console.log("---------\u5339\u914d\u5230\u7684\u7528\u6237\u6570\u636e\u6570\u91cf",o);for(var i=0;i<o;i++){var r=t[i].create_at;"2024"==r.slice(0,4)&&(parseInt(r.slice(6,7))<3||3==parseInt(r.slice(6,7))&&parseInt(r.slice(8,10))<=11)?a.push(i):(n.default.Random_Rivals.rivals[i].nick_name=t[i].nick_name,n.default.Random_Rivals.rivals[i].head_url=t[i].head_url,n.default.Random_Rivals.rivals[i].del_board_num=t[i].del_board_num+"",n.default.Random_Rivals.rivals[i].is_pass=1==t[i].is_pass?"true":"false",n.default.Random_Rivals.rivals[i].pass_time=t[i].pass_time+"")}for(n.default.randomAvatar=[],i=o;i<3;i++)n.default.randomlyGenerateMatchData(i);for(i=0;i<a.length;i++)n.default.randomlyGenerateMatchData(a[i]);console.warn("-----\u5339\u914d\u6570\u636e",n.default.Random_Rivals.rivals)}else for(n.default.randomAvatar=[],i=0;i<3;i++)n.default.randomlyGenerateMatchData(i);c.default.instance.isloadPlayerData=!0},fail:function(){console.warn("=======================lante (getMatchUser) fail================="),n.default.randomAvatar=[];for(var e=0;e<3;e++)n.default.randomlyGenerateMatchData(e);c.default.instance.isloadPlayerData=!0}})},o.getrankList=function(){var e;r.currentPlatform==r.platformEnum.toutiao?e=tt:r.currentPlatform==r.platformEnum.wechat&&(e=wx),console.log("-----------platform",e),e.request({url:"https://api.flysheeep.com/api/tapaway/rank_list_pig",header:{"Content-Type":"application/json;charset=utf-8"},data:{platform:r.currentPlatform},method:"POST",success:function(e){n.default.compRankList=e.data.data,c.default.instance.initRankListData(),console.log("=======================lante (getRankList) succcess=================",e)},fail:function(){console.log("=======================lante (getRankList) fail=================")}})},cc._RF.pop()},{BattleManager:"BattleManager",Load:"Load",commonData:"commonData",compView:"compView",config:"config"}],ResourcesManager:[function(e,t,o){"use strict";cc._RF.push(t,"1bb19qSEaBNjoSslRWqA2Dy","ResourcesManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("Game"),n=cc._decorator,i=n.ccclass,c=(n.property,function(){function e(){}return e.init=function(){return Promise.all([this.loadAnimationClip(),this.loadPrefabs()])},e.loadRes=function(e){var t=this;return new Promise(function(o){var a=t.res[e];if(a)return o(a),a;cc.resources.load(""+e,function(a,n){a?(cc.log("[\u52a0\u8f7d\u5931\u8d25] "+e),o(null)):(t.res[e]=n,o(n))})})},e.loadResDir=function(e,t){var o=this;return new Promise(function(a){if(o.res[e])return console.log("[\u52a0\u8f7d\u6210\u529f-\u7f13\u5b58] "+e),a(o.res[e]),o.res[e];cc.resources.loadDir(e,t,function(t,n){t?(console.log("[\u52a0\u8f7d\u5931\u8d25] "+e),a([])):(o.res[e]=n,console.log("[\u52a0\u8f7d\u6210\u529f] "),a(n))})})},e.loadYunBundle=function(e,t,o,n){var i=this;a.default.loadLvBundle(e,function(){console.warn("-------------\x3e>",e),i.loadBundleRes(e,t,o).catch(function(){console.error("\u52a0\u8f7d\u5173\u5361\u5931\u8d25!"),a.default.apiPlatform.showTips("\u52a0\u8f7d\u5173\u5361\u5931\u8d25!")}).then(function(e){n&&n(e)})})},e.loadBundleRes=function(e,t,o){var n=this;return new Promise(function(i,c){var r=a.default.bundleMap[e];if(r||i(new Promise(function(n,i){cc.assetManager.loadBundle(e,function(c,r){c?i(null):(a.default.bundleMap[e]=r,n(a.default.resManager.loadBundleRes(e,t,o)))})})),n.bundleMapRes[e]){if(n.bundleMapRes[e][t])return i(n.bundleMapRes[e][t]),n.bundleMapRes[e][t]}else n.bundleMapRes[e]={};r.load(t,o,function(o,a){o?(console.log("[\u52a0\u8f7d\u5931\u8d25] "+t,o),c(null)):(n.bundleMapRes[e][t]=a,i(a))})})},e.loadAudioClips=function(){var e=this;return new Promise(function(t,o){cc.resources.loadDir("audio",cc.AudioClip,function(a,n){a&&(cc.log("[\u52a0\u8f7d\u5931\u8d25] \u97f3\u4e50"),o()),n.forEach(function(t){e.AudioClips[t.name]=t}),cc.log("[\u52a0\u8f7d\u6210\u529f] \u97f3\u4e50"),t(n)})})},e.loadAnimationClip=function(){var e=this;return new Promise(function(t,o){cc.resources.loadDir("animation",cc.AnimationClip,function(a,n){a&&(cc.log("[\u52a0\u8f7d\u5931\u8d25]","animation"),o()),n.forEach(function(t){e.AnimationClips[t.name]=t}),t(n),cc.log("[\u52a0\u8f7d\u6210\u529f]")})})},e.loadPrefabs=function(){var e=this;return new Promise(function(t,o){cc.resources.loadDir("prefab",cc.Prefab,function(a,n){a&&(cc.log("[\u52a0\u8f7d\u5931\u8d25]","prefab"),o()),n.forEach(function(t){e.Prefabs[t.name]=t}),t(n),cc.log("[\u52a0\u8f7d\u6210\u529f]")})})},e.showAnimation=function(e,t,o,a){var n=this;return void 0===t&&(t=this.AnimationClips.scale_small_big),void 0===o&&(o=!0),void 0===a&&(a=!1),new Promise(function(i){return __awaiter(n,void 0,void 0,function(){var n,c,r,s;return __generator(this,function(){return null!==e&&cc.isValid(e,!0)?(e.active=!0,(n=e.getChildByName("mask_top"))&&(n.active=!0),o&&(c=e.getChildByName("mask"),r=e.getChildByName("content"),c&&c.getComponent(cc.BlockInputEvents))?(a?this.showAnimation(c,this.AnimationClips.opacity_fade_out,!1,!0):this.showAnimation(c,this.AnimationClips.opacity_fade_in),this.showAnimation(r,t,!1,a),setTimeout(function(){a&&(e.active=!1,e.opacity=255,e.scale=1),n&&(n.active=!1),i()},1e3*t.duration+200),i(),[2]):((s=e.getComponent(cc.Animation))||(s=e.addComponent(cc.Animation)),s.addClip(t),s.play(t.name),s.setCurrentTime(0),setTimeout(function(){a&&(e.active=!1,e.opacity=255,e.scale=1,"content"===e.name&&(e.position=cc.v3(0,0,0))),n&&(n.active=!1),i()},1e3*t.duration+200),[2])):(console.log("[Res.show] \u8282\u70b9\u4e0d\u5b58\u5728\u6216\u5df2\u9500\u6bc1"),i(),[2])})})})},e.hideAnimation=function(e,t){var o=this;return void 0===t&&(t=this.AnimationClips.scale_left_right),new Promise(function(a){if(null!==e&&cc.isValid(e,!0)){if(!o.isMaskInLayer(e)){var n=e.addComponent(cc.Animation);return n.addClip(t),n.getAnimationState(t.name).speed=-n.getAnimationState(t.name).speed,n.setCurrentTime(t.duration),n.play(t.name),void a(0)}for(var i=0,c=e.children;i<c.length;i++){var r=c[i];r.getComponent(cc.BlockInputEvents)||o.hideAnimation(r,t)}a(0)}else a(0)})},e.isMaskInLayer=function(e){for(var t=0,o=e.children;t<o.length;t++)if(o[t].getComponent(cc.BlockInputEvents))return!0;return!1},e.playEffect=function(e){return void 0===e&&(e=this.AudioClips.button),this.isAudioEffect?e?cc.audioEngine.playEffect(e,!1):(cc.log("\u64ad\u653e\u5931\u8d25\u7684\u97f3\u4e50 -> ",e.name),null):null},e.playMusic=function(e,t){return void 0===e&&(e=this.AudioClips.bg_main),void 0===t&&(t=!1),this.isAudioBGM?!t&&cc.audioEngine.isMusicPlaying()?null:void(e?cc.audioEngine.playMusic(e,!0):cc.log("\u64ad\u653e\u5931\u8d25\u7684\u97f3\u4e50 -> ",e.name)):null},e.setMusicVolume=function(e){cc.audioEngine.setMusicVolume(e)},e.setEffectVolume=function(e){cc.audioEngine.setEffectsVolume(e)},e.addMusicVolume=function(e){e=cc.misc.clamp01(cc.audioEngine.getMusicVolume()+e),cc.audioEngine.setMusicVolume(e)},e.loadRandomAvatar=function(e,t){a.default.resManager.loadBundleRes("levels","randomAvatar/"+e,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7dlevels/randomAvatar/"+e+"\u5931\u8d25!")}).then(function(e){t.getComponent(cc.Sprite).spriteFrame=e})},e.isAudioEffect=!0,e.isAudioBGM=!0,e.res={},e.bundleMapRes={},e.AudioClips={button:new cc.AudioClip,bg_main:new cc.AudioClip,compose:new cc.AudioClip,game_over:new cc.AudioClip},e.AnimationClips={move_left_out:new cc.AnimationClip,move_left_in:new cc.AnimationClip,opacity_fade_in:new cc.AnimationClip,opacity_fade_out:new cc.AnimationClip,rotate_shake:new cc.AnimationClip,scale_down_up:new cc.AnimationClip,scale_left_right:new cc.AnimationClip,scale_small_big:new cc.AnimationClip,left_to_right:new cc.AnimationClip,small_to_big:new cc.AnimationClip,big_to_small:new cc.AnimationClip,close_scale:new cc.AnimationClip},e.Prefabs={Right:new cc.Prefab,wrong:new cc.Prefab},__decorate([i],e)}());o.default=c,cc._RF.pop()},{Game:"Game"}],SceneManager:[function(e,t,o){"use strict";cc._RF.push(t,"bc476VmY/1E/5eRSlwmkN15","SceneManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function e(){}return e.preLoadScene=function(e){return new Promise(function(t){cc.director.preloadScene(e,function(e){e&&console.error("[scene.load]:"+e),t("\u573a\u666f\u9884\u52a0\u8f7d")})})},e.loadScene=function(e,t){return void 0===t&&(t=function(){}),new Promise(function(o){cc.director.loadScene(e,function(){t(),o("\u573a\u666f\u52a0\u8f7d")})})},e.SCENE_LOADING="Loading",e.SCENE_MAIN="",e.SCENE_BATTLE="Game",e}();o.default=a,cc._RF.pop()},{}],ScrewNumberManager:[function(e,t,o){"use strict";cc._RF.push(t,"0c4ef5h05tMDK1qmGKrP/Jf","ScrewNumberManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.isShowNumberChange=o.isShowNumberInit=o.screwNumberRecord=o.recordCurScrewNumber=o.curScrewNumber=o.isShowNumber=void 0;var a=cc._decorator;a.ccclass,a.property,o.isShowNumber=!1,o.curScrewNumber="0",o.recordCurScrewNumber=function(e){console.log("====>\u8bb0\u5f55\u5f53\u524d\u70b9\u51fb\u7684\u87ba\u4e1d\u7f16\u53f7"),o.curScrewNumber=e.getChildByName("screwNumber").getComponent(cc.Label).string},o.screwNumberRecord=function(e,t){console.log(o.isShowNumber),e.getChildByName("screwNumber").active=o.isShowNumber,e.getChildByName("screwNumber").getComponent(cc.Label).string=t},o.isShowNumberInit=function(){o.isShowNumber=!0},o.isShowNumberChange=function(){o.isShowNumber=!o.isShowNumber},cc._RF.pop()},{}],ScrewSkin:[function(e,t,o){"use strict";cc._RF.push(t,"2de9fgygvhDSYH0WeHcYe9J","ScrewSkin"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("newSkinView"),n=e("commonData"),i=e("showScrewView"),c=cc._decorator,r=c.ccclass,s=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.clickSkinItem=function(){var e=parseInt(this.node.name);if(0!=n.default.screwSkinData.skinData[e])n.default.screwSkinData.currentSkin!=e&&a.default.instance.equipScrewSkin(e);else if(e<=7){var t=n.default.screwSkinData.skinProgressTarget[e]-n.default.screwSkinData.skinProgress;i.default.instance.showScrewSkin(e,"\u518d\u901a\u5173"+t+"\u6b21\u5373\u53ef\u89e3\u9501\u76ae\u80a4\u54e6\uff01")}else i.default.instance.showScrewSkin(e,"\u8fbe\u6210\u6210\u5c31\u5373\u53ef\u89e3\u9501\u76ae\u80a4\u54e6\uff01")},__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{commonData:"commonData",newSkinView:"newSkinView",showScrewView:"showScrewView"}],Screw:[function(e,t,o){"use strict";cc._RF.push(t,"31f87Qqc6tB7bMbv079aCvc","Screw"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=cc._decorator,i=n.ccclass,c=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.clickScrew=function(){a.default.upScrew==this.node.name?this.clickDown():(""!=a.default.upScrew&&this.node.parent.getChildByName(a.default.upScrew).getComponent(o).clickDown(),this.clickUp())},t.prototype.clickUp=function(){console.log("\u62ac\u8d77\u87ba\u4e1d",this.node.name),a.default.upScrew=this.node.name},t.prototype.clickDown=function(){console.log("\u653e\u4e0b\u87ba\u4e1d",this.node.name),a.default.upScrew=""},o=__decorate([i],t)}(cc.Component));o.default=c,cc._RF.pop()},{commonData:"commonData"}],ShareTitle:[function(e,t,o){"use strict";cc._RF.push(t,"1f91c78elhOc4uYJ3FuIM5+","ShareTitle"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=function(){function e(){}return e.init=function(){for(var e=cc.assetManager.getBundle(this.shareBundle),t=function(t){var a=o.shareInfo[t].url,n=o;e.load(a,cc.Asset,function(e,o){if(!e){var a=o.nativeUrl;n.shareInfo[t].url=a}})},o=this,a=0;a<this.shareInfo.length;a+=1)t(a)},e.getShareIdInfo=function(){return"title="+this.lastShareIdInfo.title+"&img="+this.lastShareIdInfo.img},e.getRandomTitle=function(){this.shareNum=Math.floor(Math.random()*this.shareInfo.length);var e=this.shareInfo[this.shareNum].title;return this.lastShareIdInfo.title=this.shareInfo[this.shareNum].id,e},e.getRandomTitle2=function(e){switch(console.log("-------------------num",e),e){case 1:return 0==a.default.passLevel?"\u4e0a\u5395\u6240\u73a9\u8fd9\u4e2a\uff0c\u817f\u90fd\u9ebb\u4e86\uff01":(this.shareNum=Math.floor(Math.random()*this.shareInfo1.length),this.shareInfo1[this.shareNum]);case 2:return 0==a.default.passLevel?(this.shareNum=Math.floor(Math.random()*this.shareInfo2.length),this.shareInfo2[this.shareNum]):Math.random()<.33?"\u7b2c"+a.default.passLevel+"\u5173\uff0c\u6211\u5df2\u7ecf\u8fc7\u5173\u5566\uff0c\u4f60\u5462\uff1f":Math.random()<.66?"\u5df2\u901a\u8fc7"+a.default.passLevel+"\u5173\uff0c\u4f60\u6562\u6765\u6311\u6218\u6211\u7684\u8bb0\u5f55\u5417\uff1f":"\u7b2c"+String(a.default.passLevel+1)+"\u5173\u4e5f\u592a\u96be\u5566\uff01\u4e0d\u4fe1\u4f60\u80fd\u8fc7\uff01";case 3:case"3":return console.log("--------------------------3"),Math.random()<.5?"\u7b2c"+a.default.passLevel+"\u5173\uff0c\u6210\u529f\u653b\u514b\u96be\u5173\uff01":"\u636e\u8bf4\u7b2c"+a.default.passLevel+"\u5173\u65e0\u4eba\u80fd\u8fc7\uff0c\u9664\u4e86\u6211\uff01";case 4:case"4":return this.shareNum=Math.floor(Math.random()*this.shareInfo4.length),this.shareInfo4[this.shareNum];case 5:return this.shareNum=Math.floor(Math.random()*this.shareInfo5.length),this.shareInfo5[this.shareNum];case 0:default:return console.log("------------------default",e),this.getRandomTitle()}},e.getRandomImageUrl=function(){this.shareNum=Math.floor(Math.random()*this.shareImg.length);var e=this.shareImg[this.shareNum].url;return this.lastShareIdInfo.img=this.shareImg[this.shareNum].id,console.log("url",e),e},e.shareBundle="subPackage1",e.shareInfo=[{id:0,title:"\u96be\u5ea6\u597d\u9ad8\u554a\uff0c\u73a9\u4e2a\u9524\u5b50\uff01",url:"https://mmocgame.qpic.cn/wechatgame/E3ZoxTJGu5wFrZjpx0icsdgEcebpAiaicSHicSyWwg4xqBv39GtHCia90RKw8LzskogvO/0"},{id:1,title:"\u4f60\u8fc7\u5f97\u4e86\u5417\uff1f\u6211\u73a9\u5f97\u8d3c6",url:"https://mmocgame.qpic.cn/wechatgame/TOaHnNtRUyjzXLBcIkujA9sxXOVFb4MtHzUibJuvrQeRtUDHl6AGibLQYibwliaEQj8k/0"},{id:2,title:"\u8fd9\u5173\u6211\u8fc7\u4e0d\u53bb\u4e86\uff0c\u5feb\u6765\u5e2e\u5e2e\u6211\uff01",url:"https://mmocgame.qpic.cn/wechatgame/h08jWsljIib5JnCU950Biarkmns9F4bAADBbADWAhnQLSxwZVs6GYW6nKcyjQ1YpZK/0"},{id:3,title:"\u53ea\u67090.1%\u7684\u4eba\u80fd\u901a\u5173\uff0c\u73bb\u7483\u5fc3\u614e\u5165",url:"https://mmocgame.qpic.cn/wechatgame/LY1QzVuowKYNU7m0icph1dRtLDnEKU5dKwrNicyzuH9vIibbWvp0rFAlaXUONRWQZqk/0"},{id:4,title:"\u8fd9\u4e48\u591a\u5e74\u667a\u5546\u6709\u6ca1\u6709\u6da8\uff0c\u6709\u6ca1\u6709\u8ba4\u771f\u5b66\u4e60",url:"https://mmocgame.qpic.cn/wechatgame/aC8WlIw6574BwEgggiaObCsTY7dGxqwEVdRedcr3yeiaqRqWic0tfTicjPc1IiavYSFJh/0"},{id:5,title:"\u96be\u5ea6\u6ca1\u8c03\uff01\u6709\u65f6\u5019\u81ea\u5df1\u539f\u56e0\u597d\u5427",url:"https://mmocgame.qpic.cn/wechatgame/E3ZoxTJGu5wFrZjpx0icsdgEcebpAiaicSHicSyWwg4xqBv39GtHCia90RKw8LzskogvO/0"},{id:6,title:"\u8d85\u89e3\u538b\u6253\u87ba\u4e1d\u6e38\u620f\uff0c\u4e0d\u6765\u8bd5\u8bd5\u5417\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/h08jWsljIib5JnCU950Biarkmns9F4bAADBbADWAhnQLSxwZVs6GYW6nKcyjQ1YpZK/0"},{id:7,title:"\u8fd9\u4e2a\u87ba\u4e1d\u600e\u4e48\u5c31\u62e7\u8fdb\u4e0d\u53bb\u5462\uff1f",url:"https://mmocgame.qpic.cn/wechatgame/aC8WlIw6574BwEgggiaObCsTY7dGxqwEVdRedcr3yeiaqRqWic0tfTicjPc1IiavYSFJh/0"}],e.shareImg=[{id:0,url:"https://mmocgame.qpic.cn/wechatgame/DenSJSSOQL8vn0dDMpziaPBYkpOBDgUbNzObJMhWUzcyHnoTjAs9aKuzpgg7myoBs/0"},{id:1,url:"https://mmocgame.qpic.cn/wechatgame/OALhoSZsk95ibibhplS9OMic3SMaJoy0fLaDGTNtB5uB9HbRbNO03IrruxO0ZmNtqsia/0"},{id:2,url:"https://mmocgame.qpic.cn/wechatgame/O9XVYuSq1ib3pyHJSrRuiciaJQpCmZ54ejBk6D1dv97fHhBSKUeHkhspdroxEDQV67d/0"},{id:3,url:"https://mmocgame.qpic.cn/wechatgame/CiaBJgXpVO7nXX3SEvrK0tepXXED2lfOjIaH2pic0fz399TibhCoXunonYx7qST6IVO/0"},{id:4,url:"https://mmocgame.qpic.cn/wechatgame/M2raOqfYP7AnicTe0033Qbeia7mes61ypyApG1cot2zUJ687Ta7r7H5bXFW6NA4IRI/0"},{id:5,url:"https://mmocgame.qpic.cn/wechatgame/UVqiaPRWIJRfo6HMfAUWKO9LQDAscMraAef5Eia9xvYr34TqIbAe207mcNqM1D4UvF/0"},{id:6,url:"https://mmocgame.qpic.cn/wechatgame/T0Q3sTU5dpmYr02oFpJ7EFiaQxLSTNWGzAeZrOagMYia6LhqibjMRVnJqoHoM5Y3sl8/0"},{id:7,url:"https://mmocgame.qpic.cn/wechatgame/D2t9X5RxjOTiatKHIG4rP8xTicoT4a5PAdenyicQhINrnFYSyxUQAUEYp9phkmVzZp5/0"},{id:8,url:"https://mmocgame.qpic.cn/wechatgame/edAxxVGlqsuG7vGxlzR07nGyI7C5scCAVckC6GBVbaPic2jKtE7Or0zfkIictCy4ic5/0"},{id:9,url:"https://mmocgame.qpic.cn/wechatgame/SfNlq8dZ5LKeVRXtpYWKhpCJQDN6wktfK91HFPr3VS3w6fDKmAOrqdWUoAbnfMRic/0"},{id:10,url:"https://mmocgame.qpic.cn/wechatgame/hjV4ib2q6iaNwbsfKD3MqJHPlttUmF6tIwX4wxek8UtMIVMx03AhFvLvic2iaA81MVZ3/0"},{id:11,url:"https://mmocgame.qpic.cn/wechatgame/GbzeRUHia79rBtV1Whd4F6RzZV78pLh4EtIfqf7gHntYWKtPSWQgYKPeXWmUceRdX/0"},{id:12,url:"https://mmocgame.qpic.cn/wechatgame/r6J49jhXnuqJX818WxZsViayicpCP65rQKpJjVqZo039jT16Lc1Nva1u8DVSoJib0RA/0"},{id:13,url:"https://mmocgame.qpic.cn/wechatgame/2Ay8LR9JgI32g5oOwwLm8IRFuHpK5R9KhR9HcPgU6Wg0DKIAMDAhVX0iaFmpq0OEZ/0"},{id:14,url:"https://mmocgame.qpic.cn/wechatgame/TRqMRkia3a3dugaOiaK5JBHqYaNXgoKUnOAcJcls91Txy8N53gZXDLElRRqqOc1f0K/0"},{id:15,url:"https://mmocgame.qpic.cn/wechatgame/60741QOedsRQAnW6mkGqJUhmfwxu7srrtduAGx3maR1hKLdRcGtia1fMzXMD1lEsu/0"},{id:16,url:"https://mmocgame.qpic.cn/wechatgame/3sPjsDvyOOrkJ0j3Qem4p1kkvKfVywLgqFOKLEjtXUL5iamVNRpQ6pIxpjzhUHcxw/0"},{id:17,url:"https://mmocgame.qpic.cn/wechatgame/w8tjwU4MHbibQX8AQCTUXUKdMx6Sk6bic1Pu1q6DADyGMUgKCfNcSaRGjzRkMo82Qu/0"},{id:18,url:"https://mmocgame.qpic.cn/wechatgame/jiauNNGYzHKibQqrCvzsCHfcIwDCm7XVV3ehia0jbltMwCDicrSiayF2P4PzrsmaaWicld/0"},{id:19,url:"https://mmocgame.qpic.cn/wechatgame/C0qdFbnctwPyAdJZEFibBgqrc9mUicHMYU07dZbuLLuQib4Iz8YktwpEZcwQe5FwLNH/0"}],e.shareInfo1=["\u53ef\u7b97\u662f\u628a\u87ba\u4e1d\u6253\u5b8c\u4e86\uff0c\u770b\u770b\u6211\u7684\u540d\u6b21\u5427\uff01","\u53c8\u6572\u6389\u4e86\u51e0\u5757\u6728\u677f\uff0c\u6765\u6bd4\u6bd4\u770b\u8c01\u6572\u7684\u591a\uff01","\u6211\u540d\u6b21\u53c8\u63d0\u5347\u4e86\uff0c\u6765\u56f4\u89c2\u56f4\u89c2\uff01","\u54c8\u54c8\u54c8\u54c8\u54c8\uff0c\u6211\u4e0a\u699c\u5566\uff01"],e.shareInfo2=["\u771f\u4ee5\u4e3a\u968f\u4fbf\u778e\u70b9\u70b9\u5c31\u80fd\u8fc7\u5173\u554a","\u8fd9\u6e38\u620f\u5de8\u96be\uff0c\u80fd\u5168\u901a\u5173\u5c31\u670d\u4f60\uff01","\u8fd9\u4e2a\u6253\u87ba\u4e1d\u7684\u6e38\u620f\u5f88\u89e3\u538b\uff0c\u5feb\u6765\u73a9\uff01","\u5c0f\u4e11\u7adf\u662f\u6211\u81ea\u5df1\uff01\u5feb\u5e2e\u5e2e\u6211\u8fc7\u5173\u5427\uff01"],e.shareInfo3=["\u7b2c"+a.default.passLevel+"\u5173\uff0c\u6210\u529f\u653b\u514b\u96be\u5173\uff01","\u636e\u8bf4\u7b2c"+a.default.passLevel+"\u5173\u65e0\u4eba\u80fd\u8fc7\uff0c\u9664\u4e86\u6211\uff01"],e.shareInfo4=["\u592a\u53ef\u60dc\u4e86\uff0c\u518d\u7ed9\u6211\u4e00\u5206\u949f\u4e00\u5b9a\u80fd\u8fc7\uff01","\u6728\u677f\u90fd\u53e0\u5230\u4e00\u8d77\u5566\uff0c\u8fd9\u73a9\u4e2a\u9524\u5b50\uff1f\uff01"],e.shareInfo5=["\u901a\u5173\u65f6\u95f4\u4e0d\u8db3\u4e86\uff0c\u5feb\u6765\u5e2e\u5e2e\u6211\uff01","\u901a\u5173\u6b65\u6570\u4e0d\u8db3\u4e86\uff0c\u5feb\u6765\u5e2e\u5e2e\u6211\uff01","\u8fd9\u6e38\u620f\u73a9\u4e86\u4e00\u4e0b\u5348\u4e86\uff0c\u6839\u672c\u505c\u4e0d\u4e0b\u6765\uff01","\u8001\u5a46\u665a\u4e0a\u4e0d\u7761\u89c9\uff0c\u5c45\u7136\u662f\u5728\u73a9\u9524\u5b50\uff1f\uff01","\u636e\u8bf4\u53ea\u6709\u667a\u5546190\u4ee5\u4e0a\u7684\u4eba\u624d\u80fd\u901a\u5173","\u8fd9\u4e2a\u6e38\u620f\u6709\u6bd2\uff0c1\u5206\u949f\u4e0a\u624b\uff0c3\u5206\u949f\u4e0a\u5934\uff01","\u4f60\u8fd8\u8fc7\u4e0d\u4e86\u5173\uff1f\u6709\u65f6\u5019\u662f\u81ea\u5df1\u7684\u539f\u56e0\u597d\u5427","\u4e00\u4e2a\u4eba\u624b\u901f\u4e0d\u591f\uff0c\u4f60\u4e5f\u4e00\u8d77\u6765\u5427\uff01","\u6b7b\u4e86\u5566\uff01\u90fd\u602a\u4f60\u4e0d\u5e2e\u6211\uff01","\u6211\u4e0d\u884c\u4e86\uff0c\u4f60\u884c\u4f60\u4e0a\uff01","\u7b49\u8fc7\u4e86\u8fd9\u4e00\u5173\uff0c\u6211\u5c31\u53bb\u7761\u89c9\uff01","10\u5e74\u8001\u53f8\u673a\u90fd\u8fc7\u4e0d\u4e86\uff0c\u4e0d\u4fe1\u4f60\u6765\u8bd5\u8bd5","\u597d\u73a9\u4e0a\u5934\u8fd8\u89e3\u538b\u7684\u6e38\u620f\uff0c\u4e0d\u6765\u8bd5\u8bd5\u5417","\u770b\u7740\u4e0d\u96be\uff0c\u600e\u4e48\u6211\u5c31\u662f\u8fc7\u4e0d\u4e86\u5173\u5462\uff1f","\u96be\u5ea6\u6ca1\u8c03\uff01\u6709\u65f6\u5019\u662f\u81ea\u5df1\u7684\u539f\u56e0\u597d\u5427","\u53ea\u67090.1%\u7684\u4eba\u80fd\u901a\u5173\uff0c\u73bb\u7483\u5fc3\u614e\u5165","\u8fd9\u4e48\u591a\u5e74\u667a\u5546\u6709\u6ca1\u6709\u6da8\uff0c\u6709\u6ca1\u6709\u8ba4\u771f\u5b66\u4e60","\u8d85\u89e3\u538b\u6253\u87ba\u4e1d\u6e38\u620f\uff0c\u4e0d\u6765\u8bd5\u8bd5\u5417\uff1f","\u8fd9\u4e2a\u87ba\u4e1d\u600e\u4e48\u5c31\u62e7\u8fdb\u4e0d\u53bb\u5462\uff1f","\u8fd9\u5173\u6211\u8fc7\u4e0d\u53bb\u4e86\uff0c\u5feb\u6765\u5e2e\u5e2e\u6211\uff01"],e.shareNum=-1,e.lastShareIdInfo={title:0,img:0},e}();o.default=n,cc._RF.pop()},{commonData:"commonData"}],Steel:[function(e,t,o){"use strict";cc._RF.push(t,"2efed/Ih19OkaZw0TDz972Z","Steel"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("commonData")),c=e("GameManager"),r=e("CompGameManager"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(){i.default.GameMode==i.GAME_MODE_ENUM.GARAPHICAL?this.node.y<=-(967+this.node.height/2)&&(this.node.removeFromParent(),this.node.destroy(),i.default.TotalSteel--,c.default.instance.checkSteel()):this.node.parent.y<=-(967+this.node.height/2)&&(this.node.parent.removeFromParent(),this.node.parent.destroy(),i.default.TotalSteel--,i.default.GameMode==i.GAME_MODE_ENUM.COMPETITION?r.default.instance.checkSteel():c.default.instance.checkSteel())},__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{CompGameManager:"CompGameManager",GameManager:"GameManager",commonData:"commonData"}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"68d34HP+e1CKpJ5mp7VPDMY","UIManager"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("Game"),n=e("startView"),i=e("commonData"),c=e("newSkinView"),r=cc._decorator,s=r.ccclass,l=r.property,u=function(e){function t(){var t=e.call(this)||this;return t.exitPnl=null,t.setPnl=null,t.pausePnl=null,t.revivePnl=null,t.careerPnl=null,t.newSkinPnl=null,t.achievementPnl=null,t.gameOverPnl=null,t.getSkinPnl=null,t.giftPnl=null,t.areaPnl=null,t.gzhPnl=null,t.showScrewPnl=null,t.loadUI=!1,t.PnlNode=null,t.UIname=["exitPnl","setPnl","pausePnl","revivePnl","careerPnl","newSkinPnl","achievementPnl","getSkinPnl","gzhPnl"],o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.setView()},t.prototype.setView=function(){var e=this;a.default.resManager.loadBundleRes("view","giftPnl",cc.Prefab).catch(function(){console.error("\u52a0\u8f7dgiftPnl\u5931\u8d25")}).then(function(t){e.giftPnl=cc.instantiate(t),e.giftPnl.setParent(e.PnlNode.parent),e.giftPnl.name="giftPnl",n.default.instance.changeGift(),console.warn("\u52a0\u8f7dgiftPnl\u6210\u529f")}),-1==i.default.myProvinceIndex&&a.default.resManager.loadBundleRes("view","areaPnl",cc.Prefab).catch(function(){console.error("\u52a0\u8f7dareaPnl\u5931\u8d25")}).then(function(t){e.areaPnl=cc.instantiate(t),e.areaPnl.setParent(e.PnlNode),e.areaPnl.active=!1,console.warn("\u52a0\u8f7dareaPnl\u6210\u529f")}),this.loadView(0)},t.prototype.loadView=function(e){var t=this,o=this.UIname[e];a.default.resManager.loadBundleRes("view",o,cc.Prefab).catch(function(){console.error("\u52a0\u8f7d"+o+"\u5931\u8d25")}).then(function(a){var n=cc.instantiate(a);n.setParent(t.PnlNode),n.active=!1,console.warn("\u52a0\u8f7d"+o+"\u6210\u529f"),e<t.UIname.length-1?t.loadView(e+1):(t.findView(),t.loadUI=!0)})},t.prototype.findView=function(){n.default.instance.preloadlevel(),this.exitPnl=this.PnlNode.getChildByName("exitPnl"),this.setPnl=this.PnlNode.getChildByName("setPnl"),this.pausePnl=this.PnlNode.getChildByName("pausePnl"),this.revivePnl=this.PnlNode.getChildByName("revivePnl"),this.careerPnl=this.PnlNode.getChildByName("careerPnl"),this.newSkinPnl=this.PnlNode.getChildByName("newSkinPnl"),this.achievementPnl=this.PnlNode.getChildByName("achievementPnl"),this.giftPnl=this.PnlNode.parent.getChildByName("giftPnl"),-1==i.default.myProvinceIndex&&(this.areaPnl=this.PnlNode.getChildByName("areaPnl")),this.gameOverPnl=this.PnlNode.getChildByName("gameOverPnl"),this.getSkinPnl=this.PnlNode.getChildByName("getSkinPnl"),this.gzhPnl=this.PnlNode.getChildByName("gzhPnl"),c.default.instance.init()},t.prototype.loadShowScrewPnl=function(){var e=this;if(null==this.showScrewPnl){var t=this;a.default.resManager.loadBundleRes("view","showScrewPnl",cc.Prefab).catch(function(){console.error("\u52a0\u8f7dshowScrewPnl\u5931\u8d25")}).then(function(o){var a=cc.instantiate(o);a.setParent(e.PnlNode),a.active=!1,console.warn("\u52a0\u8f7dshowScrewPnl\u6210\u529f"),t.showScrewPnl=a})}},t.prototype.showExitPnl=function(e){var t=this;this.exitPnl&&(e?(this.exitPnl.active=!0,this.exitPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.exitPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.exitPnl.active=!1},.2)))},t.prototype.showSetPnl=function(e){var t=this;this.setPnl&&(e?(this.setPnl.active=!0,this.setPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.setPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.setPnl.active=!1},.2)))},t.prototype.showPausePnl=function(e){var t=this;this.pausePnl&&(e?(this.pausePnl.active=!0,this.pausePnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.pausePnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.pausePnl.active=!1},.2)))},t.prototype.showRevivePnl=function(e){var t=this;this.revivePnl&&(e?(this.revivePnl.active=!0,this.revivePnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.revivePnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.revivePnl.active=!1},.2)))},t.prototype.showGameOverPnl=function(e){var t=this;this.gameOverPnl&&(e?(this.gameOverPnl.active=!0,this.gameOverPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.gameOverPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.gameOverPnl.active=!1},.2)))},t.prototype.showCareerPnl=function(e){var t=this;this.careerPnl&&(e?(this.careerPnl.active=!0,this.careerPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.careerPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.careerPnl.active=!1},.2)))},t.prototype.showSkinPnl=function(e){var t=this;this.newSkinPnl&&(e?(this.newSkinPnl.active=!0,this.newSkinPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.newSkinPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.newSkinPnl.active=!1},.2)))},t.prototype.showGetSkinPnl=function(e){var t=this;this.getSkinPnl&&(e?(this.getSkinPnl.active=!0,this.getSkinPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.getSkinPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.getSkinPnl.active=!1},.2)))},t.prototype.showAchievementPnl=function(e){var t=this;this.achievementPnl&&(e?(this.achievementPnl.active=!0,this.achievementPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.achievementPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.achievementPnl.active=!1},.2)))},t.prototype.showShowScrewPnl=function(e){var t=this;this.showScrewPnl&&(e?(this.showScrewPnl.active=!0,this.showScrewPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.showScrewPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.showScrewPnl.active=!1},.2)))},t.prototype.showGZHPnl=function(e){var t=this;this.gzhPnl&&(e?(this.gzhPnl.active=!0,this.gzhPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):(this.gzhPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){t.gzhPnl.active=!1},.2)))},t.instance=null,__decorate([l(cc.Node)],t.prototype,"PnlNode",void 0),o=__decorate([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{Game:"Game",commonData:"commonData",newSkinView:"newSkinView",startView:"startView"}],achievementPopupView:[function(e,t,o){"use strict";cc._RF.push(t,"130a7Ic4jdFU6wr2p6LEzLP","achievementPopupView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("platform"),i=e("UIManager"),c=cc._decorator,r=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.popUp=null,t.mask=null,t.medalSprite=[],t.clickNum=0,t.AchieveIndex=-1,t.isshowNext=!1,t.goalName=["\u521d\u51fa\u8305\u5e90","\u62c6\u677f\u80fd\u624b","\u87ba\u4e1d\u4e13\u5bb6","\u9524\u5b50\u5927\u5e08"],t}return __extends(t,e),t.prototype.start=function(){this.node.width=a.default.windowWidth,this.node.height=a.default.windowHeight,this.mask.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.mask._touchListener.setSwallowTouches(!1)},t.prototype.onEnable=function(){var e=this;this.AchieveIndex=a.default.AchievementData.achievementGoal.indexOf(a.default.currLevel-1),a.default.isShowAchievement&&(this.AchieveIndex=0,this.isshowNext=!0,a.default.isShowAchievement=!1),this.scheduleOnce(function(){e.showAchievement()}),this.popUp.x=-a.default.windowWidth},t.prototype.showAchievement=function(){var e=this;this.init();var t=cc.moveTo(.4,cc.v2(-a.default.windowWidth/2,360));cc.tween(this.popUp).then(t).start(),this.scheduleOnce(function(){e.closePopup()},10)},t.prototype.init=function(){n.reportPage("achieveMentPopupPage",a.default.currLevel);var e=a.default.AchievementData.achievementGoal[this.AchieveIndex];this.popUp.getChildByName("medal").getComponent(cc.Sprite).spriteFrame=this.medalSprite[this.AchieveIndex],this.popUp.getChildByName("name").getComponent(cc.Label).string=this.goalName[this.AchieveIndex],this.popUp.getChildByName("describe").getComponent(cc.Label).string="\u901a\u5173"+e+"\u4e2a\u5173\u5361",this.popUp.getChildByName("progress").children[1].getComponent(cc.Label).string=e+"/"+e,this.clickNum=0},t.prototype.onTouchStart=function(e){this.isClickInsidePopup(e.getLocation())?this.clickAchievementPopup():(this.clickNum++,this.clickNum>=2&&(this.closePopup(),this.clickNum=0))},t.prototype.isClickInsidePopup=function(e){var t=this.popUp.convertToNodeSpaceAR(e);return this.popUp.getBoundingBox().contains(t)},t.prototype.clickAchievementPopup=function(){var e=a.default.currLevel;0==a.default.isgameing&&(e=0),n.reportButton("achieveMentPopupPage","achieveMentPopup",e,0),this.isshowNext=!1,this.showAchievementPnl(),this.closePopup()},t.prototype.closePopup=function(){var e=this,t=cc.moveTo(.2,cc.v2(-a.default.windowWidth,360)),o=!1;this.AchieveIndex+1<a.default.AchievementData.achievementGoal.length&&a.default.AchievementData.achievementGoal[this.AchieveIndex+1]<=a.default.passLevel&&(o=!0,this.AchieveIndex++),cc.tween(this.popUp).then(t).call(function(){o&&e.isshowNext?e.showAchievement():e.node.active=!1}).start()},t.prototype.showAchievementPnl=function(){i.default.instance.showAchievementPnl(!0);var e=a.default.currLevel;0==a.default.isgameing&&(e=0),n.reportPage("achievememtPage",e)},__decorate([s(cc.Node)],t.prototype,"popUp",void 0),__decorate([s(cc.Node)],t.prototype,"mask",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"medalSprite",void 0),__decorate([r],t)}(cc.Component);o.default=l,cc._RF.pop()},{UIManager:"UIManager",commonData:"commonData",platform:"platform"}],achievementView:[function(e,t,o){"use strict";cc._RF.push(t,"ed17dQUVpJDVKm6UqCKvQPL","achievementView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("BattleManager"),n=e("commonData"),i=e("PostUserData"),c=e("platform"),r=e("getSkinView"),s=e("UIManager"),l=e("showScrewView"),u=e("startView"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=e.call(this)||this;return t.achievementLabel=null,t.progressArr=[],o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){s.default.instance.loadShowScrewPnl()},t.prototype.onEnable=function(){this.init()},t.prototype.init=function(){this.achievementLabel.string="\u5df2\u5b8c\u6210\u6210\u5c31:"+this.getNumberOfAchievements()+"/4";for(var e=0;e<this.progressArr.length;e++){var t=n.default.passLevel<n.default.AchievementData.achievementGoal[e]?n.default.passLevel:n.default.AchievementData.achievementGoal[e];this.progressArr[e].getChildByName("tip").getComponent(cc.Label).string=t+"/"+n.default.AchievementData.achievementGoal[e],this.progressArr[e].getChildByName("mask").width=t/n.default.AchievementData.achievementGoal[e]*212}},t.prototype.getNumberOfAchievements=function(){for(var e=0,t=0;t<n.default.AchievementData.achievementGoal.length;t++)n.default.passLevel>=n.default.AchievementData.achievementGoal[t]&&e++;return e},t.prototype.clickclose=function(){var e=this,t=n.default.currLevel;0==n.default.isgameing&&(t=0),c.reportButton("achievementPage","closeBtn",t,0),this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1,u.default.instance.showGameClubBtn(!0)},.2)},t.prototype.clickGetReward=function(e,t){if(this.getNumberOfAchievements()+7<t)l.default.instance.showScrewSkin(t,"\u8fbe\u6210\u6210\u5c31\u5373\u53ef\u89e3\u9501\u8be5\u76ae\u80a4\uff01");else if(1!=n.default.screwSkinData.skinData[t]){var o=n.default.currLevel;0==n.default.isgameing&&(o=0),c.reportButton("achievementPage","getRewardBtn_"+t,o,0),n.default.screwSkinData.skinData[t]=1,a.default.instance.setArrData("screwSkinData"),""!=n.default.openId&&i.seletPostUserData(["little_man_skin"]),r.default.instance.initScrewSkinAni(t),r.default.instance.showGetSkinView()}else c.showTips("\u5df2\u83b7\u5f97\u8be5\u76ae\u80a4")},t.instance=null,__decorate([p(cc.Label)],t.prototype,"achievementLabel",void 0),__decorate([p(cc.Node)],t.prototype,"progressArr",void 0),o=__decorate([h],t)}(cc.Component);o.default=f,cc._RF.pop()},{BattleManager:"BattleManager",PostUserData:"PostUserData",UIManager:"UIManager",commonData:"commonData",getSkinView:"getSkinView",platform:"platform",showScrewView:"showScrewView",startView:"startView"}],android:[function(e,t,o){"use strict";cc._RF.push(t,"bfbf6Gqq3BPBZm9jjaZIDim","android"),Object.defineProperty(o,"__esModule",{value:!0}),o.onRewardAdFail=o.onRewardAdSuccess=o.showTips=o.showShare=o.showRewardAD=o.exitGame=o.createRewardedVideoAd=o.showInterstitialAd=o.showBannerAD=o.initAds=o.rewardAdFuncTar=o.rewardAdFailFunc=o.rewardAdSuccessFunc=void 0;var a=cc._decorator,n=(a.ccclass,a.property,"org/cocos2dx/javascript/AppActivity");window.Global_onRewardAdClose=function(e){cc.game.resume(),e?l():u(),o.rewardAdSuccessFunc=null},o.rewardAdSuccessFunc=null,o.rewardAdFailFunc=null,o.rewardAdFuncTar=null;var i=0,c=0;function r(){console.log("---lante---createRewardVideoAd"),jsb.reflection.callStaticMethod(n,"createRewardVideoAd","()V")}function s(e){jsb.reflection.callStaticMethod(n,"showTips","(Ljava/lang/String)V",e)}function l(){console.log("---lante---onRewardAdSuccess"),o.rewardAdSuccessFunc(o.rewardAdFuncTar),cc.game.resume()}function u(){console.log("---lante---onRewardAdFail"),s("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\uff01"),o.rewardAdFailFunc&&o.rewardAdFailFunc(o.rewardAdFuncTar),cc.game.resume()}o.initAds=function(){console.log("---lante---\u521d\u59cb\u5316\u5e7f\u544a"),r()},o.showBannerAD=function(e){console.log("---lante---showBanner"),jsb.reflection.callStaticMethod(n,"showBannerAd","(Z)V",e)},o.showInterstitialAd=function(){var e=(new Date).getTime();e-c>18e4?(c=e,console.log("---lante---showIFullAd"),jsb.reflection.callStaticMethod(n,"showFullAd","()V")):e-i>75e3&&(i=e,console.log("---lante---showInterstitialAd"),jsb.reflection.callStaticMethod(n,"showInterstitialAd","()V"))},o.createRewardedVideoAd=r,o.exitGame=function(){console.log("---lante---exitGame"),jsb.reflection.callStaticMethod(n,"exitGame","()V")},o.showRewardAD=function(e,t,a){return void 0===t&&(t=null),void 0===a&&(a=null),new Promise(function(i,c){o.rewardAdSuccessFunc=function(){e&&e(),i(null)},o.rewardAdFailFunc=function(){t&&t(),c(null)},o.rewardAdFuncTar=a,console.log("---lante---showRewardedVideoAd"),jsb.reflection.callStaticMethod(n,"showRewardedVideoAd","()V"),cc.game.pause()})},o.showShare=function(){jsb.reflection.callStaticMethod(n,"showShare","()V")},o.showTips=s,o.onRewardAdSuccess=l,o.onRewardAdFail=u,cc._RF.pop()},{}],areaView:[function(e,t,o){"use strict";cc._RF.push(t,"3f9a5U4eAtE5q6dWWyBdXCc","areaView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,c=e("commonData"),r=e("PostUserData"),s=function(e){function t(){var t=e.call(this)||this;return t.provincePrefab=null,t.content=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.initProvinceItem()},t.prototype.initProvinceItem=function(){for(var e=0;e<c.default.provinceArr.length;e++){var t=cc.instantiate(this.provincePrefab);t.getChildByName("label").getComponent(cc.Label).string=c.default.provinceArr[e],t.name=""+e,t.setParent(this.content)}},t.prototype.chooseProvince=function(e){c.default.myProvinceIndex=e,cc.sys.localStorage.setItem("myProvinceIndex",e),r.seletPostUserData(["area"]),this.closeAreaView()},t.prototype.closeAreaView=function(){var e=this;this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1},.2)},t.instance=null,__decorate([i(cc.Prefab)],t.prototype,"provincePrefab",void 0),__decorate([i(cc.Node)],t.prototype,"content",void 0),o=__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{PostUserData:"PostUserData",commonData:"commonData"}],boardSKin:[function(e,t,o){"use strict";cc._RF.push(t,"73caegcPdZN6JBgmw/OTRRi","boardSKin"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("newSkinView"),n=e("commonData"),i=cc._decorator,c=i.ccclass,r=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.clickUse=function(){var e=parseInt(this.node.name);0!=n.default.boardSkinData.skinData[e]&&n.default.boardSkinData.currentSkin!=e&&a.default.instance.changeBoardSkin(e)},t.prototype.clickActive=function(){var e=parseInt(this.node.name);a.default.instance.changeActive(e)},__decorate([c],t)}(cc.Component));o.default=r,cc._RF.pop()},{commonData:"commonData",newSkinView:"newSkinView"}],careerView:[function(e,t,o){"use strict";cc._RF.push(t,"cfdb1P2X95Fq516CuLSMml9","careerView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("config"),i=e("startView"),c=cc._decorator,r=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataLabel=[],t.userAvatar=null,t.userName=null,t}return __extends(t,e),t.prototype.onEnable=function(){this.init()},t.prototype.init=function(){this.dataLabel[0].string=a.default.passLevel+"",this.dataLabel[1].string=a.default.AchievementData.TotalRemoveSteel+"";var e=a.default.boardSkinData.skinData.filter(function(e){return 1==e});this.dataLabel[2].string=e.length+"";var t=a.default.screwSkinData.skinData.filter(function(e){return 1==e});this.dataLabel[3].string=t.length+"";for(var o=0,i=0;i<a.default.boardSkinData.piece.length;i++)o+=a.default.boardSkinData.piece[i];if(isNaN(o)&&(o=0),this.dataLabel[4].string=o+"",n.currentPlatform==n.platformEnum.toutiao&&window.tt)if(0==a.default.getTTUserInfo)this.userName.string="\u533f\u540d\u7528\u6237";else{this.userName.string=a.default.UserNickName;var c=tt.createImage();this.createUserAvatar(c)}else n.currentPlatform==n.platformEnum.wechat&&window.wx&&(0==a.default.getWxUserInfo?this.userName.string="\u533f\u540d\u7528\u6237":(this.userName.string=a.default.UserNickName,c=wx.createImage(),this.createUserAvatar(c)))},t.prototype.createUserAvatar=function(e){var t=this;e.src=a.default.UserAvatarUrl,e.width=105,e.height=105,e.onload=function(){console.log("\u7528\u6237\u5934\u50cf\u52a0\u8f7d\u6210\u529f");var o=new cc.SpriteFrame,a=new cc.Texture2D;a.initWithElement(e),o.setTexture(a),t.userAvatar.spriteFrame=o}},t.prototype.clickclose=function(){var e=this;this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1,i.default.instance.showGameClubBtn(!0)},.2)},__decorate([s({type:[cc.Label],tooltip:"\u6570\u636e\u5c55\u793alabel\n 0\u5173\u5361\u8fdb\u5ea6 1\u7d2f\u8ba1\u6d88\u9664 2\u957f\u677f\u6761\u7eb9 3\u89d2\u8272\u670d\u88c5 4\u76ae\u80a4\u788e\u7247"})],t.prototype,"dataLabel",void 0),__decorate([s(cc.Sprite)],t.prototype,"userAvatar",void 0),__decorate([s(cc.Label)],t.prototype,"userName",void 0),__decorate([r],t)}(cc.Component);o.default=l,cc._RF.pop()},{commonData:"commonData",config:"config",startView:"startView"}],chooseView:[function(e,t,o){"use strict";cc._RF.push(t,"2f7c58z3JBHLY8eVUuvnN9p","chooseView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("startView"),i=cc._decorator,c=i.ccclass,r=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chooseModePnl=null,t.chooseLevelPnl=null,t.LvEditBox=null,t.maxLevelTipsLabel=null,t.loadLv=0,t.maxLevel=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.chooseModePnl.active=!0,this.chooseLevelPnl.active=!1},t.prototype.clickModeBtn=function(e,t){switch(console.log("-------------data",t),parseInt(t)){case 0:a.default.GameMode=a.GAME_MODE_ENUM.NORMAL,this.maxLevelTipsLabel.string="\u6700\u5927\u5173\u5361\uff1a"+a.default.maxLv,this.maxLevel=a.default.maxLv;break;case 1:a.default.GameMode=a.GAME_MODE_ENUM.GARAPHICAL,this.maxLevelTipsLabel.string="\u6700\u5927\u5173\u5361\uff1a"+a.default.graphicalMaxLv,this.maxLevel=a.default.graphicalMaxLv;break;case 2:a.default.GameMode=a.GAME_MODE_ENUM.ELIMINATE,this.maxLevelTipsLabel.string="\u6700\u5927\u5173\u5361\uff1a"+a.default.eliminateMaxLv,this.maxLevel=a.default.eliminateMaxLv;break;case 3:a.default.GameMode=a.GAME_MODE_ENUM.UNSCREW,this.maxLevelTipsLabel.string="\u6700\u5927\u5173\u5361\uff1a"+a.default.unscrewMaxLv,this.maxLevel=a.default.unscrewMaxLv}this.chooseModePnl.active=!1,this.chooseLevelPnl.active=!0},t.prototype.clickLoadLv=function(){if(!(this.loadLv>this.maxLevel&&this.loadLv<1e4)){switch(a.default.currLevel=this.loadLv,a.default.GameMode){case a.GAME_MODE_ENUM.NORMAL:n.default.instance.clickPlay(1);break;case a.GAME_MODE_ENUM.GARAPHICAL:n.default.instance.clickGraphical(1);break;case a.GAME_MODE_ENUM.UNSCREW:n.default.instance.clickUnscrewBtn(1);break;case a.GAME_MODE_ENUM.ELIMINATE:n.default.instance.clickEliminate(1)}this.clickClose()}},t.prototype.clickClose=function(){this.node.active=!1},t.prototype.changeBoxString=function(){this.loadLv=parseInt(this.LvEditBox.string)},__decorate([r(cc.Node)],t.prototype,"chooseModePnl",void 0),__decorate([r(cc.Node)],t.prototype,"chooseLevelPnl",void 0),__decorate([r(cc.EditBox)],t.prototype,"LvEditBox",void 0),__decorate([r(cc.Label)],t.prototype,"maxLevelTipsLabel",void 0),__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{commonData:"commonData",startView:"startView"}],commonData:[function(e,t,o){"use strict";var a;cc._RF.push(t,"c00b1AkpJ5Gk5zqLgmbhfFB","commonData"),Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_MODE_ENUM=void 0;var n,i=cc._decorator,c=i.ccclass;i.property,(n=a=o.GAME_MODE_ENUM||(o.GAME_MODE_ENUM={})).NORMAL="normal",n.CHALLENGE="challenge",n.COMPETITION="competition",n.GARAPHICAL="graphical",n.UNSCREW="unscrew",n.ELIMINATE="Eliminate",n.EDIT="edit";var r=function(){function e(){}var t;return t=e,e.getCompWholeSteel=function(){t.wholeSteelNum=0;for(var e=0;e<t.CompMaxLevel;e++)switch(t.CompLevelType[e]){case"simple":t.wholeSteelNum+=24;break;case"hard":t.wholeSteelNum+=28;break;case"difficult":t.wholeSteelNum+=30}},e.randomlyGenerateMatchData=function(e){for(var o={nick_name:"\u771f\u96be\u53d6\u540d\u5b57",pass_time:"220",del_board_num:"88",head_url:"",is_pass:"false",identity:"1"},a=Math.floor(Math.random()*this.randomNickNameArr.length);-1!=this.randomAvatar.indexOf(String(a));)a=Math.floor(Math.random()*this.randomNickNameArr.length);this.randomAvatar.push(String(a)),o.nick_name=this.randomNickNameArr[a];for(var n=Math.floor(40*Math.random());-1!=this.randomAvatar.indexOf(n);)n=Math.floor(40*Math.random());if(this.randomAvatar.push(n),o.head_url="local_"+n,Math.random()<.8){o.is_pass="false",o.del_board_num=String(Math.floor(.33*Math.random()*t.wholeSteelNum+.6*t.wholeSteelNum));var i=Math.random();o.pass_time=i<.15?"360":i<.3?"330":i<.5?"300":String(Math.floor(210*Math.random()+150))}else o.is_pass="true",o.del_board_num=t.wholeSteelNum+"",o.pass_time=String(Math.floor(120*Math.random()+240));this.Random_Rivals.rivals[e].nick_name=o.nick_name,this.Random_Rivals.rivals[e].head_url=o.head_url,this.Random_Rivals.rivals[e].del_board_num=o.del_board_num,this.Random_Rivals.rivals[e].is_pass=o.is_pass,this.Random_Rivals.rivals[e].pass_time=o.pass_time},e.musicOn=!0,e.soundOn=!0,e.vibrateOn=!0,e.isgameing=!1,e.isPause=!1,e.isShare=!1,e.passedNovice=!0,e.isFirstGame=!1,e.windowWidth=750,e.windowHeight=1360,e.GameMode=a.NORMAL,e.goldNum=0,e.maxLv=10,e.currLevel=1,e.levelConfig={},e.currentLvConfig={},e.passLevel=0,e.gameTime=300,e.gamingtime=0,e.isAddTime=!1,e.isLoadLevelData=!1,e.upScrew="",e.screwNum=0,e.TotalSteel=0,e.LevelSteel=0,e.gamelevel=null,e.isUnLock=!1,e.isDig=!1,e.isPullOut=!1,e.isGetAnswer=!1,e.version="1.4.2",e.useItemNum=[0,0,0,0],e.challengePool=[6,8,10,12,16,18,20,22,32,34,36,38,40,44,48,52,54,62],e.lastChallengeLv=[0,0],e.isGetSidebarCardGift=!1,e.formSidebarCard=!1,e.canUseSidebarCard=!1,e.AchievementData={TotalRemoveSteel:0,achievementGoal:[10,50,100,200],claimAchievementRewards:[0,0,0,0]},e.isShowAchievement=!1,e.graphicalLevelConfig={},e.graphicalMaxLv=101,e.graphicalTestLevel=[],e.isWatchGraphicalAd=!1,e.graphycalCloneNode=null,e.chooseLevelConfig=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,29,30,31,32,33,34,35,36,37,38,39,40,42,28,41,45,46,49,50,51,52,53,54,43,44,47,48,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89],e.unscrewLevelConfig={},e.unscrewMaxLv=1,e.isWatchUnscrewAd=!1,e.Unscrew_isUnlock=!1,e.eliminateMaxLv=16,e.isWatchEliminateAd=!1,e.eliminatePropUseNum=[0,0,0,0],e.eliminateScrewNum=0,e.eliminateWholeScrewNum=0,e.eliminatePasslevel=0,e.eliminateScrewColor={5:[2,1,0,1,1,2,1],9:[3,2,2,3,2,1,1],10:[2,2,1,2,2,0,2],11:[1,2,2,2,1,1,0],12:[2,2,1,2,1,2,0],13:[1,3,2,1,3,1,3],14:[4,4,3,2,1,1,1],16:[3,2,1,2,1,1,0],17:[2,2,1,2,1,2,0],18:[2,2,1,2,2,0,2],19:[2,3,0,2,1,2,2],20:[1,3,2,1,3,1,3],25:[1,2,2,1,2,1,2]},e.boardSkinData={currentSkin:0,skinData:[1,0,0,0,0,0,0,0,0,0,0,0,0],skinProgressTarget:[0,1,3,6,10,14,20],skinProgress:0,piece:[0,0,0,0,0,0,0,0,0,0,0,0,0]},e.skinImgArr=[],e.skinPieceImgArr=[],e.lastgetSkin=[],e.screwSkinData={currentSkin:0,skinData:[1,0,0,0,0,0,0,0,0,0,0,0],skinProgressTarget:[0,2,8,16,24,36,40,50],skinProgress:0},e.screwSkinName=["a","a3","a2","xizhuang","heimao","fashi","tuzi","yazi","a7","a4","a5","a6"],e.getWxUserInfo=!1,e.getWxFriendInfo=!1,e.getWxInfo=!1,e.shareUseProp=0,e.isShareUseProp=!1,e.watchVideoTimes=0,e.getTTUserInfo=!1,e.ContinuousLoginDays=0,e.loginDay=0,e.UserAvatarUrl="",e.UserNickName="",e.openId="",e.sceneId="",e.subscribePassLevel=0,e.isSubscribe=!1,e.provinceArr=["\u5b89\u5fbd","\u6fb3\u95e8","\u5317\u4eac","\u91cd\u5e86","\u798f\u5efa","\u7518\u8083","\u5e7f\u4e1c","\u5e7f\u897f","\u8d35\u5dde","\u6d77\u5357","\u6cb3\u5317","\u6cb3\u5357","\u9ed1\u9f99\u6c5f","\u6e56\u5317","\u6e56\u5357","\u5409\u6797","\u6c5f\u82cf","\u6c5f\u897f","\u8fbd\u5b81","\u5185\u8499\u53e4","\u5b81\u590f","\u9752\u6d77","\u5c71\u4e1c","\u5c71\u897f","\u9655\u897f","\u4e0a\u6d77","\u56db\u5ddd","\u53f0\u6e7e","\u5929\u6d25","\u897f\u85cf","\u9999\u6e2f","\u65b0\u7586","\u4e91\u5357","\u6d59\u6c5f","\u5176\u4ed6"],e.myProvinceIndex=-1,e.provincePoint=[],e.spSteelData={0:{baseIndex:0,width:3,height:3,angle:0,hole:{0:{x:-1,y:1},1:{x:1,y:1},2:{x:-1,y:-1},3:{x:1,y:-1}}},1:{baseIndex:1,radius:3,hole:{0:{x:0,y:0}}},2:{baseIndex:1,radius:2,hole:{0:{x:0,y:0}}},3:{baseIndex:1,radius:3,hole:{0:{x:0,y:1},1:{x:0,y:-1},2:{x:-1,y:0},3:{x:1,y:0}}},4:{baseIndex:0,width:3,height:3,angle:0,hole:{0:{x:0,y:1},1:{x:0,y:-1},2:{x:-1,y:0},3:{x:1,y:0}}},5:{baseIndex:1,radius:4,hole:{0:{x:-1.5,y:0},1:{x:0,y:0},2:{x:1.5,y:0}}}},e.rankData={20:{name:"\u87ba\u4e1d\u738b\u8005",points:1e4,reward:10,rewardType:"skinPecie",frame:7},19:{name:"\u81f3\u5c0a\u603b\u5de5\u2160",points:8e3,reward:9,rewardType:"skinPecie",frame:6},18:{name:"\u81f3\u5c0a\u603b\u5de5\u2161",points:7e3,reward:8,rewardType:"skinPecie",frame:6},17:{name:"\u81f3\u5c0a\u603b\u5de5\u2162",points:6e3,reward:7,rewardType:"skinPecie",frame:6},16:{name:"\u5927\u5e08\u5085\u2160",points:4600,reward:6,rewardType:"skinPecie",frame:5},15:{name:"\u5927\u5e08\u5085\u2161",points:1e3,reward:5,rewardType:"skinPecie",frame:5},14:{name:"\u5927\u5e08\u5085\u2162",points:3600,reward:4,rewardType:"skinPecie",frame:5},13:{name:"\u8363\u8000\u5927\u5de5\u2160",points:3100,reward:3,rewardType:"skinPecie",frame:4},12:{name:"\u8363\u8000\u5927\u5de5\u2161",points:2700,reward:2,rewardType:"skinPecie",frame:4},11:{name:"\u8363\u8000\u5927\u5de5\u2162",points:2300,reward:1,rewardType:"skinPecie",frame:4},10:{name:"\u79e9\u5e8f\u4e2d\u5de5\u2160",points:1800,reward:1e3,rewardType:"gold",frame:3},9:{name:"\u79e9\u5e8f\u4e2d\u5de5\u2161",points:1500,reward:800,rewardType:"gold",frame:3},8:{name:"\u79e9\u5e8f\u4e2d\u5de5\u2162",points:1200,reward:600,rewardType:"gold",frame:3},7:{name:"\u5014\u5f3a\u5c0f\u5de5\u2160",points:900,reward:400,rewardType:"gold",frame:2},6:{name:"\u5014\u5f3a\u5c0f\u5de5\u2161",points:700,reward:300,rewardType:"gold",frame:2},5:{name:"\u5014\u5f3a\u5c0f\u5de5\u2162",points:500,reward:200,rewardType:"gold",frame:2},4:{name:"\u5b66\u5f92\u2160",points:300,reward:100,rewardType:"gold",frame:1},3:{name:"\u5b66\u5f92\u2161",points:200,reward:100,rewardType:"gold",frame:1},2:{name:"\u5b66\u5f92\u2162",points:100,reward:100,rewardType:"gold",frame:1},1:{name:"\u5b9e\u4e60\u5de5",points:50,reward:50,rewardType:"gold",frame:0},0:{name:"\u4e34\u65f6\u5de5",points:0,reward:0,rewardType:"gold",frame:0}},e.pointNum=0,e.myRank=0,e.CompLevelType=["simple","hard","difficult"],e.CompMaxLevel=3,e.CompLevelConfig={},e.CompTypeLevelConfig={},e.CompetitionLevel=[],e.clearSteelNum=0,e.wholeSteelNum=0,e.Single_Game_Rewards={0:{points:50,gold:100},1:{points:30,gold:50},2:{points:10,gold:30},3:{points:5,gold:10}},e.Random_Rivals={rivals:[{nick_name:"\u540d\u5b57\u771f\u96be\u53d6",pass_time:"500",del_board_num:"166",head_url:"",is_pass:"true",identity:"1"},{nick_name:"\u53d6\u540d\u5b57\u771f\u96be",pass_time:"480",del_board_num:"166",head_url:"",is_pass:"true",identity:"1"},{nick_name:"\u771f\u96be\u53d6\u540d\u5b57",pass_time:"220",del_board_num:"88",head_url:"",is_pass:"false",identity:"1"}]},e.playerData={nick_name:"me",pass_time:"500",del_board_num:"166",head_url:"",is_pass:"true",identity:"0"},e.recentGameRecord={recentRecord:[]},e.compRankList={users:{}},e.randomNickNameArr=["\u67e0\u6aac\u5c0f\u4e38\u5b50","\u6765\u4e86\u8001\u5f1f","\u8d85\u80fd\u7761","\u8f49\u89d2\u9047\u5230\u7231","\u515c\u91cc\u5168\u662f\u53ef\u7231","\u505a\u4e2a\u5403\u8d27","\u9a91\u732a\u4e0a\u9ad8\u901f","\u8fa3\u6761\u7231\u4e0a\u6211","\u8d2b\u9053\u4e0d\u5403\u7d20","\u4f5c\u4e1a\u505a\u4e0d\u5b8c","\u8457\u540d\u5976\u8336\u9274\u5b9a\u5e08","\u5c0f\u718a\u73a9\u6c14\u7403","\u9e2d\u68a8\u5c71\u5927","\u4eba\u7f8e\u5634\u53c8\u751c","\u957f\u5f97\u5371\u9669\u8fd8\u6ca1\u94b1","\u8d70\u8def\u592a\u72c2\u6613\u6454\u8de4","\u767d\u65e5\u68a6\u5de5\u5382\u5382\u957f","\u660e\u4eba\u4e0d\u8bf4\u6697\u8bdd","\u5e26\u4f60\u72c2\u5954\u5e26\u4f60\u98de","\u53ef\u7231\u9b3c\u683c\u6851\u82b1","\u5143\u6c14\u5c11\u5973\u90ed\u5fb7\u7eb2","\u94a2\u94c1\u76f4\u7537\u695a\u6dd1\u829d","\u6211\u7684\u5fc3\u4e0a\u4eba\u5462","\u6b64\u8d26\u53f7\u5df2\u505c\u7528","\u6708\u4eae\u662f\u6211\u5543\u5f2f\u7684","\u5510\u6c0f\u8868\u6f14\u6cd5","\u82bd\u7cd6\u7cd6","\u91d1\u521a\u82ad\u6bd4","\u5c45\u5bb6\u7537\u4eba\u5b59\u8d8a\u8d8a","\u800d\u8d56\u76ae","\u9526\u6807\u8d5b\u91d1\u724c\u9009\u624b","\u667a\u6167\u5973\u5b69\u8981\u79c3\u5934","\u9017\u6bd4\u5347\u7ea7\u6210\u9017\u795e","\u4e00\u8eab\u6b63\u6c14\u7ed3\u679c\u6f0f\u6c14","\u8d2b\u50e7\u4e0d\u7981\u5973\u8272","\u6363\u8393\u718a\u52a0\u52d2\u6bd4\u6d77\u5e26","\u4ea1\u68a6\u4eba\u72f1\u4e2d\u732b","\u654c\u654c\u754f\u90fd\u6bd2\u4e0d\u6b7b","\u54ac\u7740\u68d2\u68d2\u7cd6","\u5982\u4eca\u54e5\u5f88\u7f3a\u7231","\u4e00\u5c0f\u7f50\u725b\u5976"],e.randomAvatar=[],t=__decorate([c],e)}();o.default=r,cc._RF.pop()},{}],compExitView:[function(e,t,o){"use strict";cc._RF.push(t,"bce39KG7apJhY7FLShz2431","compExitView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("config")),c=e("platform"),r=e("commonData"),s=e("CompGameManager"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){i.currentPlatform==i.platformEnum.wechat?(this.node.getChildByName("bg").getChildByName("tt").active=!1,this.node.getChildByName("bg").getChildByName("wx").active=!0):(this.node.getChildByName("bg").getChildByName("tt").active=!0,this.node.getChildByName("bg").getChildByName("wx").active=!1)},t.prototype.clickBackToGame=function(){var e=this;r.default.isPause=!1,this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1},.2),c.showBannerAD(!1),c.showGridAD(!1)},t.prototype.clickExit=function(){var e=this;this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1,s.default.instance.showGameoverPnl(0)},.2)},__decorate([n],t)}(cc.Component);o.default=l,cc._RF.pop()},{CompGameManager:"CompGameManager",commonData:"commonData",config:"config",platform:"platform"}],compGameOvertView:[function(e,t,o){"use strict";cc._RF.push(t,"2e997+6zC1CHKebacjSDbW7","compGameOvertView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("CompGameManager"),i=e("mateView"),c=e("platform"),r=e("PostUserData"),s=e("config"),l=e("Game"),u=e("compRecordView"),d=e("BattleManager"),h=e("topView"),p=cc._decorator,f=p.ccclass,m=p.property,g=function(e){function t(){var t=e.call(this)||this;return t.rankingLabel=null,t.pointLabel=null,t.goldLabel=null,t.UserItem=null,t.BtnNode=null,t.treasurePnl=null,t.win=null,t.lose=null,t.UserAvatarSprite=[],t.rank=0,t.pointNum=0,t.goldNum=0,t.rankList=[],t.characterArr=["\u4e00","\u4e8c","\u4e09","\u56db"],o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.initGameOverPnl=function(){c.reportPage("compGameOverPage",0),this.BtnNode.opacity=0,this.rankList=[],this.getSettlementData(),this.initUserItem(),0==this.rank?(this.win.active=!0,this.lose.active=!1,this.rankingLabel.node.color=cc.color(255,222,68)):(this.win.active=!1,this.lose.active=!0,this.rankingLabel.node.color=cc.color(255,255,255)),this.rankingLabel.string="\u7b2c"+this.characterArr[this.rank]+"\u540d",this.pointLabel.string="0",this.goldLabel.string="0",this.pointNum=0,this.goldNum=0,n.default.instance.levelindex>=1&&(this.playPointAni(),this.playGoldAni()),this.playUserItemAni(0);for(var e=0;e<this.BtnNode.children.length;e++)this.BtnNode.children[e].getComponent(cc.Button).interactable=!1;""!=a.default.openId&&a.default.gamingtime>=60&&n.default.instance.levelindex>=1&&(console.log("---------\u7ed3\u7b97\u9875\u9762 \u4e0a\u4f20\u5bf9\u5c40\u8bb0\u5f55"),r.postRecord(this.pointNum))},t.prototype.getSettlementData=function(){var e;a.default.playerData.pass_time=a.default.gamingtime+"",a.default.playerData.del_board_num=a.default.clearSteelNum+"";for(var t=0;t<3;t++)this.rankList.push(a.default.Random_Rivals.rivals[t]);for(this.rankList.push(a.default.playerData),t=1;t<4;t++)for(var o=0;o<4-t;o++)1==this.compare(this.rankList[o],this.rankList[o+1])&&(e=[this.rankList[o+1],this.rankList[o]],this.rankList[o]=e[0],this.rankList[o+1]=e[1]);console.log("\u6392\u540d\u4fe1\u606f",this.rankList)},t.prototype.initUserItem=function(){var e;s.currentPlatform==s.platformEnum.toutiao?e=tt:s.currentPlatform==s.platformEnum.wechat&&(e=wx);for(var t=0;t<4;t++){if(this.UserItem.children[t].children[0].getComponent(cc.Label).string=this.rankList[t].nick_name,this.UserItem.children[t].children[1].getComponent(cc.Label).string=this.rankList[t].del_board_num,this.UserItem.children[t].children[2].getComponent(cc.Label).string=this.rankList[t].pass_time+"s",console.log("-------------------",this.rankList[t].head_url,""==this.rankList[t].head_url),""==this.rankList[t].head_url)this.UserAvatarSprite[t].getComponent(cc.Sprite).spriteFrame=i.default.instance.defaultAvatar,this.UserItem.children[t].children[0].getComponent(cc.Label).string="\u533f\u540d\u7528\u6237";else if("local"==this.rankList[t].head_url.slice(0,5)){var o=parseInt(this.rankList[t].head_url.slice(6));l.default.resManager.loadRandomAvatar(o,this.UserAvatarSprite[t])}else{var a=e.createImage();this.createUserAvatar(a,this.rankList[t].head_url,this.UserAvatarSprite[t])}"true"==this.rankList[t].is_pass?(this.UserItem.children[t].getChildByName("ispass").active=!0,this.UserItem.children[t].getChildByName("giveup").active=!1):(this.UserItem.children[t].getChildByName("ispass").active=!1,this.UserItem.children[t].getChildByName("giveup").active=!0),this.UserItem.children[t].x=-700,"0"==this.rankList[t].identity&&(this.rank=t)}this.saveGameRecord(),this.loadNewData()},t.prototype.saveGameRecord=function(){for(var e={time:Date.now(),avatarUrl:[],myrank:this.rank},t=0;t<4;t++)e.avatarUrl.push(this.rankList[t].head_url);a.default.recentGameRecord.recentRecord.push(e),a.default.recentGameRecord.recentRecord.length>10&&a.default.recentGameRecord.recentRecord.shift(),d.default.instance.setArrData("recentRecord"),console.log("-------------\u6bd4\u8d5b\u8bb0\u5f55",a.default.recentGameRecord.recentRecord)},t.prototype.loadNewData=function(){if(a.default.randomAvatar=[],""!=a.default.openId)r.getMatchData();else for(var e=0;e<3;e++)a.default.randomlyGenerateMatchData(e)},t.prototype.clickBackToMenu=function(){c.reportButton("compGameOverPage","BackToMenuBtn",0,1),a.default.pointNum+=this.pointNum,a.default.goldNum+=this.goldNum,h.default.instance.changeGoldNum(),a.default.isgameing=!1,""!=a.default.openId&&r.seletPostUserData(["points"]),cc.sys.localStorage.setItem("pointNum",a.default.pointNum),cc.director.loadScene("Game",function(){u.default.instance.initData()})},t.prototype.clickReset=function(){c.reportButton("compGameOverPage","againBtn",0,1),c.showBannerAD(!1),a.default.pointNum+=this.pointNum,a.default.goldNum+=this.goldNum,h.default.instance.changeGoldNum(),cc.sys.localStorage.setItem("pointNum",a.default.pointNum),r.seletPostUserData(["points"]),this.node.active=!1,i.default.instance.gamePnl.active=!1,i.default.instance.gamePnl.children[0].removeAllChildren(),a.default.gamelevel=null,i.default.instance.initMateView(),i.default.instance.node.active=!0},t.prototype.playPointAni=function(){var e=this;this.scheduleOnce(function(){e.pointNum+=Math.ceil(3*Math.random()),e.pointNum>=a.default.Single_Game_Rewards[e.rank].points?e.pointNum=a.default.Single_Game_Rewards[e.rank].points:e.playPointAni(),e.pointLabel.string=""+e.pointNum},.02)},t.prototype.playGoldAni=function(){var e=this;this.scheduleOnce(function(){e.goldNum+=Math.ceil(3*Math.random()),e.goldNum>=a.default.Single_Game_Rewards[e.rank].gold?e.goldNum=a.default.Single_Game_Rewards[e.rank].gold:e.playGoldAni(),e.goldLabel.string=""+e.goldNum},.02)},t.prototype.playUserItemAni=function(e){var t=this;cc.moveBy(.3,cc.v2(700,0)),cc.tween(this.UserItem.children[e]).to(.3,{x:0},{easing:"quadIn"}).call(function(){++e<4?t.playUserItemAni(e):t.showBtn()}).start()},t.prototype.showBtn=function(){var e=this;cc.tween(this.BtnNode).to(.4,{opacity:255}).delay(.1).call(function(){0==e.rank&&(e.treasurePnl.active=!0);for(var t=0;t<e.BtnNode.children.length;t++)e.BtnNode.children[t].getComponent(cc.Button).interactable=!0}).start()},t.prototype.compare=function(e,t){if("true"==e.is_pass&&"false"==t.is_pass)return-1;if("false"==e.is_pass&&"true"==t.is_pass)return 1;if("true"==e.is_pass&&"true"==t.is_pass){if(parseInt(e.pass_time)<parseInt(t.pass_time))return-1;if(parseInt(e.pass_time)>parseInt(t.pass_time))return 1}if("false"==e.is_pass&&"false"==t.is_pass){if(parseInt(e.del_board_num)>parseInt(t.del_board_num))return-1;if(parseInt(e.del_board_num)<parseInt(t.del_board_num))return 1}return 0},t.prototype.createUserAvatar=function(e,t,o){""!=t&&(e.src=t,e.width=105,e.height=105,e.onload=function(){var t=new cc.SpriteFrame,a=new cc.Texture2D;a.initWithElement(e),t.setTexture(a),o.spriteFrame=t})},t.prototype.clickShare=function(){c.showShare()},t.instance=null,__decorate([m(cc.Label)],t.prototype,"rankingLabel",void 0),__decorate([m(cc.Label)],t.prototype,"pointLabel",void 0),__decorate([m(cc.Label)],t.prototype,"goldLabel",void 0),__decorate([m(cc.Node)],t.prototype,"UserItem",void 0),__decorate([m(cc.Node)],t.prototype,"BtnNode",void 0),__decorate([m(cc.Node)],t.prototype,"treasurePnl",void 0),__decorate([m(cc.Node)],t.prototype,"win",void 0),__decorate([m(cc.Node)],t.prototype,"lose",void 0),__decorate([m(cc.Sprite)],t.prototype,"UserAvatarSprite",void 0),o=__decorate([f],t)}(cc.Component);o.default=g,cc._RF.pop()},{BattleManager:"BattleManager",CompGameManager:"CompGameManager",Game:"Game",PostUserData:"PostUserData",commonData:"commonData",compRecordView:"compRecordView",config:"config",mateView:"mateView",platform:"platform",topView:"topView"}],compRecordView:[function(e,t,o){"use strict";cc._RF.push(t,"6bb74eRLs5HmZW0gD41v3Ik","compRecordView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("Game"),i=e("config"),c=cc._decorator,r=c.ccclass,s=c.property,l=function(e){function t(){var t=e.call(this)||this;return t.recordPre=null,t.frame_player=null,t.recordContent=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.initData()},t.prototype.initData=function(){var e;i.currentPlatform==i.platformEnum.toutiao?e=tt:i.currentPlatform==i.platformEnum.wechat&&(e=wx),this.recordContent.removeAllChildren();for(var t=a.default.recentGameRecord.recentRecord,o=t.length-1;o>=0;o--){var c=cc.instantiate(this.recordPre);c.children[0].getComponent(cc.Label).string=this.changeDate(t[o].time);for(var r=0;r<4;r++)if(""==t[o].avatarUrl[r]);else if("local"==t[o].avatarUrl[r].slice(0,5)){var s=parseInt(t[o].avatarUrl[r].slice(6));n.default.resManager.loadRandomAvatar(s,c.children[r+1].children[0].children[0])}else{var l=e.createImage();this.createUserAvatar(l,t[o].avatarUrl[r],c.children[r+1].children[0].children[0])}c.children[t[o].myrank+1].children[1].getComponent(cc.Sprite).spriteFrame=this.frame_player,c.setParent(this.recordContent)}},t.prototype.changeDate=function(e){var t=new Date(e);return t.getMonth()+1+"/"+t.getDate()+"\n"+t.getHours()+":"+t.getMinutes()},t.prototype.createUserAvatar=function(e,t,o){e.src=t,e.width=105,e.height=105,e.onload=function(){var t=new cc.SpriteFrame,a=new cc.Texture2D;a.initWithElement(e),t.setTexture(a),o.getComponent(cc.Sprite).spriteFrame=t}},t.instance=null,__decorate([s(cc.Prefab)],t.prototype,"recordPre",void 0),__decorate([s(cc.SpriteFrame)],t.prototype,"frame_player",void 0),__decorate([s(cc.Node)],t.prototype,"recordContent",void 0),o=__decorate([r],t)}(cc.Component);o.default=l,cc._RF.pop()},{Game:"Game",commonData:"commonData",config:"config"}],compView:[function(e,t,o){"use strict";cc._RF.push(t,"ac293kuU/dPNqNXKLQ1baA6","compView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("PostUserData"),i=e("platform"),c=e("config"),r=e("Game"),s=e("topView"),l=e("BattleManager"),u=e("startView"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=e.call(this)||this;return t.matePnl=null,t.illustratePnl=null,t.recordPnl=null,t.PlayerAvatar=null,t.defaultAvatar=null,t.myData_head=null,t.myData_frame=null,t.myData_progress=null,t.myData_nextRankReward=null,t.myData_Label=[],t.avatarFrame=[],t.rank_board=[],t.rank_medal=[],t.rank_itemPre=null,t.rank_content=null,t.rank_scrollView=null,t.rank_myRank=null,t.rankListPage=0,t.loadingRankList=!1,t.preLoadScene=!1,t.isloadPlayerData=!1,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.setAvatar()},t.prototype.setAvatar=function(){var e="\u533f\u540d\u7528\u6237";if(""==a.default.UserNickName)""!=a.default.openId&&(e="\u533f\u540d\u7528\u6237"+a.default.openId.slice(-4));else{e=a.default.UserNickName;var t=void 0;c.currentPlatform==c.platformEnum.toutiao?t=tt:c.currentPlatform==c.platformEnum.wechat&&(t=wx);var o=t.createImage();this.createUserAvatar(o,a.default.UserAvatarUrl,this.myData_head.node)}this.myData_Label[0].string=e},t.prototype.onLoad=function(){this.rank_scrollView.getComponent(cc.ScrollView).node.on("scroll-to-bottom",this.continueRankListData,this)},t.prototype.onEnable=function(){this.node.getChildByName("bg").getComponent(cc.Animation).play("appear"),this.matePnl.active=!1,this.initCompData(),i.reportPage("compPage",0),i.showBannerAD(!1),i.showGridAD(!1)},t.prototype.closeCompPnl=function(){var e=this;i.reportButton("compPage","closeBtn"),this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1,u.default.instance.showGameClubBtn(!0)},.2)},t.prototype.initCompData=function(){this.initMyData()},t.prototype.initMyData=function(){""!=a.default.openId&&n.getUserInformation();for(var e,t=0,o=0;o<=20&&a.default.pointNum>=a.default.rankData[o].points;o++)t=o;a.default.myRank!=t&&(this.rankUp(t),a.default.myRank=t,cc.sys.localStorage.setItem("myRank",a.default.myRank)),this.myData_Label[1].string=a.default.rankData[a.default.myRank].name,this.myData_Label[2].string=a.default.pointNum+"",a.default.myRank<20?(e=a.default.rankData[a.default.myRank+1].points,this.myData_Label[3].string=a.default.pointNum+"/"+e,this.myData_progress.width=a.default.pointNum/e*253,"skinPecie"==a.default.rankData[a.default.myRank+1].rewardType?(this.myData_nextRankReward.children[0].active=!1,this.myData_nextRankReward.children[1].active=!0):"gold"==a.default.rankData[a.default.myRank+1].rewardType&&(this.myData_nextRankReward.children[0].active=!0,this.myData_nextRankReward.children[1].active=!1),this.myData_nextRankReward.children[2].getComponent(cc.Label).string="X"+a.default.rankData[a.default.myRank+1].reward):(this.myData_Label[3].string="MAX",this.myData_progress.width=253,this.myData_nextRankReward.parent.active=!1),this.myData_frame.spriteFrame=this.avatarFrame[a.default.rankData[a.default.myRank].frame]},t.prototype.initRankListData=function(){var e;if(c.currentPlatform==c.platformEnum.toutiao?e=tt:c.currentPlatform==c.platformEnum.wechat&&(e=wx),this.rank_content.removeAllChildren(),!(Object.keys(a.default.compRankList.users).length<=0)){this.rankListPage=0;var t=Object.keys(a.default.compRankList.users).length<20?Object.keys(a.default.compRankList.users).length:20;console.log("------------\u521d\u59cb\u5316\u6392\u884c\u699c",t);for(var o=0;o<t;o++){var n=cc.instantiate(this.rank_itemPre);if(o<=2){n.getChildByName("medal").active=!0,n.getChildByName("medal").getComponent(cc.Sprite).spriteFrame=this.rank_medal[o],n.getComponent(cc.Sprite).spriteFrame=this.rank_board[o];var i=void 0;0==o?i=new cc.Color(184,86,27):1==o?i=new cc.Color(54,109,185):2==o&&(i=new cc.Color(167,89,46)),n.children[1].color=i,n.children[2].color=i}n.children[1].getComponent(cc.Label).string=a.default.compRankList.users[o].nick_name,""==a.default.compRankList.users[o].nick_name&&(n.children[1].getComponent(cc.Label).string="\u533f\u540d\u7528\u6237"),n.children[2].getComponent(cc.Label).string=a.default.compRankList.users[o].points,n.children[3].getComponent(cc.Label).string=String(o+1);var s=n.children[0].children[0].children[0];if("local"==a.default.compRankList.users[o].head_url.slice(0,5)){var l=parseInt(a.default.compRankList.users[o].head_url.slice(6));r.default.resManager.loadRandomAvatar(l,s)}else{var u=e.createImage();this.createUserAvatar(u,a.default.compRankList.users[o].head_url,s)}n.setParent(this.rank_content)}for(o=0;o<Object.keys(a.default.compRankList.users).length;o++)a.default.compRankList.users[o].nick_name==a.default.UserNickName&&a.default.compRankList.users[o].points==String(a.default.pointNum)&&(this.rank_myRank.getComponent(cc.Label).string="\u6211\u7684\u6392\u540d: "+String(o+1))}},t.prototype.continueRankListData=function(){if(!(this.loadingRankList||this.rankListPage>=4)){var e;c.currentPlatform==c.platformEnum.toutiao?e=tt:c.currentPlatform==c.platformEnum.wechat&&(e=wx),this.loadingRankList=!0,this.rankListPage++;var t=Object.keys(a.default.compRankList.users).length<20*(this.rankListPage+1)?Object.keys(a.default.compRankList.users).length:20*(this.rankListPage+1);console.log("------------\u7ee7\u7eed\u52a0\u8f7d\u6392\u884c\u699c",Object.keys(a.default.compRankList.users).length,t,this.rankListPage);for(var o=20*this.rankListPage;o<t;o++){var n=cc.instantiate(this.rank_itemPre);n.children[1].getComponent(cc.Label).string=a.default.compRankList.users[o].nick_name,""==a.default.compRankList.users[o].nick_name&&(n.children[1].getComponent(cc.Label).string="\u533f\u540d\u7528\u6237"),n.children[2].getComponent(cc.Label).string=a.default.compRankList.users[o].points,n.children[3].getComponent(cc.Label).string=String(o+1);var i=n.children[0].children[0].children[0],r=e.createImage();this.createUserAvatar(r,a.default.compRankList.users[o].head_url,i),console.log("-------\u52a0\u8f7drankItem"),n.setParent(this.rank_content),o==t-1&&(this.loadingRankList=!1)}}},t.prototype.rankUp=function(e){var t=a.default.rankData[e].reward;if("skinPecie"==a.default.rankData[e].rewardType){for(var o=0;o<t;o++){var c=Math.floor(6*Math.random()+7);a.default.boardSkinData.piece[c]>=3?a.default.goldNum+=500:a.default.boardSkinData.piece[c]++}s.default.instance.changeGoldNum(),l.default.instance.setArrData("piece"),i.showTips("\u606d\u559c\u83b7\u5f97"+t+"\u4e2a\u76ae\u80a4\u788e\u7247")}else"gold"==a.default.rankData[e].rewardType&&(i.showTips("\u606d\u559c\u83b7\u5f97"+t+"\u91d1\u5e01"),a.default.goldNum+=t,s.default.instance.changeGoldNum());""!=a.default.openId&&n.seletPostUserData(["coin","skin_debris"])},t.prototype.clickStartGame=function(){var e=this;i.reportButton("compPage","compStartGameBtn"),a.default.GameMode=a.GAME_MODE_ENUM.COMPETITION,this.matePnl.active=!0;var t=this;if(a.default.randomAvatar=[],a.default.getCompWholeSteel(),""!=a.default.openId)n.getMatchData();else{for(var o=0;o<3;o++)a.default.randomlyGenerateMatchData(o);this.scheduleOnce(function(){e.isloadPlayerData=!0},1)}this.loadPlayerData(),cc.director.preloadScene("CompGame",function(){},function(){console.log("\u9884\u52a0\u8f7d\u573a\u666f\u6210\u529f"),t.preLoadScene=!0})},t.prototype.loadPlayerData=function(){if(""==a.default.UserAvatarUrl)this.PlayerAvatar.getComponent(cc.Sprite).spriteFrame=this.defaultAvatar,""!=a.default.openId?a.default.playerData.nick_name="\u533f\u540d\u7528\u6237"+a.default.openId.slice(-4):a.default.playerData.nick_name="\u533f\u540d\u7528\u6237";else{var e=void 0;c.currentPlatform==c.platformEnum.toutiao?e=tt:c.currentPlatform==c.platformEnum.wechat&&(e=wx);var t=e.createImage();this.createUserAvatar(t,a.default.UserAvatarUrl,this.PlayerAvatar),a.default.playerData.nick_name=a.default.UserNickName,a.default.playerData.head_url=a.default.UserAvatarUrl}},t.prototype.clickIllustrate=function(){i.reportButton("compPage","illustrateBtn"),i.reportPage("illustratePage",0),this.illustratePnl.active=!0,this.illustratePnl.getChildByName("back").getComponent(cc.Button).interactable=!0,this.illustratePnl.getChildByName("bg").getComponent(cc.Animation).play("appear")},t.prototype.closeIllustrate=function(){var e=this;i.reportButton("compPage","closeIllustrateBtn"),this.illustratePnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.illustratePnl.getChildByName("back").getComponent(cc.Button).interactable=!1,this.scheduleOnce(function(){e.illustratePnl.active=!1},.2)},t.prototype.clickRecord=function(){i.reportButton("compPage","RecordBtn"),i.reportPage("recordPage",0),this.recordPnl.active=!0,this.recordPnl.getChildByName("back").getComponent(cc.Button).interactable=!0,this.recordPnl.getChildByName("bg").getComponent(cc.Animation).play("appear")},t.prototype.closeRecord=function(){var e=this;i.reportButton("compPage","closeRecordBtn"),this.recordPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.recordPnl.getChildByName("back").getComponent(cc.Button).interactable=!1,this.scheduleOnce(function(){e.recordPnl.active=!1},.2)},t.prototype.update=function(){this.preLoadScene&&this.isloadPlayerData&&(cc.director.loadScene("CompGame"),this.preLoadScene=!1,this.isloadPlayerData=!1)},t.prototype.loadRandomAvatar=function(e,t){r.default.resManager.loadBundleRes("levels","randomAvatar/"+e,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7dlevels/randomAvatar\u5931\u8d25!")}).then(function(e){t.getComponent(cc.Sprite).spriteFrame=e})},t.prototype.createUserAvatar=function(e,t,o){e.src=t,e.width=105,e.height=105,e.onload=function(){console.log("\u7528\u6237\u5934\u50cf\u52a0\u8f7d\u6210\u529f");var t=new cc.SpriteFrame,a=new cc.Texture2D;a.initWithElement(e),t.setTexture(a),o.getComponent(cc.Sprite).spriteFrame=t}},t.instance=null,__decorate([p(cc.Node)],t.prototype,"matePnl",void 0),__decorate([p(cc.Node)],t.prototype,"illustratePnl",void 0),__decorate([p(cc.Node)],t.prototype,"recordPnl",void 0),__decorate([p(cc.Node)],t.prototype,"PlayerAvatar",void 0),__decorate([p(cc.SpriteFrame)],t.prototype,"defaultAvatar",void 0),__decorate([p(cc.Sprite)],t.prototype,"myData_head",void 0),__decorate([p(cc.Sprite)],t.prototype,"myData_frame",void 0),__decorate([p(cc.Node)],t.prototype,"myData_progress",void 0),__decorate([p(cc.Node)],t.prototype,"myData_nextRankReward",void 0),__decorate([p({type:cc.Label,tooltip:"0\u7528\u6237\u540d\u5b57 1\u6bb5\u4f4d\u540d\u5b57 2\u79ef\u5206 3\u8fdb\u5ea6\u6761\u7684\u663e\u793a"})],t.prototype,"myData_Label",void 0),__decorate([p(cc.SpriteFrame)],t.prototype,"avatarFrame",void 0),__decorate([p(cc.SpriteFrame)],t.prototype,"rank_board",void 0),__decorate([p(cc.SpriteFrame)],t.prototype,"rank_medal",void 0),__decorate([p(cc.Prefab)],t.prototype,"rank_itemPre",void 0),__decorate([p(cc.Node)],t.prototype,"rank_content",void 0),__decorate([p(cc.Node)],t.prototype,"rank_scrollView",void 0),__decorate([p(cc.Label)],t.prototype,"rank_myRank",void 0),o=__decorate([h],t)}(cc.Component);o.default=f,cc._RF.pop()},{BattleManager:"BattleManager",Game:"Game",PostUserData:"PostUserData",commonData:"commonData",config:"config",platform:"platform",startView:"startView",topView:"topView"}],config:[function(e,t,o){"use strict";var a,n;cc._RF.push(t,"230297quVNFU79/jh2pRol7","config"),Object.defineProperty(o,"__esModule",{value:!0}),o.isTouTiaoPlatform=o.isWeChatPlatform=o.isOpenLog=o.SUB_PACKAGE=o.platform_APPName=o.platform_APPID=o.currentPlatform=o.platformEnum=void 0,(n=a=o.platformEnum||(o.platformEnum={}))[n.wechat=1]="wechat",n[n.toutiao=2]="toutiao",n[n.qq=3]="qq",n[n.oppo=4]="oppo",n[n.meizu=5]="meizu",n[n.vivo=6]="vivo",n[n.android=7]="android",n[n.ios=8]="ios",n[n.huawei=9]="huawei",n[n.native=10]="native",n[n.web=11]="web",n[n.ks=12]="ks",cc.Enum(a),o.currentPlatform=a.web,function(e){e.wechat_ID="wx7eff530bd5794fc3",e.toutiao_ID="tt60981625ffa5581f02",e.qq_ID="",e.oppo_ID="",e.vivo_ID="",e.android_ID="",e.ios_ID=""}(o.platform_APPID||(o.platform_APPID={})),function(e){e.wechat_Name="   ",e.toutiao_Name=" ",e.qq_Name=" ",e.oppo_Name=" ",e.vivo_Name=" ",e.android_Name=" ",e.ios_Name=" "}(o.platform_APPName||(o.platform_APPName={})),o.isWeChatPlatform=function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&o.currentPlatform==a.wechat},o.isTouTiaoPlatform=function(){return o.currentPlatform===a.toutiao},cc._RF.pop()},{}],exitView:[function(e,t,o){"use strict";cc._RF.push(t,"7566a0gdXRGg7x19iFRi4mC","exitView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("config")),c=e("commonData"),r=e("GameManager"),s=e("platform"),l=e("UIManager"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.clickquieGame=function(){var e=c.default.currLevel;0==c.default.isgameing&&(e=0),s.reportButton("ExitPage","exitGameBtn",e,1),r.default.instance.hideNovice(),r.default.instance.showGameoverPnl(2),c.default.isgameing=!1,l.default.instance.showExitPnl(!1),s.showBannerAD(!1)},t.prototype.clickback=function(){var e=c.default.currLevel,t=0;0==c.default.isgameing&&(e=0,t=1),s.reportButton("ExitPage","backToGameBtn",e,t),s.showBannerAD(!1),c.default.isPause=!1,l.default.instance.showExitPnl(!1)},t.prototype.onLoad=function(){i.currentPlatform==i.platformEnum.wechat?(this.node.getChildByName("bg").getChildByName("tt").active=!1,this.node.getChildByName("bg").getChildByName("wx").active=!0):(this.node.getChildByName("bg").getChildByName("tt").active=!0,this.node.getChildByName("bg").getChildByName("wx").active=!1)},__decorate([n],t)}(cc.Component);o.default=u,cc._RF.pop()},{GameManager:"GameManager",UIManager:"UIManager",commonData:"commonData",config:"config",platform:"platform"}],gameOverView:[function(e,t,o){"use strict";cc._RF.push(t,"c01b4i1bi1GSZGjG/y3AtpQ","gameOverView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,c=e("commonData"),r=e("topView"),s=e("getSkinView"),l=e("BattleManager"),u=e("platform"),d=e("config"),h=e("GameManager"),p=e("Game"),f=e("GraphicalCreateLevel"),m=e("PostUserData"),g=e("UIManager"),v=e("startView"),w=e("unscrew"),y=function(e){function t(){var t=e.call(this)||this;return t.win=null,t.lose=null,t.levelLabel=null,t.goldLabel=null,t.fiveGetBtn=null,t.sharetip=null,t.backToMenu=null,t.nextLevel=null,t.screwAni=null,t.subscribLevel=0,t.gold=0,t.gamePnl=null,t.startPnl=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.gamePnl=cc.find("Canvas/gamePnl"),this.startPnl=cc.find("Canvas/startPnl")},t.prototype.init=function(e){if(u.showInterstitialAd(),u.showBannerAD(!0),1==e){this.getSubPassLevel(),this.checkSkinProgress(),this.fiveGetBtn.interactable=!0,this.win.active=!0;var t=this.win.getChildByName("Confetti");switch(t.opacity=255,cc.tween(t).to(.4,{y:56}).to(.6,{y:-80,opacity:0}).start(),this.lose.active=!1,this.goldLabel.string="+200",this.levelLabel.string="\u95ef\u5173\u65f6\u95f4: "+this.formatSeconds(""+c.default.gamingtime,"i's''"),this.gold=200,l.default.instance.playWinSound(),this.nextLevel.active=!0,u.reportPage("winPage",c.default.currLevel-1),this.backToMenu.active=!1,c.default.gamingtime=0,c.default.GameMode){case c.GAME_MODE_ENUM.CHALLENGE:c.default.isgameing=!1;break;case c.GAME_MODE_ENUM.GARAPHICAL:if(c.default.currLevel>c.default.graphicalMaxLv){c.default.currLevel--;for(var o=Math.ceil(Math.random()*c.default.graphicalMaxLv);o==c.default.currLevel;)o=Math.ceil(Math.random()*c.default.graphicalMaxLv);c.default.currLevel=o}}}else{this.win.active=!1,this.lose.active=!0,this.nextLevel.active=!1;var a=Math.ceil((c.default.LevelSteel-c.default.TotalSteel)/c.default.LevelSteel*100);a<50?(this.gold=0,this.fiveGetBtn.interactable=!1):(this.gold=50,this.fiveGetBtn.interactable=!0),this.goldLabel.string="+"+this.gold,this.levelLabel.string="\u5173\u5361\u8fdb\u5ea6:"+a+"%",this.nextLevel.active=!1,this.backToMenu.active=!0,d.currentPlatform==d.platformEnum.wechat?(this.backToMenu.active=!1,this.lose.getChildByName("wx").active=!0):this.lose.getChildByName("wx").active=!1,l.default.instance.playFailSound(),c.default.gamingtime=0,c.default.isgameing=!1,u.reportPage("losePage",c.default.currLevel)}1==c.default.isShare||d.currentPlatform==d.platformEnum.wechat?this.sharetip.active=!1:this.sharetip.active=!0},t.prototype.saveLv=function(){c.default.currLevel%2==0?(c.default.currLevel--,cc.sys.localStorage.setItem("currentLevel",c.default.currLevel)):cc.sys.localStorage.setItem("currentLevel",c.default.currLevel)},t.prototype.onEnable=function(){this.node.getChildByName("bg").scale=0,this.node.getChildByName("bg").getComponent(cc.Animation).play("appear"),this.changeScrewAni()},t.prototype.onDisable=function(){l.default.instance.stopFailSound(),l.default.instance.stopWinSound(),l.default.instance.playGroundMusic()},t.prototype.changeScrewAni=function(){this.screwAni.animation=c.default.screwSkinName[c.default.screwSkinData.currentSkin],console.log("============changeScrewAni",c.default.screwSkinName[c.default.screwSkinData.currentSkin])},t.prototype.clickBackToMenu=function(){var e=this;c.default.GameMode==c.GAME_MODE_ENUM.ELIMINATE?cc.director.loadScene("Game"):(u.reportButton("GameOverPage","backToMenuBtn",c.default.currLevel,1),this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.closeGameOverView()},.2))},t.prototype.clickNextLevel=function(){var e=this;switch(this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),u.reportButton("GameOverPage","nextLevelBtn",c.default.currLevel,1),u.showBannerAD(!1),console.log("------click next level",c.default.GameMode),c.default.GameMode){case c.GAME_MODE_ENUM.GARAPHICAL:console.log("---------loadGraphicalLv"),u.showTips("\u606d\u559c\u83b7\u5f97"+this.gold+"\u91d1\u5e01"),c.default.goldNum+=this.gold,r.default.instance.changeGoldNum(),this.loadGraphicalLv();break;case c.GAME_MODE_ENUM.UNSCREW:this.scheduleOnce(function(){e.node.active=!1,w.default.instance.reset(),h.default.instance.init()},.2);break;default:this.node.active=!1,u.showTips("\u606d\u559c\u83b7\u5f97"+this.gold+"\u91d1\u5e01"),c.default.goldNum+=this.gold,r.default.instance.changeGoldNum(),c.default.gamelevel.reload(),h.default.instance.init()}},t.prototype.loadGraphicalLv=function(){var e=this;console.log("---------loadGraphicalLv"),v.default.instance.loadImg.active=!0,p.default.resManager.loadBundleRes("graphicalMode","prefab/Lv0",cc.Prefab).catch(function(){console.error("\u52a0\u8f7d\u7279\u6b8a\u5173\u5361\u5931\u8d25!")}).then(function(t){console.log("----\u52a0\u8f7dlevels/Lv"+c.default.currLevel+"\u6210\u529f"),e.gamePnl.getChildByName("gameNode").children[0].destroy(),e.scheduleOnce(function(){h.default.instance.init();var o=cc.instantiate(t);o.setParent(e.gamePnl.getChildByName("gameNode")),o.setPosition(0,0),c.default.gamelevel=o.getComponent(f.default),e.node.active=!1})})},t.prototype.clickFiveGet=function(){var e=this;u.reportButton("GameOverPage","fiveGetBtn_video",c.default.currLevel,1,1),u.showRewardAD(function(){u.reportButton("GameOverPage","fiveGetBtn_video_success",c.default.currLevel,1,2),e.gold=5*e.gold,e.goldLabel.string="+"+e.gold,e.fiveGetBtn.interactable=!1,u.showTips("\u9886\u53d6\u6210\u529f\uff01"),1==e.lose.active&&(e.clickReplay(),c.default.goldNum+=e.gold,r.default.instance.changeGoldNum())},this)},t.prototype.clickShare=function(e,t){var o=this;u.reportButton("GameOverPage","shareBtn",c.default.currLevel,1,3),console.log("-----------\u5206\u4eab\u53c2\u6570",t),u.showShare(function(){0==c.default.isShare&&(c.default.isShare=!0,cc.sys.localStorage.setItem("isShare",!0),o.sharetip.active=!1,d.currentPlatform==d.platformEnum.wechat||(c.default.goldNum+=100,r.default.instance.changeGoldNum())),u.showTips("\u5206\u4eab\u6210\u529f\uff01"),u.reportButton("GameOverPage","shareBtn_success",c.default.currLevel,1,4)},null,t)},t.prototype.closeGameOverView=function(){this.gamePnl.active=!1,c.default.gamelevel.node.destroy(),c.default.gamelevel=null,this.startPnl.active=!0,this.node.active=!1,0!=this.gold&&(u.showTips("\u606d\u559c\u83b7\u5f97"+this.gold+"\u91d1\u5e01"),c.default.goldNum+=this.gold,r.default.instance.changeGoldNum())},t.prototype.formatSeconds=function(e,t){void 0===t&&(t="h:i:s"),e=Number(e);var o={};return o.h=Number.parseInt(String(e/3600)),o.i=Number.parseInt(String((e-3600*o.h)/60)),o.s=Number.parseInt(String(e-3600*o.h-60*o.i)),o.h<10&&(o.h="0"+o.h),o.i<10&&(o.i=""+o.i),o.s<10&&(o.s="0"+o.s),t.replace("h",o.h).replace("i",o.i).replace("s",o.s)},t.prototype.clickReplay=function(){h.default.instance.reset(),this.node.active=!1,u.showBannerAD(!1),c.default.isgameing=!0,h.default.instance.startClock()},t.prototype.checkSkinProgress=function(){if(c.default.GameMode==c.GAME_MODE_ENUM.NORMAL||c.default.GameMode==c.GAME_MODE_ENUM.CHALLENGE){if(c.default.boardSkinData.skinProgress++,c.default.screwSkinData.skinProgress++,cc.sys.localStorage.setItem("skinProgress",c.default.boardSkinData.skinProgress),cc.sys.localStorage.setItem("screwSkinProgress",c.default.screwSkinData.skinProgress),-1!=c.default.screwSkinData.skinProgressTarget.indexOf(c.default.screwSkinData.skinProgress)){var e=c.default.screwSkinData.skinProgressTarget.indexOf(c.default.screwSkinData.skinProgress);if(console.log("\u5e94\u8be5\u89e3\u9501\u7684\u76ae\u80a4",e),1==c.default.screwSkinData.skinData[e])return;s.default.instance.initScrewSkinAni(e),c.default.screwSkinData.skinData[e]=1;var t=c.default.screwSkinData.skinData.indexOf(0);if(console.log("---------\u4e0b\u4e00\u4e2a\u76ae\u80a4",t,c.default.screwSkinData),-1!=t){var o=c.default.screwSkinData.skinProgressTarget[t]-c.default.screwSkinData.skinProgress,a=g.default.instance.getSkinPnl.children[1].getChildByName("tips");o>0?(a.getComponent(cc.Label).string="\u518d\u901a\u5173"+o+"\u5173\u53ef\u83b7\u5f97\u65b0\u76ae\u80a4",a.active=!0):a.active=!1}else g.default.instance.getSkinPnl.children[1].getChildByName("tips").active=!1;return this.scheduleOnce(function(){g.default.instance.getSkinPnl.active=!0},.5),l.default.instance.setArrData("screwSkinData"),void(""!=c.default.openId&&m.seletPostUserData(["little_man_skin"]))}if(-1!=c.default.boardSkinData.skinProgressTarget.indexOf(c.default.boardSkinData.skinProgress)){if(e=c.default.boardSkinData.skinProgressTarget.indexOf(c.default.boardSkinData.skinProgress),console.log("\u5e94\u8be5\u89e3\u9501\u7684\u76ae\u80a4",e),1==c.default.boardSkinData.skinData[e])return;s.default.instance.initBoardSkinImg(e),c.default.boardSkinData.skinData[e]=1,t=c.default.boardSkinData.skinData.indexOf(0),console.log("---------\u4e0b\u4e00\u4e2a\u76ae\u80a4",t,c.default.boardSkinData.skinData),-1!=t?(o=c.default.boardSkinData.skinProgressTarget[t]-c.default.boardSkinData.skinProgress,a=g.default.instance.getSkinPnl.children[1].getChildByName("tips"),o>0?(a.getComponent(cc.Label).string="\u518d\u901a\u5173"+o+"\u5173\u53ef\u83b7\u5f97\u65b0\u76ae\u80a4",a.active=!0):a.active=!1):g.default.instance.getSkinPnl.children[1].getChildByName("tips").active=!1,this.scheduleOnce(function(){g.default.instance.getSkinPnl.active=!0},.5),l.default.instance.setArrData("skinData"),""!=c.default.openId&&m.seletPostUserData(["board_skin"])}}},t.prototype.getSubPassLevel=function(){var e=c.default.GameMode+"SubPassLevel",t=cc.sys.localStorage.getItem(e);""==t||null==t||null==t?t=1:t++,console.log("----subLevel",t),this.subscribLevel=t,t>=4&&(t=0),cc.sys.localStorage.setItem(e,t)},t.prototype.PopUpSubscription=function(){this.subscribLevel>=4&&!c.default.isSubscribe&&(u.requestSubscribe(),console.log("-----native show sub"))},t.instance=null,__decorate([i(cc.Node)],t.prototype,"win",void 0),__decorate([i(cc.Node)],t.prototype,"lose",void 0),__decorate([i(cc.Label)],t.prototype,"levelLabel",void 0),__decorate([i(cc.Label)],t.prototype,"goldLabel",void 0),__decorate([i(cc.Button)],t.prototype,"fiveGetBtn",void 0),__decorate([i(cc.Node)],t.prototype,"sharetip",void 0),__decorate([i(cc.Node)],t.prototype,"backToMenu",void 0),__decorate([i(cc.Node)],t.prototype,"nextLevel",void 0),__decorate([i(sp.Skeleton)],t.prototype,"screwAni",void 0),o=__decorate([n],t)}(cc.Component);o.default=y,cc._RF.pop()},{BattleManager:"BattleManager",Game:"Game",GameManager:"GameManager",GraphicalCreateLevel:"GraphicalCreateLevel",PostUserData:"PostUserData",UIManager:"UIManager",commonData:"commonData",config:"config",getSkinView:"getSkinView",platform:"platform",startView:"startView",topView:"topView",unscrew:"unscrew"}],getSkinView:[function(e,t,o){"use strict";var a;cc._RF.push(t,"b36dei5/WNP3LGPI5fSFpwd","getSkinView"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_SKIN_TYPE=void 0;var n,i=cc._decorator,c=i.ccclass,r=i.property,s=e("platform"),l=e("commonData"),u=e("GameManager"),d=e("newSkinView"),h=e("gameOverView"),p=e("BattleManager"),f=e("PostUserData");(n=a=o.ENUM_SKIN_TYPE||(o.ENUM_SKIN_TYPE={})).SCREW="screw",n.BOARD="board";var m=function(e){function t(){var t=e.call(this)||this;return t.shengli=null,t.getSkinImg=null,t.SkinArr=[],t.getSkinAni=null,t.get_skin_type=a.SCREW,t.getSkinIndex=-1,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onEnable=function(){this.node.getChildByName("bg").getComponent(cc.Animation).play("appear"),this.shengli.setAnimation(0,"huode",!1),this.shengli.addAnimation(0,"huode_loop",!0)},t.prototype.onDisable=function(){this.node.children[1].getChildByName("tips").active=!1},t.prototype.initBoardSkinImg=function(e){s.reportPage("GetskinPage"+this.get_skin_type,l.default.currLevel),this.get_skin_type=a.BOARD,this.getSkinImg.spriteFrame=this.SkinArr[e],this.getSkinImg.node.parent.active=!0,this.getSkinAni.node.active=!1,this.getSkinIndex=e},t.prototype.initScrewSkinAni=function(e){s.reportPage("GetskinPage"+this.get_skin_type,l.default.currLevel),console.log("---------\u521d\u59cb\u5316\u87ba\u4e1d\u76ae\u80a4\u83b7\u5f97\u9875\u9762",e),this.get_skin_type=a.SCREW,this.getSkinAni.animation=l.default.screwSkinName[e],this.getSkinImg.node.parent.active=!1,this.getSkinAni.node.active=!0,this.getSkinIndex=e,this.node.children[1].getChildByName("tips").active=!(e>=7),d.default.instance.screwItemContent.children[0].getChildByName(""+e).getChildByName("mask").active=!1},t.prototype.clickEquip=function(){var e=this;s.reportButton("GetskinPage","clickEquip_"+this.get_skin_type),this.get_skin_type==a.BOARD?(u.default.instance.loadSkin(this.getSkinIndex),l.default.boardSkinData.currentSkin=this.getSkinIndex,cc.sys.localStorage.setItem("currentSkin",l.default.boardSkinData.currentSkin),this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1},.2)):(d.default.instance.equipScrewSkin(this.getSkinIndex),h.default.instance.changeScrewAni(),this.clickAccept())},t.prototype.clickAccept=function(){var e=this;s.reportButton("GetskinPage","clickAccept"+this.get_skin_type),console.log("this.get_skin_type",this.get_skin_type),this.get_skin_type==a.BOARD?(this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1},.2)):(this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){if(e.node.active=!1,console.log("commonData.skinProgress",l.default.boardSkinData.skinProgress),-1!=l.default.boardSkinData.skinProgressTarget.indexOf(l.default.boardSkinData.skinProgress)){var t=l.default.boardSkinData.skinProgressTarget.indexOf(l.default.boardSkinData.skinProgress);if(console.log("\u5e94\u8be5\u89e3\u9501\u7684\u76ae\u80a4",t),1==l.default.boardSkinData.skinData[t])return;e.initBoardSkinImg(t),l.default.boardSkinData.skinData[t]=1;var o=l.default.boardSkinData.skinData.indexOf(0);if(console.log("---------\u4e0b\u4e00\u4e2a\u76ae\u80a4",o,l.default.boardSkinData.skinData),-1!=o){var a=l.default.boardSkinData.skinProgressTarget[o]-l.default.boardSkinData.skinProgress,n=e.node.children[1].getChildByName("tips");a>0?(n.getComponent(cc.Label).string="\u518d\u901a\u5173"+a+"\u5173\u53ef\u83b7\u5f97\u65b0\u76ae\u80a4",n.active=!0):n.active=!1}else e.node.children[1].getChildByName("tips").active=!1;e.showGetSkinView(),p.default.instance.setArrData("skinData"),""!=l.default.openId&&f.seletPostUserData(["board_skin"])}},.2))},t.prototype.showGetSkinView=function(){var e=this;this.getSkinImg.scheduleOnce(function(){e.node.active=!0},.2)},t.instance=null,__decorate([r(sp.Skeleton)],t.prototype,"shengli",void 0),__decorate([r(cc.Sprite)],t.prototype,"getSkinImg",void 0),__decorate([r(cc.SpriteFrame)],t.prototype,"SkinArr",void 0),__decorate([r(sp.Skeleton)],t.prototype,"getSkinAni",void 0),o=__decorate([c],t)}(cc.Component);o.default=m,cc._RF.pop()},{BattleManager:"BattleManager",GameManager:"GameManager",PostUserData:"PostUserData",commonData:"commonData",gameOverView:"gameOverView",newSkinView:"newSkinView",platform:"platform"}],giftView:[function(e,t,o){"use strict";cc._RF.push(t,"5758a3BVEVO5oPhk18E0KEK","giftView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("topView"),i=e("platform"),c=e("config"),r=e("startView"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=e.call(this)||this;return t.close=null,t.getBtn=null,t.toSidebar=null,t.giftBtn=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){this.giftBtn=r.default.instance.giftButton},t.prototype.onEnable=function(){console.log("\u5956\u52b1\u9875\u9762"),this.node.getChildByName("bg").getComponent(cc.Animation).play("appear"),a.default.formSidebarCard?this.getBtn.interactable=!0:this.getBtn.interactable=!1,i.reportPage("giftPage",a.default.currLevel)},t.prototype.clickGet=function(){i.reportButton("giftPage","getRewardBtn"),a.default.goldNum+=100,i.showTips("\u606d\u559c\u83b7\u5f97100\u91d1\u5e01"),n.default.instance.changeGoldNum(),a.default.isGetSidebarCardGift=!0,this.giftBtn.active=!1,this.clickClose(),cc.sys.localStorage.setItem("isGetSidebarCardGift",!0)},t.prototype.goSideBar=function(){this.node.active=!1,r.default.instance.showGameClubBtn(!0),i.reportButton("giftPage","goSideBarCardBtn"),window.tt&&c.currentPlatform==c.platformEnum.toutiao&&tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate to scene success")},fail:function(e){console.log("navigate to scene fail: ",e)}})},t.prototype.clickClose=function(){var e=this;i.reportButton("giftPage","closeBtn"),this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1,r.default.instance.showGameClubBtn(!0)},.2)},t.instance=null,__decorate([u(cc.Node)],t.prototype,"close",void 0),__decorate([u(cc.Button)],t.prototype,"getBtn",void 0),__decorate([u(cc.Node)],t.prototype,"toSidebar",void 0),o=__decorate([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{commonData:"commonData",config:"config",platform:"platform",startView:"startView",topView:"topView"}],ios:[function(e,t,o){"use strict";cc._RF.push(t,"57fb4ST0PNEbL0t2rewJmVO","ios"),Object.defineProperty(o,"__esModule",{value:!0}),o.onRewardAdStop=o.onRewardAdClose=o.showTips=o.showRewardAD=o.createRewardedVideoAd=o.showInterstitialAd=o.showBannerAD=o.initAds=o.showinsinterval=o.lastshowinstime=o.adFailFunc=o.rewardFuncTar=o.adRewardFunc=void 0;var a=cc._decorator,n=(a.ccclass,a.property,"IOSPlatformCallback");function i(e){console.log("showTips"),jsb.reflection.callStaticMethod(n,"showTips:",e)}function c(){o.adRewardFunc(o.rewardFuncTar)}function r(){i("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\uff01"),o.adFailFunc&&o.adFailFunc(o.rewardFuncTar)}window.Global_onRewardAdClose_IOS=function(e){cc.game.resume(),o.lastshowinstime=(new Date).getTime(),e?c():r(),o.adRewardFunc=null},o.adRewardFunc=null,o.rewardFuncTar=null,o.adFailFunc=null,o.lastshowinstime=0,o.showinsinterval=5e4,o.initAds=function(){},o.showBannerAD=function(e){jsb.reflection.callStaticMethod(n,"showBannerAd:",e)},o.showInterstitialAd=function(){var e=(new Date).getTime();e-o.lastshowinstime>o.showinsinterval&&(jsb.reflection.callStaticMethod(n,"showInterstitialAd"),o.lastshowinstime=e)},o.createRewardedVideoAd=function(){},o.showRewardAD=function(e,t){return new Promise(function(a,i){o.adRewardFunc=e.success,o.adRewardFunc=function(t){e.success(t),a(null)},o.rewardFuncTar=t,e.fail&&(o.adFailFunc=function(t){e.fail(t),i(null)}),cc.game.pause(),jsb.reflection.callStaticMethod(n,"showRewardedVideoAd")})},o.showTips=i,o.onRewardAdClose=c,o.onRewardAdStop=r,cc._RF.pop()},{}],itemView:[function(e,t,o){"use strict";var a;cc._RF.push(t,"7ffeaI0hLJBMr7LkRswc+3T","itemView"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_ITEM_STATUS=void 0;var n,i=e("commonData"),c=e("GameManager"),r=e("platform"),s=e("config"),l=e("BattleManager"),u=e("wechat"),d=e("GraphicalGameLevel"),h=e("CompGameManager"),p=e("GraphicalCreateLevel"),f=cc._decorator,m=f.ccclass;f.property,(n=a=o.ENUM_ITEM_STATUS||(o.ENUM_ITEM_STATUS={})).DIG="unlock",n.WITHDREW="withdraw",n.RESET="reset",n.PULLOUT="pullout",n.UNSCREW="unscrew",n.NONE="none";var g=function(e){function t(){var t=e.call(this)||this;return t.itemState=a.NONE,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.clickUnscrew=function(){this.itemState=a.UNSCREW,this.clickGet()},t.prototype.clickReset=function(){this.itemState=a.RESET,this.clickGet()},t.prototype.clickDigHole=function(){i.default.isUnLock?r.showTips("\u5df2\u7ecf\u6253\u8fc7\u5b54\u4e86\u54e6"):(this.itemState=a.DIG,this.clickGet())},t.prototype.clickDigHole_video=function(){var e=this;r.reportButton("GamePage","unlockBtn_video",i.default.currLevel,1,1),i.default.isUnLock?r.showTips("\u5df2\u7ecf\u6253\u8fc7\u5b54\u4e86\u54e6"):(this.itemState=a.DIG,r.showRewardAD(function(){e.clickGetRecall(),r.reportButton("GamePage","unlockBtn_video_success",i.default.currLevel,1,2)},this))},t.prototype.clickWithdrew=function(){var e=i.default.gamelevel.cloneNode;i.default.GameMode==i.GAME_MODE_ENUM.GARAPHICAL&&(e=d.default.instance.cloneNode),null==e||i.default.useItemNum[1]>=3?r.showTips("\u73b0\u5728\u65e0\u6cd5\u64a4\u56de\u54e6"):(this.itemState=a.WITHDREW,this.clickGet())},t.prototype.clickPullOut=function(){i.default.screwNum<=0?r.showTips("\u6ca1\u6709\u87ba\u4e1d\u4e86\uff01"):(this.itemState=a.PULLOUT,this.clickGet())},t.prototype.clickGiveUp=function(){},t.prototype.showAnswer=function(){},t.prototype.clickGet=function(){var e=this;i.default.isShareUseProp&&s.currentPlatform==s.platformEnum.wechat?(r.reportButton("GamePage",this.itemState+"Btn_share",i.default.currLevel,1,3),u.showShare2(function(){e.clickGetRecall(),i.default.shareUseProp++,i.default.GameMode==i.GAME_MODE_ENUM.COMPETITION?h.default.instance.changeUseItemMethod(0):c.default.instance.changeUseItemMethod(0),r.reportButton("GamePage",e.itemState+"Btn_share_success",i.default.currLevel,1,4)})):(r.reportButton("GamePage",this.itemState+"Btn_video",i.default.currLevel,1,1),r.showRewardAD(function(){i.default.watchVideoTimes++,2==i.default.watchVideoTimes&&(i.default.GameMode==i.GAME_MODE_ENUM.COMPETITION?h.default.instance.changeUseItemMethod(1):c.default.instance.changeUseItemMethod(1),i.default.watchVideoTimes=0),r.reportButton("GamePage",e.itemState+"Btn_video_success",i.default.currLevel,1,2),e.clickGetRecall()},this))},t.prototype.clickGetRecall=function(){switch(this.itemState){case a.DIG:i.default.gamelevel.unLock(),l.default.instance.playDigSound();break;case a.WITHDREW:i.default.GameMode==i.GAME_MODE_ENUM.GARAPHICAL?d.default.instance.withDrew():i.default.gamelevel.withDrew(),c.default.instance.playVibe(),r.showTips("\u64a4\u56de\u6210\u529f\uff01");break;case a.RESET:i.default.useItemNum[2]++,i.default.GameMode==i.GAME_MODE_ENUM.COMPETITION?h.default.instance.reset():c.default.instance.reset(),c.default.instance.playVibe(),r.showTips("\u91cd\u7f6e\u6210\u529f\uff01");break;case a.PULLOUT:r.showTips("\u9009\u62e9\u4e00\u4e2a\u87ba\u4e1d\u70b9\u51fb\u5220\u9664"),i.default.isPullOut=!0;try{p.default.instance.node.getChildByName("bg").getChildByName("mask").active=!0;var e=p.default.instance.node.getChildByName("bg").getChildByName("pulloutTip");e.active=!0,cc.Tween.stopAllByTarget(e),e.setPosition(cc.v2(0,-100)),e.opacity=0,cc.tween(e).to(.2,{position:cc.v3(0,-10),opacity:255}).to(1,{position:cc.v3(0,10)}).to(.2,{position:cc.v3(0,100),opacity:0}).start()}catch(t){}break;case a.UNSCREW:r.showTips("\u70b9\u51fb\u87ba\u6bcd\u89e3\u9501\u5427\uff01"),i.default.Unscrew_isUnlock=!0}},t.instance=null,o=__decorate([m],t)}(cc.Component);o.default=g,cc._RF.pop()},{BattleManager:"BattleManager",CompGameManager:"CompGameManager",GameManager:"GameManager",GraphicalCreateLevel:"GraphicalCreateLevel",GraphicalGameLevel:"GraphicalGameLevel",commonData:"commonData",config:"config",platform:"platform",wechat:"wechat"}],ks:[function(e,t,o){"use strict";cc._RF.push(t,"af4baUmEBtB5rJ57py7497P","ks"),Object.defineProperty(o,"__esModule",{value:!0}),o.onShow=o.onHide=o.getSystemInfo=o.getSystemInfoSync=o.vibrateShort=o.vibrateLong=o.showModal=o.shareLp=o.stopLp=o.startLp=o.showShare=o.showTips=o.showRewardAD=o.createRewardedVideoAd=o.initAds=o.init=void 0;var a="2300001331_01",n=null,i=null;function c(){n||(console.log("\u5feb\u624b\u521b\u5efaRewarded \u89c6\u9891\u5e7f\u544a"),(n=ks.createRewardedVideoAd({adUnitId:a})).onError(function(e){console.log("\u5feb\u624bRewarded \u52a0\u8f7d\u5931\u8d25"+e.msg,e.code)}))}function r(e){ks.showToast({title:e,icon:"none",duration:2500})}o.init=function(){(i=new ks.getGameRecorder).on("start",function(){console.log("\u5f55\u5c4f\u5f00\u59cb")}),i.on("error",function(e){console.log(e.error.code,"\u5f55\u5c4f\u9519\u8bef")}),i.on("stop",function(e){console.log(e.videoPath),e.videoPath,console.log("\u5f55\u5c4f\u7ed3\u675f")})},o.initAds=function(){c()},o.createRewardedVideoAd=c,o.showRewardAD=function(){return new Promise(function(e,t){cc.game.pause(),n.show(),n.onClose(function(o){cc.game.resume(),o&&o.isEnded?e():(r("\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1"),t())})})},o.showTips=r,o.showShare=function(e,t){ks.shareAppMessage({success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01"),e&&e(t)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25\uff01")},complete:function(){console.log("complete")}})},o.startLp=function(){i&&(i.start(),console.log("startLP"))},o.stopLp=function(){i&&i.stop()},o.shareLp=function(e,t){i&&i.publishVideo({callback:function(o){null==o||null==o?(console.log("\u5206\u4eab\u5f55\u5c4f\u6210\u529f"),e(t)):console.log("\u5f55\u5c4f\u5206\u4eab\u5931\u8d25\uff1a"+JSON.stringify(o))}})},o.showModal=function(e,t,o,a){ks.showModal({title:e,content:t,success:function(e){e.confirm?o&&o():e.cancel&&a&&a()},fail:function(){console.log("showModal\u8c03\u7528\u5931\u8d25")}})},o.vibrateLong=function(){},o.vibrateShort=function(){},o.getSystemInfoSync=function(){},o.getSystemInfo=function(){},o.onHide=function(){},o.onShow=function(){},cc._RF.pop()},{}],localStorage:[function(e,t,o){"use strict";var a;cc._RF.push(t,"7ef1ceUXJ5PBKS/bxyJvyRl","localStorage"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=cc._decorator,c=i.ccclass,r=(i.property,function(){function e(){}var t;return t=e,e.setLocalItems=function(e){e.forEach(function(e){var o=e.key,a=e.value;t.setLocalItem(o,a)})},e.setLocalItem=function(e,t){var o="";switch(!0){case null==t:o=new s(a.None,null).toString();break;case"number"==typeof t:o=new s(a.Number,t).toString();break;case"string"==typeof t:o=new s(a.String,t).toString();break;case"boolean"==typeof t:o=new s(a.Boolean,t).toString();break;case t instanceof Array:o=new s(a.Array,t).toString();break;case t instanceof Date:o=new s(a.Date,t).toString();break;case t instanceof Set:o=new s(a.Set,Array.from(t)).toString();break;case t instanceof Map:o=new s(a.Map,Array.from(t)).toString();break;case"object"==typeof t:o=new s(a.Object,t).toString();break;default:return void new Error("\u6682\u4e0d\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b\uff0c\u8bf7\u8f6c\u6362\u540e\u518d\u4f7f\u7528")}cc.sys.localStorage.setItem(this.PROJECT_NAME+e,o)},e.getLocalItems=function(e){var o=[];return e.forEach(function(e){var a=e.key,n=e.defaultValue;o.push(t.getLocalItem(a,n))}),o},e.getLocalItem=function(e,t){var o=cc.sys.localStorage.getItem(this.PROJECT_NAME+e);if(o&&""!==o){var n=JSON.parse(o);switch(a[n.type]){case a.None:o=null;break;case a.Number:case a.String:case a.Boolean:case a.Array:o=n.value;break;case a.Date:o=new Date(n.value);break;case a.Set:o=new Set(n.value);break;case a.Map:o=new Map(n.value);break;case a.Object:default:o=n.value}}else o=t;return o},e.removeLocalItems=function(e){e.forEach(function(e){return t.removeLocalItem(e)})},e.removeLocalItem=function(e){cc.sys.localStorage.removeItem(this.PROJECT_NAME+e)},e.VERSION="1.0.0",e.PROJECT_NAME="",t=__decorate([c],e)}());o.default=r,(n=a||(a={}))[n.None=-1]="None",n[n.String=0]="String",n[n.Number=1]="Number",n[n.Boolean=2]="Boolean",n[n.Array=3]="Array",n[n.Object=4]="Object",n[n.Date=5]="Date",n[n.Set=6]="Set",n[n.Map=7]="Map";var s=function(){function e(e,t){return this.type=a[a.None],this.value="",this.type=a[e],this.value=t,this}return e.prototype.toString=function(){return JSON.stringify(this)},e}();cc._RF.pop()},{}],lock:[function(e,t,o){"use strict";cc._RF.push(t,"cbddcsWJRROyoPLyilYgfbD","lock"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("itemView")),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){console.log("lockstart")},t.prototype.clickLock=function(){console.log("clickLock"),i.default.instance.clickDigHole()},__decorate([n],t)}(cc.Component);o.default=c,cc._RF.pop()},{itemView:"itemView"}],longScrew:[function(e,t,o){"use strict";cc._RF.push(t,"8e3adFKBpNFt4BnMkuKpuDE","longScrew"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("commonData")),c=e("unscrew"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isDelete=!1,t}return __extends(t,e),t.prototype.clickLongScrew=function(){c.default.instance.clickScrew(this.node)},t.prototype.onCollisionEnter=function(e,t){c.default.instance.screw_type==c.ENUM_SCREW_TYPE.BAKCANI&&(cc.Tween.stopAllByTarget(c.default.instance.moveScrew),c.default.instance.ReturnToOriginalPosition()),c.default.instance.screw_type==c.ENUM_SCREW_TYPE.MOVE&&(console.log("---------on collision enter"),c.default.instance.screw_type=c.ENUM_SCREW_TYPE.ANI,"nut"==e.name.slice(0,3)?this.playAni(e.node.parent):this.playAni(e.node),this.playAni(t.node))},t.prototype.playAni=function(e){"left"==e.name.slice(6)||"right"==e.name.slice(6)?this.playAniHorizontal(e):"up"!=e.name.slice(6)&&"down"!=e.name.slice(6)||this.playAniVertical(e)},t.prototype.playAniVertical=function(e){var t=e.getPosition();cc.tween(e).to(.1,{position:new cc.Vec3(t.x+5,t.y,0)},{easing:"quadInOut"}).to(.1,{position:new cc.Vec3(t.x-5,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x+8,t.y,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x-8,t.y,0)},{easing:"quadInOut"}).to(.02,{position:new cc.Vec3(t.x,t.y,0)},{easing:"quadInOut"}).call(function(){c.default.instance.ReturnToOriginalPosition()}).start()},t.prototype.playAniHorizontal=function(e){var t=e.getPosition();cc.tween(e).to(.1,{position:new cc.Vec3(t.x,t.y+5,0)},{easing:"quadInOut"}).to(.1,{position:new cc.Vec3(t.x,t.y-5,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x,t.y+8,0)},{easing:"quadInOut"}).to(.05,{position:new cc.Vec3(t.x,t.y-8,0)},{easing:"quadInOut"}).to(.02,{position:new cc.Vec3(t.x,t.y,0)},{easing:"quadInOut"}).call(function(){c.default.instance.ReturnToOriginalPosition()}).start()},t.prototype.update=function(){!this.isDelete&&c.default.instance.isLoadData&&(Math.abs(this.node.x)>i.default.windowWidth/2+200||Math.abs(this.node.y)>i.default.windowHeight/2)&&(console.log("---------\u5220\u9664\u8282\u70b9"),this.isDelete=!0,cc.tween(this.node).to(.2,{opacity:0}).call(function(){c.default.instance.deleteScrew()}).start())},__decorate([n],t)}(cc.Component);o.default=r,cc._RF.pop()},{commonData:"commonData",unscrew:"unscrew"}],mateView:[function(e,t,o){"use strict";cc._RF.push(t,"b7e9erhHmtCx6pu02Hg1ISj","mateView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("Game"),i=e("CompGameLevel"),c=e("CompGameManager"),r=e("config"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=e.call(this)||this;return t.gamePnl=null,t.defaultAvatar=null,t.PlayerAvatar=null,t.rivalsAvatar=[],t.gamelevel=null,t.isloadPrefab=!1,t.isloadData=!1,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){console.log("-------------initMateView"),this.initMateView()},t.prototype.initMateView=function(){this.gamelevel=null,a.default.gamelevel=null,this.preloadlevel(),this.initUserData(),this.ExtractLevel(),this.loadRivalsData(),c.default.instance.initCompData()},t.prototype.preloadlevel=function(){var e=this;n.default.resManager.loadBundleRes("levels","level1",cc.Prefab).catch(function(){console.error("\u52a0\u8f7dlevel1\u5931\u8d25!")}).then(function(t){var o=cc.instantiate(t);o.setParent(e.gamePnl.getChildByName("gameNode")),o.setPosition(0,0),e.gamelevel=o.getComponent(i.default),a.default.gamelevel=e.gamelevel,e.isloadPrefab=!0,console.log("\u52a0\u8f7dlevel1\u6210\u529f")})},t.prototype.startGame=function(){this.node.active=!1,a.default.isgameing=!0,this.gamePnl.active=!0,c.default.instance.init(),this.gamelevel.init(),c.default.instance.startClock()},t.prototype.ExtractLevel=function(){a.default.wholeSteelNum=0,a.default.CompetitionLevel=[];for(var e={easy:[],simple:[],hard:[],difficult:[]},t=0;t<a.default.CompMaxLevel;t++){for(var o=a.default.CompLevelType[t],n=Object.keys(a.default.CompLevelConfig[o]).length,i=Math.floor(Math.random()*n)+1;-1!=e[o].indexOf(i);)i=Math.floor(Math.random()*n)+1;a.default.CompetitionLevel.push({type:o,index:i}),e[o].push(i),a.default.wholeSteelNum+=a.default.CompLevelConfig[o][i].steel.num,a.default.CompLevelConfig[o][i].spSteel&&(a.default.wholeSteelNum+=a.default.CompLevelConfig[o][i].spSteel.num)}console.warn("\u7ade\u8d5b\u5173\u5361",a.default.CompetitionLevel)},t.prototype.initUserData=function(){if(""==a.default.UserAvatarUrl)this.PlayerAvatar.getComponent(cc.Sprite).spriteFrame=this.defaultAvatar,c.default.instance.playerAvatarNode[0].getComponent(cc.Sprite).spriteFrame=this.defaultAvatar;else{var e=void 0;r.currentPlatform==r.platformEnum.toutiao?e=tt:r.currentPlatform==r.platformEnum.wechat&&(e=wx);var t=e.createImage();this.createUserAvatar(t,a.default.UserAvatarUrl,[this.PlayerAvatar,c.default.instance.playerAvatarNode[0]])}for(var o=0;o<3;o++)this.rivalsAvatar[o].getChildByName("loading").active=!0,this.rivalsAvatar[o].getChildByName("head").active=!1},t.prototype.loadRivalsData=function(){var e,t=this;r.currentPlatform==r.platformEnum.toutiao?e=tt:r.currentPlatform==r.platformEnum.wechat&&(e=wx);for(var o=a.default.Random_Rivals.rivals,i=function(a){if(console.warn(o[a].head_url),""==o[a].head_url)c.default.instance.playerAvatarNode[a+1].getComponent(cc.Sprite).spriteFrame=s.defaultAvatar,s.rivalsAvatar[a].getChildByName("head").getComponent(cc.Sprite).spriteFrame=s.defaultAvatar;else if("local"==o[a].head_url.slice(0,5)){var i=parseInt(o[a].head_url.slice(6));n.default.resManager.loadRandomAvatar(i,s.rivalsAvatar[a].getChildByName("head")),n.default.resManager.loadRandomAvatar(i,c.default.instance.playerAvatarNode[a+1])}else{var r=e.createImage();s.createUserAvatar(r,o[a].head_url,[s.rivalsAvatar[a].getChildByName("head"),c.default.instance.playerAvatarNode[a+1]])}s.rivalsAvatar[a].getChildByName("head").width=155,s.rivalsAvatar[a].getChildByName("head").height=155;var l=Math.random()*(a+.5)+.5;s.scheduleOnce(function(){t.rivalsAvatar[a].children[1].active=!1,t.rivalsAvatar[a].children[0].active=!0,2==a&&t.scheduleOnce(function(){t.isloadData=!0},.8)},l)},s=this,l=0;l<3;l++)i(l)},t.prototype.update=function(){this.isloadData&&this.isloadPrefab&&(this.isloadPrefab=!1,this.isloadData=!1,this.startGame())},t.prototype.createUserAvatar=function(e,t,o){e.src=t,e.width=105,e.height=105,e.onload=function(){console.log("------\u521b\u5efa\u7528\u6237\u5934\u50cf\u6210\u529f");var t=new cc.SpriteFrame,a=new cc.Texture2D;a.initWithElement(e),t.setTexture(a),o.forEach(function(e){e.getComponent(cc.Sprite).spriteFrame=t})},e.onerror=function(e){console.log("------\u521b\u5efa\u7528\u6237\u5934\u50cf\u5931\u8d25",e)}},t.instance=null,__decorate([u(cc.Node)],t.prototype,"gamePnl",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"defaultAvatar",void 0),__decorate([u(cc.Node)],t.prototype,"PlayerAvatar",void 0),__decorate([u(cc.Node)],t.prototype,"rivalsAvatar",void 0),o=__decorate([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{CompGameLevel:"CompGameLevel",CompGameManager:"CompGameManager",Game:"Game",commonData:"commonData",config:"config"}],meizu:[function(e,t,o){"use strict";var a,n,i;cc._RF.push(t,"65e3b3m9ItPtrS+IHp8+QAl","meizu"),Object.defineProperty(o,"__esModule",{value:!0}),o.showTips=o.installShortcut=o.hasShortcutInstalled=o.showRewardAD=o.showInterstitialAd=o.showBannerAD=o.createRewardedVideoAd=o.createInterstitialAd=o.createBannerAd=o.initAds=void 0;var c=cc._decorator,r=(c.ccclass,c.property,"0mIfQa0V"),s="DiZZNma1",l="OV8gmoUN",u=null,d=null,h=null,p=!1,f=!1,m=!1,g=!1;function v(){if(console.log("createBannerAd"),p=!1,qg.createBannerAd&&""!=r){var e=qg.getSystemInfoSync().screenHeight,t=qg.getSystemInfoSync().screenWidth;(u=qg.createBannerAd({adUnitId:r,style:{left:0,top:e-t/6.7,width:t,height:t/6.7}})).onLoad(function(){console.log("createBannerAd success"),p=!0}),u.onError(function(e){console.log("createBannerAd fail err:",e),p=!1}),u.onClose(function(){p=!1,v()})}}function w(){console.log("createInterstitialAd"),m=!1,qg.createInsertAd&&""!=s&&((d=qg.createInsertAd({adUnitId:s})).load(),d.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),m=!0}),d.onError(function(e){console.log(e,"createInterstitialAd fail"),m=!1}),d.onClose(function(){m=!1,d.load()}))}function y(){f=!1,console.log("createRewardedVideoAd"),qg.createRewardedVideoAd&&""!=l&&((h=qg.createRewardedVideoAd({adUnitId:l})).load(),f=!1,h.onLoad(function(){console.log("\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),f=!0}),h.onError(function(e){console.log("Rewarded \u52a0\u8f7d\u5931\u8d25",e),S("\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"+e.code)}),h.onClose(function(e){f=!1,cc.game.resume(),h.load(),e&&e.isEnded||void 0===e?(console.log("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),a(i)):(console.log("\u4e2d\u9014\u5173\u95ed\u64ad\u653e"),n(i),S("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6"))}))}function S(e){mz.showToast({duration:2500,message:e})}o.initAds=function(){v(),w(),y()},o.createBannerAd=v,o.createInterstitialAd=w,o.createRewardedVideoAd=y,o.showBannerAD=function(e){if(u)if(e){if(g||!p)return;u.show()}else u.hide(),g=!1},o.showInterstitialAd=function(){if(d){if(!m)return void d.load();d.show().catch(function(e){console.log("interstitialAd err",e),w(),d.show()}).then(function(){console.log("interstitialAd")})}else w()},o.showRewardAD=function(e,t){a=e.success,i=t,e.fail&&(n=e.fail),null!=h&&f?(cc.game.pause(),h.show().then(function(){console.log("show then")}).catch(function(){console.log("show catch"),f||(S("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),h.load(),cc.game.resume())})):(S("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),y())},o.hasShortcutInstalled=function(e){qg&&qg.hasShortcutInstalled&&qg.hasShortcutInstalled({success:function(t){0==t?e.fail():e.success()},fail:function(){},complete:function(){}})},o.installShortcut=function(e){qg&&qg.installShortcut&&qg.installShortcut({success:function(){e.success()},fail:function(){e.fail&&e.fail()},complete:function(){}})},o.showTips=S,cc._RF.pop()},{}],newSkinView:[function(e,t,o){"use strict";cc._RF.push(t,"70c64PknjtN9pM0j8ckHUbH","newSkinView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=a.property,c=e("platform"),r=e("PostUserData"),s=e("commonData"),l=e("GameManager"),u=e("startView"),d=e("BattleManager"),h=e("UIManager"),p=function(e){function t(){var t=e.call(this)||this;return t.screwView=null,t.screwSkinPre=null,t.screwItemContent=null,t.screwSkinImg=[],t.boardView=null,t.boardSkinPre=null,t.boardItemContent=null,t.boardSkinImg=[],o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onEnable=function(){this.showScrewView(),this.initBoardView()},t.prototype.init=function(){this.initSkinData(),this.initScrewView(),h.default.instance.loadShowScrewPnl()},t.prototype.initSkinData=function(){for(var e=0;e<s.default.screwSkinData.skinProgressTarget.length;e++)s.default.screwSkinData.skinProgressTarget[e]<=s.default.screwSkinData.skinProgress&&(s.default.screwSkinData.skinData[e]=1);for(e=0;e<s.default.boardSkinData.skinProgressTarget.length;e++)s.default.boardSkinData.skinProgressTarget[e]<=s.default.boardSkinData.skinProgress&&(s.default.boardSkinData.skinData[e]=1);d.default.instance.setArrData("skinData"),d.default.instance.setArrData("screwSkinData"),""!=s.default.openId&&r.seletPostUserData(["little_man_skin","board_skin"])},t.prototype.showScrewView=function(){this.screwView.active=!0,this.boardView.active=!1},t.prototype.initScrewView=function(){for(var e=0;e<this.screwSkinImg.length;e++)if(e>=12);else{var t=cc.instantiate(this.screwSkinPre);t.setParent(this.screwItemContent.children[0]),t.name=e+"",t.children[0].getComponent(cc.Sprite).spriteFrame=this.screwSkinImg[e],e==s.default.screwSkinData.currentSkin?t.getChildByName("equiped").active=!0:t.getChildByName("equiped").active=!1,1==s.default.screwSkinData.skinData[e]?t.getChildByName("mask").active=!1:t.getChildByName("mask").active=!0}},t.prototype.equipScrewSkin=function(e){if(c.reportButton("SkinPage_Screw","equipBtn_"+e,s.default.currLevel),this.screwItemContent.children[0].children.length>0){var t=this.screwItemContent.children[0].children[s.default.screwSkinData.currentSkin],o=this.screwItemContent.children[0].children[e];t.getChildByName("equiped").active=!1,o.getChildByName("equiped").active=!0}s.default.screwSkinData.currentSkin=e,cc.sys.localStorage.setItem("currentScrewSkin",s.default.screwSkinData.currentSkin)},t.prototype.showBoardView=function(){this.screwView.active=!1,this.boardView.active=!0},t.prototype.initBoardView=function(){for(var e=0;e<this.boardItemContent.children.length;e++)this.boardItemContent.children[e].removeAllChildren();for(e=0;e<this.boardSkinImg.length;e++){var t=Math.floor(e/6),o=cc.instantiate(this.boardSkinPre);if(o.setParent(this.boardItemContent.children[t]),o.name=e+"",e<=6)if(o.children[0].getComponent(cc.Sprite).spriteFrame=this.boardSkinImg[e],o.getChildByName("piece").active=!1,s.default.boardSkinData.currentSkin==e)o.getChildByName("equiped").active=!0;else if(0==s.default.boardSkinData.skinData[e]){o.getChildByName("unlock").active=!0;var a=s.default.boardSkinData.skinProgressTarget[e]-s.default.boardSkinData.skinProgress;o.getChildByName("unlock").children[0].getComponent(cc.Label).string="\u518d\u8fc7"+a+"\u5173\u89e3\u9501"}else o.getChildByName("useBtn").active=!0;else if(1==s.default.boardSkinData.skinData[e])o.children[0].getComponent(cc.Sprite).spriteFrame=this.boardSkinImg[e],o.getChildByName("piece").active=!1,s.default.boardSkinData.currentSkin==e?o.getChildByName("equiped").active=!0:o.getChildByName("useBtn").active=!0;else{var n=o.getChildByName("piece");if(n.active=!0,3==s.default.boardSkinData.piece[e]){o.getChildByName("active").active=!0;for(var i=0;i<3;i++)this.setPiece(n.children[i],!0,e)}else{for(i=0;i<s.default.boardSkinData.piece[e];i++)this.setPiece(n.children[i],!0,e);for(i=s.default.boardSkinData.piece[e];i<3;i++)this.setPiece(n.children[i],!1,e);o.getChildByName("unlock").active=!0,o.getChildByName("unlock").children[0].getComponent(cc.Label).string=s.default.boardSkinData.piece[e]+"/3"}}}},t.prototype.setPiece=function(e,t,o){e.getComponent(cc.Sprite).spriteFrame=t?s.default.skinPieceImgArr[o-7+6]:s.default.skinPieceImgArr[o-7]},t.prototype.changeActive=function(e){var t=Math.floor(e/6);s.default.boardSkinData.skinData[e]=1;var o=this.boardItemContent.children[t].children[e-6*t];o.children[0].getComponent(cc.Sprite).spriteFrame=this.boardSkinImg[e],o.getChildByName("active").active=!1,o.getChildByName("piece").active=!1,o.getChildByName("useBtn").active=!0,d.default.instance.setArrData("skinData"),""!=s.default.openId&&r.seletPostUserData(["board_skin"])},t.prototype.changeBoardSkin=function(e){l.default.instance.loadSkin(e);var t=Math.floor(s.default.boardSkinData.currentSkin/6),o=Math.floor(e/6);c.reportButton("SkinPage_Board","changeSkinBtn_"+e),this.boardItemContent.children[t].children[s.default.boardSkinData.currentSkin-6*t].getChildByName("equiped").active=!1,this.boardItemContent.children[t].children[s.default.boardSkinData.currentSkin-6*t].getChildByName("useBtn").active=!0,this.boardItemContent.children[o].children[e-6*o].getChildByName("equiped").active=!0,this.boardItemContent.children[o].children[e-6*o].getChildByName("useBtn").active=!1,s.default.boardSkinData.currentSkin=e,cc.sys.localStorage.setItem("currentSkin",s.default.boardSkinData.currentSkin)},t.prototype.clickClose=function(){var e=this;c.reportButton("SkinPage","closeBtn"),this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1,u.default.instance.showGameClubBtn(!0)},.2)},t.instance=null,__decorate([i(cc.Node)],t.prototype,"screwView",void 0),__decorate([i(cc.Prefab)],t.prototype,"screwSkinPre",void 0),__decorate([i(cc.Node)],t.prototype,"screwItemContent",void 0),__decorate([i(cc.SpriteFrame)],t.prototype,"screwSkinImg",void 0),__decorate([i(cc.Node)],t.prototype,"boardView",void 0),__decorate([i(cc.Prefab)],t.prototype,"boardSkinPre",void 0),__decorate([i(cc.Node)],t.prototype,"boardItemContent",void 0),__decorate([i(cc.SpriteFrame)],t.prototype,"boardSkinImg",void 0),o=__decorate([n],t)}(cc.Component);o.default=p,cc._RF.pop()},{BattleManager:"BattleManager",GameManager:"GameManager",PostUserData:"PostUserData",UIManager:"UIManager",commonData:"commonData",platform:"platform",startView:"startView"}],noviceView:[function(e,t,o){"use strict";cc._RF.push(t,"a7cbam1t7NLKqJ6QRmxZE8n","noviceView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("platform"),i=cc._decorator,c=i.ccclass,r=i.property,s=function(e){function t(){var t=e.call(this)||this;return t.hand=null,t.maskImg=null,t.progress=0,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onEnable=function(){this.setPosition(),n.reportPage("novicePage",a.default.currLevel)},t.prototype.nextStep=function(){switch(console.log("\u65b0\u624b\u6559\u7a0b",this.progress),this.progress){case 1:this.movetoTopScrew();break;case 2:this.disappear()}},t.prototype.setPosition=function(){var e=this;this.hand.opacity=0;var t=a.default.levelConfig[a.default.currLevel],o=80*t.hole[0].x,n=80*t.hole[0].y-70;this.hand.setPosition(o,n),this.maskImg.setPosition(o,n),this.progress=1,this.scheduleOnce(function(){cc.tween(e.hand).to(.5,{opacity:255}).start()},.5)},t.prototype.movetoTopScrew=function(){var e=a.default.levelConfig[a.default.currLevel],t=80*e.hole[2].x,o=80*e.hole[2].y-70,n=cc.moveTo(.5,cc.v2(t,o));cc.tween(this.hand).then(n).start(),this.maskImg.setPosition(t,o),this.progress=2},t.prototype.disappear=function(){var e=this;this.node.getChildByName("image").active=!1,cc.tween(this.hand).to(.5,{opacity:0}).call(function(){e.hand.active=!1}).start(),this.progress=3},t.instance=null,__decorate([r(cc.Node)],t.prototype,"hand",void 0),__decorate([r(cc.Node)],t.prototype,"maskImg",void 0),o=__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{commonData:"commonData",platform:"platform"}],nut:[function(e,t,o){"use strict";var a;cc._RF.push(t,"180eeSTq2VMq5ykR4SSGkhg","nut"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_NUT_STATES=void 0;var n,i=cc._decorator,c=i.ccclass,r=(i.property,e("commonData")),s=e("GameManager"),l=e("unscrew");(n=a=o.ENUM_NUT_STATES||(o.ENUM_NUT_STATES={})).IDLE="idle",n.MOVE="move",n.PARENT_MOVE="parent_move",n.ANI="ani";var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nutState=a.IDLE,t}return __extends(t,e),t.prototype.clickNut=function(){l.default.instance.screw_type==l.ENUM_SCREW_TYPE.IDLE&&(r.default.Unscrew_isUnlock?this.deleteNut():this.nutState=a.MOVE)},t.prototype.deleteNut=function(){var e=this;l.default.instance.screw_type=l.ENUM_SCREW_TYPE.ANI,this.nutState=a.ANI;var t=this.node.convertToWorldSpaceAR(cc.v2(0,0)),o=s.default.instance.node.convertToNodeSpaceAR(t);s.default.instance.setAniNodePosition(o,1),cc.tween(this.node).to(.2,{scale:1.2}).call(function(){s.default.instance.playPullOutAni()}).to(.2,{scale:1.3,opacity:0}).call(function(){l.default.instance.screw_type=l.ENUM_SCREW_TYPE.IDLE,r.default.Unscrew_isUnlock=!1,e.node.destroy()}).start()},t.prototype.update=function(){var e=this;if(this.nutState==a.MOVE&&(l.default.instance.screw_type=l.ENUM_SCREW_TYPE.ANI,this.node.y-=8,Math.abs(this.node.x)>=this.node.parent.width/2+20||Math.abs(this.node.y)>=this.node.parent.height/2+20)){var t=cc.v3(this.node.x,-500);switch(this.node.getComponent(cc.BoxCollider).enabled=!1,this.node.parent.name.slice(6)){case"left":case"right":t=cc.v3(-500,this.node.y);break;case"up":t=cc.v3(this.node.x,-500);break;case"down":t=cc.v3(this.node.x,500)}this.nutState=a.IDLE,cc.tween(this.node).to(.3,{opacity:0,position:t}).call(function(){e.node.destroy(),l.default.instance.screw_type=l.ENUM_SCREW_TYPE.IDLE}).start()}},t.prototype.onCollisionEnter=function(){var e;this.nutState==a.MOVE?(console.warn("-------\u81ea\u5df1\u79fb\u52a8\u649e\u5230"),this.nutState=a.IDLE,e=cc.moveBy(.2,cc.v2(0,20)),cc.tween(this.node).then(e).call(function(){l.default.instance.screw_type=l.ENUM_SCREW_TYPE.IDLE}).start()):this.nutState==a.PARENT_MOVE&&(this.nutState=a.IDLE,console.warn("--------\u7236\u8282\u70b9\u79fb\u52a8\u649e\u5230"),l.default.instance.screw_type=l.ENUM_SCREW_TYPE.ANI,l.default.instance.ReturnToOriginalPosition())},__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{GameManager:"GameManager",commonData:"commonData",unscrew:"unscrew"}],oppo:[function(e,t,o){"use strict";var a,n;cc._RF.push(t,"53b00/8sgxP1719IG095fOk","oppo"),Object.defineProperty(o,"__esModule",{value:!0}),o.showTips=o.showModal=o.showRewardAD=o.showInterstitialAd=o.showBannerAD=o.installShortcut=o.hasShortcutInstalled=o.createRewardedVideoAd=o.createInterstitialAd=o.createBannerAd=o.showGameDrawerAd=o.createGameDrawerAd=o.initAds=void 0;var i=e("localStorage"),c=cc._decorator,r=(c.ccclass,c.property,"565111"),s="565115",l="395677",u=null,d=null,h=null;function p(){cc.sys.isBrowser||qg.getSystemInfoSync().platformVersionCode<1090?console.log("\u5feb\u5e94\u7528\u5e73\u53f0\u53f7\u4f4e\u4e8e1090\uff0c \u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API"):h=qg.createGameDrawerAd({adUnitId:l,style:{top:350}})}function f(){console.log("createBannerAd"),qg.createBannerAd&&((u=qg.createBannerAd({adUnitId:r,style:{top:qg.getSystemInfoSync().windowHeight-150}})).onLoad(function(){console.log("createBannerAd success")}),u.onError(function(e){console.log(e.errCode,"createBannerAd fail")}))}function m(){console.log("createRewardedVideoAd"),qg.createRewardedVideoAd?((d=qg.createRewardedVideoAd({adUnitId:s})).onLoad(function(){console.log("\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),d.onError(function(e){console.log("Rewarded \u52a0\u8f7d\u5931\u8d25"+e.errCode)}),d.onClose(function(e){cc.game.resume(),e&&e.isEnded||void 0===e?(console.log("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),g("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),a&&(a(),a=null)):(console.log("\u4e2d\u9014\u5173\u95ed\u64ad\u653e"),g("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6"),n&&(n(),n=null)),d.load()}),d.load()):console.log("qg \u4e0d\u5b58\u5728")}function g(e){qg.showToast({title:e,icon:"none",duration:1500})}o.initAds=function(){f(),m()},o.createGameDrawerAd=p,o.showGameDrawerAd=function(e){void 0===e&&(e=!0),h?e?h.show():h.hide():p()},o.createBannerAd=f,o.createInterstitialAd=function(){},o.createRewardedVideoAd=m,o.hasShortcutInstalled=function(e){qg&&qg.hasShortcutInstalled&&qg.hasShortcutInstalled({success:function(t){0==t?e.fail():e.success()},fail:function(){},complete:function(){}})},o.installShortcut=function(e){qg&&qg.installShortcut&&qg.installShortcut({success:function(){e.success()},fail:function(){e.fail&&e.fail()},complete:function(){}})},o.showBannerAD=function(e){if(cc.director.getTotalTime()<6e4)console.log("\u663e\u793abanner\u5931\u8d25  ====>  err: 60s\u540e\u624d\u80fd\u663e\u793a");else if(u)if(e){var t=i.default.getLocalItem("showBannerTimes",0),o=i.default.getLocalItem("secondBannerShowTime",0),a=Date.now()-o;if(a<30&&t>=2)return;a>30&&t>=2&&(t=0,o=Date.now()),t++,u.show().catch(function(e){console.log("banner err",e.errCode),f(),u.show()}).then(function(){console.log("banner\u5c55\u793a"),i.default.setLocalItem("showBannerTimes",t),i.default.setLocalItem("secondBannerShowTime",o)})}else u.hide();else f()},o.showInterstitialAd=function(){},o.showRewardAD=function(e){return void 0===e&&(e=function(){}),new Promise(function(t,o){if(!d)return g("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),m(),void o();cc.game.pause(),a=function(){e(),t("\u64ad\u653e\u5b8c\u6210")},n=function(){o("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")},d.show().catch(function(){cc.game.resume(),g("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),d.load(),o()})})},o.showModal=function(){},o.showTips=g,cc._RF.pop()},{localStorage:"localStorage"}],pauseView:[function(e,t,o){"use strict";cc._RF.push(t,"737f8tBUIFPRooOOeYPje5t","pauseView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("commonData")),c=e("platform"),r=e("UIManager"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.clickAddTime=function(){var e=this;c.reportButton("setPage","addTimeBtn_video",i.default.currLevel,1,1),c.showRewardAD(function(){c.reportButton("setPage","addTimeBtn_video_success",i.default.currLevel,1,2),i.default.gameTime+=60,e.closePausePnl()})},t.prototype.clickhelp=function(){c.reportButton("setPage","shareBtn",i.default.currLevel,1,3),c.showShare(function(){c.reportButton("setPage","shareBtn_success",i.default.currLevel,1,4)},null,2)},t.prototype.closePausePnl=function(){console.log("--------close pause Pnl"),c.reportButton("setPage","closeSetBtn",i.default.currLevel,1),c.showBannerAD(!1),r.default.instance.showPausePnl(!1),i.default.isPause=!1},t.prototype.closeGame=function(){var e=i.default.currLevel;0==i.default.isgameing&&(e=0),c.reportButton("setPage","exitGameBtn",e,1),c.reportPage("ExitPage",e),r.default.instance.showExitPnl(!0),this.closePausePnl(),i.default.isPause=!0},__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{UIManager:"UIManager",commonData:"commonData",platform:"platform"}],platform:[function(e,t,o){"use strict";cc._RF.push(t,"d4fea2zQ+ZGhale4F/qj5EC","platform"),Object.defineProperty(o,"__esModule",{value:!0}),o.requestSubscribe=o.reportRemain=o.reportLevel=o.reportAny=o.reportPage=o.reportButton=o.getCity=o.installShortcut=o.hasShortcutInstalled=o.showGameDrawerAd=o.exitGame=o.setRank=o.getRank=o.showAppBoxAD=o.onShow=o.onHide=o.shareLp=o.stopLp=o.resumeLp=o.pauseLp=o.startLp=o.toMiniGame=o.getSystemInfo=o.getSystemInfoSync=o.vibrateShort=o.vibrateLong=o.showModal=o.setMoreGamesInfo=o.showShare=o.showTips=o.openShare=o.showRewardAD=o.showGridAD=o.showInterstitialAd=o.showBannerAD=o.initAds=o.addshortCut=o.login=o.init=o.isAd=void 0;var a=e("config"),n=e("toutiao"),i=e("wechat"),c=e("qq"),r=e("android"),s=e("ios"),l=e("oppo"),u=e("ks"),d=e("web"),h=e("vivo"),p=e("commonData"),f=cc._decorator;function m(){if(!cc.sys.isBrowser&&o.isAd||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.initAds();break;case a.platformEnum.toutiao:n.initAds();break;case a.platformEnum.qq:c.initAds();break;case a.platformEnum.oppo:l.initAds();break;case a.platformEnum.android:r.initAds();break;case a.platformEnum.ios:s.initAds();break;case a.platformEnum.ks:u.initAds();break;case a.platformEnum.vivo:h.initAds();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ainitAds")}}f.ccclass,f.property,o.isAd=!1,o.init=function(){if(!cc.sys.isBrowser&&o.isAd||a.currentPlatform===a.platformEnum.web){switch(console.log("\u5e73\u53f0\u63a5\u53e3\u521d\u59cb\u5316"),a.currentPlatform){case a.platformEnum.wechat:i.init();break;case a.platformEnum.toutiao:n.init();break;case a.platformEnum.qq:c.init();break;case a.platformEnum.ks:u.init();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ainit")}m()}},o.login=function(){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.login();break;case a.platformEnum.toutiao:n.login();break;case a.platformEnum.qq:c.login();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ainit")}},o.addshortCut=function(){if(!cc.sys.isBrowser&&o.isAd||a.currentPlatform!=a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:break;case a.platformEnum.toutiao:n.addshortCut();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ainitAds")}else console.log("\u6dfb\u52a0\u5230\u684c\u9762")},o.initAds=m,o.showBannerAD=function(e){if(void 0===e&&(e=!0),!cc.sys.isBrowser&&o.isAd||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.showBannerAD(e);break;case a.platformEnum.toutiao:break;case a.platformEnum.qq:c.showBannerAD(e);break;case a.platformEnum.oppo:l.showBannerAD(e);break;case a.platformEnum.android:r.showBannerAD(e);break;case a.platformEnum.ios:s.showBannerAD(e);break;case a.platformEnum.vivo:h.showBannerAD(e);break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowBannerAD")}},o.showInterstitialAd=function(e){if(!cc.sys.isBrowser&&o.isAd||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:e&&e(),i.showInterstitialAd();break;case a.platformEnum.toutiao:n.showInterstitialAd(e);break;case a.platformEnum.qq:e&&e(),c.showInterstitialAd();break;case a.platformEnum.android:e&&e(),r.showInterstitialAd();break;case a.platformEnum.oppo:e&&e(),l.showInterstitialAd();break;case a.platformEnum.ios:e&&e(),s.showInterstitialAd();break;case a.platformEnum.vivo:e&&e(),h.showInterstitialAd();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowInterstitialAd")}else e&&e()},o.showGridAD=function(e){if(!cc.sys.isBrowser&&o.isAd||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.showCustomAd(e);break;case a.platformEnum.qq:c.showGridAD(e);break;case a.platformEnum.oppo:break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowInterstitialAd")}},o.showRewardAD=function(e,t){if(void 0===e&&(e=function(){}),void 0===t&&(t=null),console.log("\u663e\u793a\u5e7f\u544a"),cc.sys.isBrowser||!o.isAd)return new Promise(function(t){e&&e(),t()});switch(a.currentPlatform){case a.platformEnum.wechat:return i.showRewardAD(e);case a.platformEnum.toutiao:return n.showRewardAD(e);case a.platformEnum.qq:return c.showRewardAD();case a.platformEnum.oppo:return l.showRewardAD(e);case a.platformEnum.ks:return u.showRewardAD();case a.platformEnum.web:return d.showRewardAd();case a.platformEnum.android:return r.showRewardAD(e,t);case a.platformEnum.vivo:return h.showRewardAD(e,t);default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowRewardAD")}},o.openShare=function(){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.openShare();break;case a.platformEnum.toutiao:n.openShare();break;case a.platformEnum.qq:c.openShare();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1aopenShare")}},o.showTips=function(e){if(console.log("showTips : ",e),!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.showTips(e);break;case a.platformEnum.toutiao:n.showTips(e);break;case a.platformEnum.qq:c.showTips(e);break;case a.platformEnum.oppo:l.showTips(e);break;case a.platformEnum.android:r.showTips(e);break;case a.platformEnum.ios:s.showTips(e);break;case a.platformEnum.ks:u.showTips(e);break;case a.platformEnum.vivo:return h.showTips(e);default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowTips")}},o.showShare=function(e,t,o){if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===o&&(o=0),a.currentPlatform===a.platformEnum.web||!cc.sys.isBrowser)switch(a.currentPlatform){case a.platformEnum.wechat:i.showShare(e,t,o);break;case a.platformEnum.toutiao:n.showShare(e,t);break;case a.platformEnum.qq:c.showShare(e,t);break;case a.platformEnum.ks:u.showShare(e,t);break;case a.platformEnum.web:d.showShare();break;case a.platformEnum.android:r.showShare();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowShare")}},o.setMoreGamesInfo=function(){switch(a.currentPlatform){case a.platformEnum.toutiao:n.setMoreGamesInfo();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1asetMoreGamesInfo")}},o.showModal=function(e,t,o,r){if(void 0===o&&(o=null),void 0===r&&(r=null),!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.showModal(e,t,o,r);break;case a.platformEnum.toutiao:n.showModal(e,t,o,r);break;case a.platformEnum.qq:c.showModal(e,t,o,r);break;case a.platformEnum.oppo:l.showModal(e,t,o,r);break;case a.platformEnum.ks:u.showModal(e,t,o,r);break;case a.platformEnum.vivo:return h.showModal(e,t,o,r);default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowShare")}},o.vibrateLong=function(){},o.vibrateShort=function(){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.vibrateShort();break;case a.platformEnum.toutiao:n.vibrateShort();break;case a.platformEnum.qq:c.vibrateShort();break;case a.platformEnum.vivo:h.vibrateShort();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowShare")}},o.getSystemInfoSync=function(){var e=null;switch(a.currentPlatform){case a.platformEnum.wechat:e=i.getSystemInfoSync();break;case a.platformEnum.toutiao:e=n.getSystemInfoSync();break;case a.platformEnum.qq:e=c.getSystemInfoSync();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowShare")}return e},o.getSystemInfo=function(e){switch(a.currentPlatform){case a.platformEnum.wechat:i.getSystemInfo(e);break;case a.platformEnum.toutiao:n.getSystemInfo(e);break;case a.platformEnum.qq:c.getSystemInfo(e);break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowShare")}},o.toMiniGame=function(e){switch(a.currentPlatform){case a.platformEnum.wechat:i.toMiniGame(e);break;case a.platformEnum.toutiao:n.toMiniGame();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowShare")}},o.startLp=function(){switch(a.currentPlatform){case a.platformEnum.toutiao:n.startLp();break;case a.platformEnum.ks:u.startLp();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1astartLp")}},o.pauseLp=function(){switch(a.currentPlatform){case a.platformEnum.toutiao:n.pauseLp();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"pauseLp")}},o.resumeLp=function(){switch(a.currentPlatform){case a.platformEnum.toutiao:n.resumeLp();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"resumeLp")}},o.stopLp=function(){switch(a.currentPlatform){case a.platformEnum.toutiao:n.stopLp();break;case a.platformEnum.ks:u.stopLp();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1astopLp")}},o.shareLp=function(e,t){if(void 0===t&&(t=null),!cc.sys.isBrowser&&o.isAd)switch(a.currentPlatform){case a.platformEnum.toutiao:n.shareLp(e,t);break;case a.platformEnum.ks:u.shareLp(e,t);break;case a.platformEnum.web:d.showRewardAd(e,t);break;case a.platformEnum.android:r.showRewardAD(e,t);case a.platformEnum.oppo:l.showRewardAD(e);default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashareLp")}else e()},o.onHide=function(e){switch(a.currentPlatform){case a.platformEnum.wechat:i.onHide(e);break;case a.platformEnum.toutiao:n.onHide(e);break;case a.platformEnum.qq:c.onHide(e);break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1aonHide")}},o.onShow=function(e){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.wechat:i.onShow(e);break;case a.platformEnum.toutiao:n.onShow(e);break;case a.platformEnum.qq:c.onShow(e);break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1aonShow")}},o.showAppBoxAD=function(){switch(a.currentPlatform){case a.platformEnum.wechat:c.showAppBoxAd();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowAppBoxAD")}},o.getRank=function(){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.toutiao:n.getRankList();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1agetRank")}},o.setRank=function(e){if(console.log("\u8bbe\u7f6e\u6392\u884c\u699c",e),!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.toutiao:n.setScore(e);break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1asetRank")}},o.exitGame=function(){switch(a.currentPlatform){case a.platformEnum.android:r.exitGame();break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1aexitGame")}},o.showGameDrawerAd=function(){if(!cc.sys.isBrowser)switch(a.currentPlatform){case a.platformEnum.oppo:l.createGameDrawerAd();default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1ashowGameDrawerAd")}},o.hasShortcutInstalled=function(e){if(cc.sys.isBrowser)e.success();else switch(a.currentPlatform){case a.platformEnum.wechat:case a.platformEnum.toutiao:case a.platformEnum.qq:e.success();break;case a.platformEnum.oppo:l.hasShortcutInstalled(e);break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1alogin")}},o.installShortcut=function(e){if(cc.sys.isBrowser)e.success();else switch(a.currentPlatform){case a.platformEnum.wechat:case a.platformEnum.toutiao:case a.platformEnum.qq:e.success();break;case a.platformEnum.oppo:l.installShortcut(e);break;default:console.log("\u5e73\u53f0"+a.currentPlatform+"\u672a\u5b9a\u4e49API\uff1alogin")}},o.getCity=function(e){if(cc.sys.isBrowser&&a.currentPlatform!==a.platformEnum.web)e("\u4e0a\u6d77\u5e02");else switch(a.currentPlatform){case a.platformEnum.toutiao:n.getLocation3().catch(function(){e("\u4e0a\u6d77\u5e02")}).then(function(t){e(t)})}},o.reportButton=function(e,t,o,c,r){void 0===o&&(o=0),void 0===c&&(c=0),void 0===r&&(r=5);var s="";switch(c){case 0:default:break;case 1:s=p.default.GameMode}if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.toutiao:n.reportButton(e,t,o,r,s);break;case a.platformEnum.wechat:i.reportButton(e,t,o,r,s);break;default:console.log("\u5e73\u53f0\u672a\u5b9a\u4e49\u57cb\u70b9")}},o.reportPage=function(e,t){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.toutiao:n.reportPage(e,t);break;case a.platformEnum.wechat:i.reportPage(e,t);break;default:console.log("\u5e73\u53f0\u672a\u5b9a\u4e49\u57cb\u70b9")}},o.reportAny=function(e,t){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.toutiao:n.reportAny(e,t);break;case a.platformEnum.wechat:i.reportAny(e,t);break;default:console.log("\u5e73\u53f0\u672a\u5b9a\u4e49\u57cb\u70b9")}},o.reportLevel=function(e,t,o,i,c){if(void 0===o&&(o="normal"),void 0===i&&(i=""),void 0===c&&(c=0),!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch("competition"==o&&(i=p.default.CompetitionLevel[e].type,c=p.default.CompetitionLevel[e].index),a.currentPlatform){case a.platformEnum.toutiao:n.reportPass(e,o,i,c,t);break;case a.platformEnum.wechat:break;default:console.log("\u5e73\u53f0\u672a\u5b9a\u4e49\u57cb\u70b9")}},o.reportRemain=function(){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.toutiao:n.reportRemain();break;default:console.log("\u5e73\u53f0\u672a\u5b9a\u4e49\u57cb\u70b9")}},o.requestSubscribe=function(){if(!cc.sys.isBrowser||a.currentPlatform===a.platformEnum.web)switch(a.currentPlatform){case a.platformEnum.toutiao:n.requestSubscribe();break;default:console.log("\u5e73\u53f0\u672a\u5b9a\u4e49\u8ba2\u9605\u6d88\u606f")}},cc._RF.pop()},{android:"android",commonData:"commonData",config:"config",ios:"ios",ks:"ks",oppo:"oppo",qq:"qq",toutiao:"toutiao",vivo:"vivo",web:"web",wechat:"wechat"}],province:[function(e,t,o){"use strict";cc._RF.push(t,"0ef89ecZWFECKNkdIkbW8Cm","province"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("areaView")),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.clickProvince=function(){var e=parseInt(this.node.name);i.default.instance.chooseProvince(e)},__decorate([n],t)}(cc.Component);o.default=c,cc._RF.pop()},{areaView:"areaView"}],qq:[function(e,t,o){"use strict";var a,n,i,c,r,s;cc._RF.push(t,"6fbe4QTZS9MBatqG8ob67JA","qq"),Object.defineProperty(o,"__esModule",{value:!0}),o.removeDownloadFile=o.downImageFile=o.loadSubpackage=o.login=o.onShow=o.onHide=o.toMiniGame=o.getSystemInfo=o.getSystemInfoSync=o.vibrateShort=o.vibrateLong=o.showModal=o.showShare=o.showTips=o.openShare=o.showRewardAD=o.showAppBoxAd=o.showInterstitialAd=o.showBannerAD=o.showGridAD=o.createBlockAd=o.createRewardedVideoAd=o.createAppBox=o.createInterstitialAd=o.createBannerAd=o.initAds=o.init=void 0;var l=e("ShareTitle"),u=cc._decorator,d=(u.ccclass,u.property,""),h="",p="",f="",m="",g=null,v=null,w=null,y=null,S=null,P=!1,_=!1;function A(){qq.createBannerAd&&""!=d&&(g=qq.createBannerAd({adUnitId:d,style:{width:200,left:qq.getSystemInfoSync().windowWidth/2-100,top:qq.getSystemInfoSync().windowHeight-112.5}}),qq.getSystemInfo({success:function(e){console.log(e.appName),g.onResize(function(e){console.log(e.width,e.height),g.style.top=qq.getSystemInfoSync().windowHeight-e.height,g.style.left=(qq.getSystemInfoSync().windowWidth-e.width)/2}),g.onError(function(e){console.log(e),console.log("createBannerAd fail")})}}))}function b(){qq.createInterstitialAd&&""!=h&&(v=qq.createInterstitialAd({adUnitId:h})).load()}function k(){qq.createAppBox&&""!=m&&(S=qq.createAppBox({adUnitId:m})).load()}function N(){qq.createRewardedVideoAd&&""!=p&&(w=qq.createRewardedVideoAd({adUnitId:p}),P=!1,w.onLoad(function(){console.log("\u52a0\u8f7d\u6210\u529f"),P=!0}),w.onError(function(e){console.log("Rewarded \u52a0\u8f7d\u5931\u8d25"+e),P=!1}),w.onClose(function(e){cc.game.resume(),e&&e.isEnded||void 0===e?(console.log("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),a(i)):(console.log("\u4e2d\u9014\u5173\u95ed\u64ad\u653e"),qq.showToast({title:"\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6",icon:"none",duration:2500}),n&&n(i))}))}function C(){qq.createBlockAd&&""!=f&&((y=qq.createBlockAd({adUnitId:f,style:{left:qq.getSystemInfoSync().windowWidth/2-100,top:qq.getSystemInfoSync().windowHeight-112.5},size:5,orientation:"landscape"})).onLoad(function(){console.log("blockAd load"),y.show()}),y.onResize(function(e){console.log("Resize\u540e\u6b63\u5f0f\u5bbd\u9ad8:",e.realWidth,e.realHeight),y.style.top=qq.getSystemInfoSync().windowHeight-e.realHeight,y.style.left=(qq.getSystemInfoSync().windowWidth-e.realWidth)/2}),y.onError(function(e){console.log(e),console.log("blockAd fail")}))}function M(e){qq.showToast({title:e,icon:"none",duration:2500})}o.init=function(){qq.onShow(function(){_&&(_=!1,Date.now()-c>=2500?r&&r(s):M("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01"),r=null)})},o.initAds=function(){A(),b(),N(),k()},o.createBannerAd=A,o.createInterstitialAd=b,o.createAppBox=k,o.createRewardedVideoAd=N,o.createBlockAd=C,o.showGridAD=function(e){e?C():null!=y&&y.destroy()},o.showBannerAD=function(e){null!=g&&(e?g.show():g.hide())},o.showInterstitialAd=function(){null!=v&&v.show().catch(function(e){console.warn("interAD error",e)})},o.showAppBoxAd=function(){S&&S.show()},o.showRewardAD=function(){return new Promise(function(e,t){if(null==w)return qq.showToast({title:"\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!",icon:"none",duration:2500}),N(),void t("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!");cc.game.pause(),w.show().then(function(){w.onClose(function(o){cc.game.resume(),o&&o.isEnded||void 0===o?(console.log("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),e(0)):(console.log("\u4e2d\u9014\u5173\u95ed\u64ad\u653e"),qq.showToast({title:"\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6",icon:"none",duration:2500}),t("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6"))})}).catch(function(){console.log("show catch"),P||(qq.showToast({title:"\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!",icon:"none",duration:2500}),w.load(),t("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!")),cc.game.resume()})})},o.openShare=function(){qq.showShareMenu&&(qq.showShareMenu({withShareTicket:!0,showShareItems:["qq","qzone"]}),qq.onShareAppMessage(function(){return{title:l.default.getRandomTitle(),imageUrl:l.default.getRandomImageUrl()}}))},o.showTips=M,o.showShare=function(e,t){qq.shareAppMessage({title:l.default.getRandomTitle(),imageUrl:l.default.getRandomImageUrl()}),r=e,s=t,_=!0,c=Date.now()},o.showModal=function(e,t,o,a){qq.showModal({title:e,content:t,success:function(e){e.confirm?o&&o():e.cancel&&a&&a()}})},o.vibrateLong=function(){qq.vibrateLong({success:function(e){console.log(""+e)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},o.vibrateShort=function(){qq.vibrateShort({success:function(e){console.log(""+e)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},o.getSystemInfoSync=function(){try{return qq.getSystemInfoSync()}catch(e){console.log("getSystemInfoSync fail")}},o.getSystemInfo=function(e){qq.getSystemInfo({success:function(){e.success()},fail:function(){e.fail&&e.fail()},complete:function(){e.complete&&e.complete()}})},o.toMiniGame=function(e){qq.navigateToMiniProgram({appId:e,path:"",extraData:{time:(new Date).valueOf()},success:function(){}})},o.onHide=function(e){qq.onHide(function(){e()})},o.onShow=function(e){qq.onShow(function(){e()})},o.login=function(){return new Promise(function(e,t){qq.login({timeout:3e3,success:function(o){o.code?e(o.code):t("\u672a\u83b7\u53d6\u5230code")},fail:function(e){t(e)}})})},o.loadSubpackage=function(e){return new Promise(function(t,o){qq.loadSubpackage({name:e,success:function(){console.log("qq\u52a0\u8f7d\u5206\u5305====> \u6210\u529f","\u5206\u5305\u540d:"+e),t(0)},fail:function(t){console.log("qq\u52a0\u8f7d\u5206\u5305====> \u5931\u8d25","\u5206\u5305\u540d:"+e,"err = "+t),o()}})})},o.downImageFile=function(e){for(var t=""+wx.env.USER_DATA_PATH,o=e.split("resource/")[1];-1!=o.indexOf("/");){var a=o.indexOf("/"),n=o.substring(0,a),i=o.substring(a+1,o.length);o=n+"-"+i}var c=t+"/"+o,r=qq.getFileSystemManager();return new Promise(function(t,o){r.stat({path:c,success:function(e){e.stats.isDirectory(),e.stats.isFile()&&t(c)},fail:function(){qq.downloadFile({url:e,success:function(e){r.saveFile({tempFilePath:e.tempFilePath,filePath:c,success:function(){console.log("\u4fdd\u5b58\u5230\u672c\u5730!!!"),t(c)},fail:function(){o("\u6587\u4ef6\u4fdd\u5b58\u5931\u8d25!")}})},fail:function(){o("\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25!")}})}})})},o.removeDownloadFile=function(e){for(var t=""+wx.env.USER_DATA_PATH,o=e.split("resource/")[1];-1!=o.indexOf("/");){var a=o.indexOf("/"),n=o.substring(0,a),i=o.substring(a+1,o.length);o=n+"-"+i}var c=t+"/"+o,r=qq.getFileSystemManager();return new Promise(function(t,o){r.stat({path:c,success:function(a){a.stats.isFile()&&(r.unlink({filePath:c,success:function(){console.log("\u5220\u9664\u672c\u5730\u56fe\u7247\u6210\u529f!!!!!",e),t(0)},fail:function(){o()}}),t(c))},fail:function(){console.log("\u672c\u5730\u56fe\u7247\u4e0d\u5b58\u5728",e),t(0)}})})},cc._RF.pop()},{ShareTitle:"ShareTitle"}],rankView:[function(e,t,o){"use strict";cc._RF.push(t,"c1dbf9sqHxMiIV2WFPcJ385","rankView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){this.node.getChildByName("bg").getComponent(cc.Animation).play("appear")},__decorate([n],t)}(cc.Component));o.default=i,cc._RF.pop()},{}],reviveView:[function(e,t,o){"use strict";cc._RF.push(t,"f467cVEHnNMOanOXNA9QQTD","reviveView"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,e("config")),c=e("commonData"),r=e("GameManager"),s=e("platform"),l=e("UIManager"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.clickRevive=function(){var e=this;s.reportButton("revivePage","addTimeBtn_video",c.default.currLevel,1,1),s.showRewardAD(function(){s.reportButton("revivePage","addTimeBtn_video_success",c.default.currLevel,1,2),c.default.isAddTime=!0,r.default.instance.init(),e.node.active=!1})},t.prototype.clickGiveup=function(){s.reportButton("revivePage","giveUpBtn",c.default.currLevel,1),r.default.instance.showGameoverPnl(0),l.default.instance.showRevivePnl(!1)},t.prototype.onLoad=function(){i.currentPlatform==i.platformEnum.wechat?(this.node.getChildByName("bg").getChildByName("tt").active=!1,this.node.getChildByName("bg").getChildByName("wx").active=!0):(this.node.getChildByName("bg").getChildByName("tt").active=!0,this.node.getChildByName("bg").getChildByName("wx").active=!1)},__decorate([n],t)}(cc.Component);o.default=u,cc._RF.pop()},{GameManager:"GameManager",UIManager:"UIManager",commonData:"commonData",config:"config",platform:"platform"}],setView:[function(e,t,o){"use strict";cc._RF.push(t,"d3495Ql3KRInqE2vvGFY+PQ","setView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("BattleManager"),n=e("commonData"),i=e("GameManager"),c=e("platform"),r=e("UIManager"),s=e("topView"),l=e("startView"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.swithBgImg=[],t.Sound=null,t.Music=null,t.Vibe=null,t.exitPnl=null,t.GameingBtn=null,t.closeBtn=null,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.onEnable=function(){l.default.instance.showGameClubBtn(!1),c.showBannerAD(),n.default.isPause=!0,this.closeBtn.active=!0;var e=0;1==n.default.isgameing?(this.GameingBtn.active=!0,this.closeBtn.active=!1,e=n.default.currLevel):(this.GameingBtn.active=!1,this.closeBtn.active=!0),this.updateSet(),a.default.instance.playSetSound(),a.default.instance.stopGroundMusic(),this.node.getChildByName("bg").getComponent(cc.Animation).play("appear"),c.reportPage("setPage",e)},t.prototype.onDisable=function(){n.default.musicOn?a.default.instance.playGroundMusic():a.default.instance.stopGroundMusic(),l.default.instance.showGameClubBtn(!0)},t.prototype.updateSet=function(){console.log("====",n.default.musicOn);var e=this.Sound.getChildByName("swithbg");e.getComponent(cc.Sprite).spriteFrame=this.swithBgImg[1==n.default.soundOn?1:0],e.getChildByName("switch").x=1==n.default.soundOn?70:-70,(e=this.Music.getChildByName("swithbg")).getComponent(cc.Sprite).spriteFrame=this.swithBgImg[1==n.default.musicOn?1:0],e.getChildByName("switch").x=1==n.default.musicOn?70:-70,(e=this.Vibe.getChildByName("swithbg")).getComponent(cc.Sprite).spriteFrame=this.swithBgImg[1==n.default.vibrateOn?1:0],e.getChildByName("switch").x=1==n.default.vibrateOn?70:-70},t.prototype.switchCallback=function(e,t){var o=n.default.currLevel;0==n.default.isgameing&&(o=0),0==t?(n.default.soundOn=!n.default.soundOn,cc.sys.localStorage.setItem("sound",n.default.soundOn+""),c.reportButton("setPage","changeSoundBtn_"+n.default.soundOn,o)):1==t?(n.default.musicOn=!n.default.musicOn,cc.sys.localStorage.setItem("music",n.default.musicOn+""),c.reportButton("setPage","changeMusicBtn_"+n.default.musicOn,o)):(n.default.vibrateOn=!n.default.vibrateOn,cc.sys.localStorage.setItem("vibe",n.default.vibrateOn+""),c.reportButton("setPage","changeVibrateBtn_"+n.default.vibrateOn,o)),this.updateSet()},t.prototype.closeSetPnl=function(){var e=this,t=n.default.currLevel;0==n.default.isgameing&&(t=0),c.reportButton("setPage","closeSetBtn",t,0),c.showBannerAD(!1),this.node.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.node.active=!1},.2),n.default.isPause=!1},t.prototype.closeGame=function(){var e=n.default.currLevel;0==n.default.isgameing&&(e=0),c.reportButton("setPage","exitGameBtn",e,0),c.reportPage("ExitPage",e),n.default.GameMode==n.GAME_MODE_ENUM.COMPETITION?(this.exitPnl.active=!0,this.exitPnl.getChildByName("bg").getComponent(cc.Animation).play("appear"),this.closeSetPnl()):(r.default.instance.showSetPnl(!1),r.default.instance.showExitPnl(!0)),n.default.isPause=!0},t.prototype.clickquieGame=function(){var e=this,t=n.default.currLevel;0==n.default.isgameing&&(t=0),c.reportButton("ExitPage","exitGameBtn",t,0),i.default.instance.hideNovice(),n.default.isgameing=!1,this.exitPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){i.default.instance.showGameoverPnl(2),e.exitPnl.active=!1},.2),c.showBannerAD(!1)},t.prototype.clickback=function(){var e=this,t=n.default.currLevel;0==n.default.isgameing&&(t=0),c.reportButton("ExitPage","backToGameBtn",t,0),c.showBannerAD(!1),n.default.isPause=!1,this.exitPnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.exitPnl.active=!1},.2)},t.prototype.clickAddTime=function(){c.reportButton("setPage","addTimeBtn_video",n.default.currLevel,1),c.showRewardAD(function(){c.reportButton("setPage","addTimeBtn_video_success",n.default.currLevel,2),n.default.gameTime+=60})},t.prototype.clickhelp=function(){c.reportButton("setPage","shareBtn",n.default.currLevel,1,3),c.showShare(function(){c.reportButton("setPage","shareBtn_success",n.default.currLevel,1,4)},null,2)},t.prototype.closePausePnl=function(){s.default.instance.closePausePnl()},__decorate([h(cc.SpriteFrame)],t.prototype,"swithBgImg",void 0),__decorate([h(cc.Node)],t.prototype,"Sound",void 0),__decorate([h(cc.Node)],t.prototype,"Music",void 0),__decorate([h(cc.Node)],t.prototype,"Vibe",void 0),__decorate([h(cc.Node)],t.prototype,"exitPnl",void 0),__decorate([h(cc.Node)],t.prototype,"GameingBtn",void 0),__decorate([h(cc.Node)],t.prototype,"closeBtn",void 0),__decorate([d],t)}(cc.Component);o.default=p,cc._RF.pop()},{BattleManager:"BattleManager",GameManager:"GameManager",UIManager:"UIManager",commonData:"commonData",platform:"platform",startView:"startView",topView:"topView"}],showScrewView:[function(e,t,o){"use strict";cc._RF.push(t,"d0305aX7ItPnZHzqmA3gMRk","showScrewView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("UIManager"),i=cc._decorator,c=i.ccclass,r=i.property,s=function(e){function t(){var t=e.call(this)||this;return t.screwSkinImg=[],t.screwSkinSprite=null,t.tipsLabel=null,t.gzhNode=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.showScrewSkin=function(e,t){7==e&&0==a.default.screwSkinData.skinData[7]?this.gzhNode.active=!0:this.gzhNode.active=!1,this.tipsLabel.string=t,this.screwSkinSprite.spriteFrame=this.screwSkinImg[e],n.default.instance.showShowScrewPnl(!0)},t.prototype.clickClose=function(){n.default.instance.showShowScrewPnl(!1)},t.prototype.clickGoGzhPnl=function(){this.clickClose(),n.default.instance.showGZHPnl(!0)},t.instance=null,__decorate([r(cc.SpriteFrame)],t.prototype,"screwSkinImg",void 0),__decorate([r(cc.Sprite)],t.prototype,"screwSkinSprite",void 0),__decorate([r(cc.Label)],t.prototype,"tipsLabel",void 0),__decorate([r(cc.Node)],t.prototype,"gzhNode",void 0),o=__decorate([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{UIManager:"UIManager",commonData:"commonData"}],startView:[function(e,t,o){"use strict";cc._RF.push(t,"3932fCFxrxCfa5dRhsayJJ2","startView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("Game"),i=e("GameLevel"),c=e("GameManager"),r=e("BattleManager"),s=e("wxSubContextView"),l=e("GraphicalGameLevel"),u=e("topView"),d=e("compView"),h=e("UIManager"),p=e("platform"),f=e("config"),m=e("toutiao"),g=e("wechat"),v=e("PostUserData"),w=cc._decorator,y=w.ccclass,S=w.property,P=function(e){function t(){var t=e.call(this)||this;return t.gamePnl=null,t.compPnl=null,t.playButton=null,t.giftButton=null,t.addShortCutButton=null,t.loadImg=null,t.graphicalBtn=null,t.unscrewBtn=null,t.eliminateBtn=null,t.choosePnl=null,t.gameClubBtn=null,t.provinceBoard=[],t.provincePre=null,t.screwLMPre=null,t.provinceContent=null,t.visibleItemCount=3,t.sortedProvince=[],t.sortedPoint=[],t.isLogin=!1,t.nowLoadLv=0,t.gamelevel=null,t.isloadPrefab=!1,t.lvPrefab=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.loadImg.active=!0,this.gamePnl.active=!1;var e=cc.find("Canvas").getComponent(cc.Canvas);a.default.windowHeight/a.default.windowWidth<1.8?(e.fitHeight=!0,e.fitWidth=!1):(e.fitHeight=!1,e.fitWidth=!0)},t.prototype.start=function(){this.initProvinceRank(),this.initChanllengePool(),this.initBtn(),c.default.instance.loadSkin(a.default.boardSkinData.currentSkin),console.log("------------commonData.isShowAchievement",a.default.isShowAchievement),a.default.isShowAchievement&&a.default.passLevel>=a.default.AchievementData.achievementGoal[0]&&this.scheduleOnce(function(){r.default.instance.showAchievementPopup()},.5)},t.prototype.onEnable=function(){a.default.isFirstGame,u.default.instance.changeSetBtn(),h.default.instance.loadUI&&this.preloadlevel(),this.getCurrentLv(),r.default.instance.playGroundMusic(),r.default.instance.stopFailSound(),r.default.instance.stopWinSound(),p.reportPage("StartPage",0),null!=this.gameClubBtn&&this.showGameClubBtn(!0)},t.prototype.onDisable=function(){this.showGameClubBtn(!1)},t.prototype.initBtn=function(){var e=this;if(a.default.isWatchGraphicalAd?this.graphicalBtn.children[0].active=!1:this.graphicalBtn.children[0].active=!0,a.default.isWatchUnscrewAd?this.unscrewBtn.children[0].active=!1:this.unscrewBtn.children[0].active=!0,a.default.isWatchEliminateAd?this.eliminateBtn.children[0].active=!1:this.eliminateBtn.children[0].active=!0,f.currentPlatform==f.platformEnum.toutiao||f.currentPlatform==f.platformEnum.web){if(f.currentPlatform==f.platformEnum.toutiao){this.addShortCutButton.active=!0,m.checkTable(function(t){t.status.exist&&(e.addShortCutButton.active=!1)});var t=cc.sys.localStorage.getItem("addshortCut");console.log("isAddshortCut",t)}}else f.currentPlatform==f.platformEnum.wechat&&(this.addShortCutButton.active=!1,this.createGameClubBtn())},t.prototype.createGameClubBtn=function(){console.log("------\u751f\u6210\u6e38\u620f\u5708\u6309\u94ae");var e=wx.getSystemInfoSync().windowHeight,t=wx.getSystemInfoSync().windowWidth,o=e/t<1.8?e/1334:t/750;console.log("-------k",o),this.gameClubBtn=wx.createGameClubButton({type:"image",image:cc.url.raw("resources/gameClub.png"),style:{left:150*o,top:200*o,width:92*o,height:92*o}})},t.prototype.showGameClubBtn=function(e){null!=this.gameClubBtn&&window.wx&&f.currentPlatform==f.platformEnum.wechat&&(e&&1==this.node.active?this.gameClubBtn.show():this.gameClubBtn.hide())},t.prototype.changeGift=function(){var e=this;if(a.default.formSidebarCard&&0==a.default.isGetSidebarCardGift&&a.default.canUseSidebarCard&&(h.default.instance.giftPnl.active=!0),a.default.isGetSidebarCardGift&&(this.giftButton.active=!1),window.tt&&f.currentPlatform==f.platformEnum.toutiao&&(console.log("\u542f\u52a8\u6e38\u620f"),tt.onShow(function(e){console.log("\u542f\u52a8\u573a\u666f\uff1a",e),"homepage"==e.launch_from&&"sidebar_card"==e.location&&(console.log("\u4ece\u4fa7\u8fb9\u680f\u8fdb\u5165\u6e38\u620f"),a.default.formSidebarCard=!0,a.default.isGetSidebarCardGift||(h.default.instance.giftPnl.active=!0)),r.default.instance.playBGM(),console.log("\u8fd4\u56de\u6e38\u620f")})),window.wx&&f.currentPlatform==f.platformEnum.wechat){var t=wx.getLaunchOptionsSync();console.log("== wx ==> \u542f\u52a8\u53c2\u6570",t),wx.onShow(function(e){r.default.instance.playBGM(),console.log("\u8fd4\u56de\u6e38\u620f"),g.newShareRecall(),console.log("== wx ==> on show",e)})}window.tt&&f.currentPlatform==f.platformEnum.toutiao&&"Douyin"==tt.getSystemInfoSync().appName?tt.checkScene({scene:"sidebar",success:function(t){console.log("check scene success: ",t.isExist),t.isExist?(a.default.canUseSidebarCard=!0,a.default.isGetSidebarCardGift?e.giftButton.active=!1:e.giftButton.active=!0):(a.default.canUseSidebarCard=!1,e.giftButton.active=!1)},fail:function(t){console.log("check scene fail:",t),a.default.canUseSidebarCard=!1,e.giftButton.active=!1}}):this.giftButton.active=!1},t.prototype.getCurrentLv=function(){u.default.instance.BgColorInit();var e=cc.sys.localStorage.getItem("currentLevel");null!=e&&null!=e&&""!=e||(e=1,cc.sys.localStorage.setItem("currentLevel",1));var t=cc.sys.localStorage.getItem("currLvGraphical");null!=t&&null!=t&&""!=t||(t=1,cc.sys.localStorage.setItem("currLvGraphical",1));var o=cc.sys.localStorage.getItem("currLvUnscrew");null!=o&&null!=o&&""!=o||(o=1,cc.sys.localStorage.setItem("currLvUnscrew",1));var n=cc.sys.localStorage.getItem("eliminatePasslevel");switch(null==n||null==n||""==n?(a.default.eliminatePasslevel=0,a.default.currLevel=1,cc.sys.localStorage.setItem("eliminatePasslevel",0)):(a.default.eliminatePasslevel=parseInt(n),console.log("------commonData.eliminatePasslevel",a.default.eliminatePasslevel)),a.default.GameMode){case a.GAME_MODE_ENUM.NORMAL:a.default.currLevel=parseInt(e);break;case a.GAME_MODE_ENUM.CHALLENGE:c.default.instance.getChallengeLv();break;case a.GAME_MODE_ENUM.GARAPHICAL:t>a.default.graphicalMaxLv?a.default.currLevel=Math.ceil(Math.random()*a.default.graphicalMaxLv):a.default.currLevel=parseInt(t);break;case a.GAME_MODE_ENUM.UNSCREW:o>a.default.unscrewMaxLv?a.default.currLevel=Math.ceil(Math.random()*a.default.unscrewMaxLv):a.default.currLevel=parseInt(o);break;case a.GAME_MODE_ENUM.ELIMINATE:a.default.eliminatePasslevel>=a.default.eliminateMaxLv?a.default.currLevel=Math.ceil(Math.random()*a.default.eliminateMaxLv):(console.log("---commonData.eliminatePasslevel",a.default.eliminatePasslevel),a.default.currLevel=a.default.eliminatePasslevel+1)}a.default.currLevel<=0&&(a.default.currLevel=1),console.log("-----------currentLevel",a.default.currLevel)},t.prototype.preloadlevel=function(){var e=this;a.default.passLevel>=a.default.maxLv&&a.default.GameMode==a.GAME_MODE_ENUM.NORMAL&&(a.default.GameMode=a.GAME_MODE_ENUM.CHALLENGE),n.default.resManager.loadBundleRes("levels","level0",cc.Prefab).catch(function(){console.error("\u52a0\u8f7dlevel0\u5931\u8d25!")}).then(function(t){e.gamePnl.getChildByName("gameNode").removeAllChildren();var o=cc.instantiate(t);o.setParent(e.gamePnl.getChildByName("gameNode")),o.setPosition(0,0),e.gamelevel=o.getComponent(i.default),a.default.gamelevel=e.gamelevel,e.isloadPrefab=!0,console.log("\u52a0\u8f7dlevel0\u6210\u529f"),e.loadImg.active=!1})},t.prototype.clickPlay=function(e){void 0===e&&(e=0),1!=e&&(a.default.passLevel>=a.default.maxLv?a.default.GameMode=a.GAME_MODE_ENUM.CHALLENGE:a.default.GameMode=a.GAME_MODE_ENUM.NORMAL,this.getCurrentLv()),this.isloadPrefab&&h.default.instance.loadUI?(this.showGameClubBtn(!1),p.reportButton("StartPage","startBtn"),console.log("-------------start",a.default.currLevel),this.gamelevel.init(),c.default.instance.init(),this.node.active=!1,p.showBannerAD(!1),p.showGridAD(!1),this.gamePnl.active=!0,c.default.instance.startClock()):p.showTips("\u5173\u5361\u4fe1\u606f\u672a\u52a0\u8f7d\u5b8c\u6210\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")},t.prototype.clickGraphical=function(e){var t=this;if(!a.default.isWatchGraphicalAd){if(1!=e)return void this.clickGraphicalAd();a.default.isWatchGraphicalAd=!0,this.graphicalBtn.children[0].active=!1,cc.sys.localStorage.setItem("isWatchGraphicalAd",!0)}h.default.instance.loadUI?(this.loadImg.active=!0,this.showGameClubBtn(!1),p.showBannerAD(!1),p.showGridAD(!1),p.reportButton("StartPage","graphicalBtn"),a.default.GameMode=a.GAME_MODE_ENUM.GARAPHICAL,1!=e&&this.getCurrentLv(),n.default.resManager.loadBundleRes("graphicalMode","prefab/Lv0",cc.Prefab).catch(function(){console.error("\u52a0\u8f7d\u7279\u6b8a\u5173\u5361\u5931\u8d25!")}).then(function(e){console.log("----\u52a0\u8f7dlevels/Lv"+a.default.currLevel+"\u6210\u529f"),t.gamePnl.getChildByName("gameNode").removeAllChildren();var o=cc.instantiate(e);o.setParent(t.gamePnl.getChildByName("gameNode")),o.setPosition(0,0),a.default.gamelevel=o.getComponent(l.default),a.default.isAddTime=!1,c.default.instance.init(),t.node.active=!1,t.gamePnl.active=!0,c.default.instance.startClock()})):p.showTips("\u5173\u5361\u4fe1\u606f\u672a\u52a0\u8f7d\u5b8c\u6210\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")},t.prototype.clickGraphicalAd=function(){var e=this;p.reportButton("StartPage","graphicalVideoBtn_video",0,1),p.showRewardAD(function(){p.reportButton("StartPage","graphicalVideoBtn_video_success",0,2),a.default.isWatchGraphicalAd=!0,e.graphicalBtn.children[0].active=!1,cc.sys.localStorage.setItem("isWatchGraphicalAd",!0),e.clickGraphical(0)})},t.prototype.clickCompetition=function(){p.reportButton("StartPage","compBtn"),console.log("----------commonData.openId",a.default.openId),this.showGameClubBtn(!1),""!=a.default.openId&&v.getrankList(),this.compPnl.active=!0},t.prototype.clickUnscrewBtn=function(e){var t=this;void 0===e&&(e=0),a.default.isWatchUnscrewAd?h.default.instance.loadUI?(a.default.GameMode=a.GAME_MODE_ENUM.UNSCREW,1!=e&&this.getCurrentLv(),this.showGameClubBtn(!1),console.log("----unscrewLevel",a.default.currLevel),this.loadImg.active=!0,p.showBannerAD(!1),p.showGridAD(!1),p.reportButton("StartPage","unscrewBtn"),n.default.resManager.loadBundleRes("UnscrewMode","prefab/Lv0",cc.Prefab).catch(function(){console.error("\u52a0\u8f7d\u89e3\u5f00\u87ba\u4e1d\u5173\u5361\u5931\u8d25!")}).then(function(e){t.gamePnl.getChildByName("gameNode").removeAllChildren();var o=cc.instantiate(e);o.setParent(t.gamePnl.getChildByName("gameNode")),o.setPosition(0,0),a.default.isAddTime=!1,c.default.instance.init(),t.node.active=!1,t.gamePnl.active=!0,c.default.instance.startClock()})):p.showTips("\u5173\u5361\u4fe1\u606f\u672a\u52a0\u8f7d\u5b8c\u6210\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"):this.clickUnscrewAd()},t.prototype.clickUnscrewAd=function(){var e=this;p.reportButton("StartPage","unscrewVideoBtn_video",0,1),p.showRewardAD(function(){p.reportButton("StartPage","unscrewVideoBtn_video_success",0,2),a.default.isWatchUnscrewAd=!0,e.unscrewBtn.children[0].active=!1,cc.sys.localStorage.setItem("isWatchUnscrewAd",!0),e.clickUnscrewBtn()})},t.prototype.clickEliminate=function(e){void 0===e&&(e=0),a.default.isWatchEliminateAd?(a.default.GameMode=a.GAME_MODE_ENUM.ELIMINATE,1!=e&&this.getCurrentLv(),this.loadImg.active=!0,this.showGameClubBtn(!1),n.default.loadBundleRes("Eliminatemode","texture/gameItem/U",cc.SpriteFrame).catch(function(){}).then(function(){p.showBannerAD(!1),p.showGridAD(!1),cc.director.loadScene("Eliminate")})):this.clickEliminateAd()},t.prototype.clickEliminateAd=function(){var e=this;p.reportButton("StartPage","EliminateVideoBtn_video",0,1),p.showRewardAD(function(){p.reportButton("StartPage","EliminateVideoBtn_video_success",0,2),a.default.isWatchEliminateAd=!0,e.eliminateBtn.children[0].active=!1,cc.sys.localStorage.setItem("isWatchEliminateAd",!0),e.clickEliminate()})},t.prototype.clickAchievement=function(){h.default.instance.showAchievementPnl(!0),this.showGameClubBtn(!1)},t.prototype.clickCareer=function(){p.reportButton("StartPage","careerBtn");var e=this;f.currentPlatform==f.platformEnum.toutiao&&window.tt?(console.log("-------------------commonData.getTTUserInfo",a.default.getTTUserInfo),0==a.default.getTTUserInfo?tt.getUserInfo({success:function(t){console.log("getUserInfo \u8c03\u7528\u6210\u529f\uff1a",t.userInfo),a.default.getTTUserInfo=!0,a.default.UserAvatarUrl=t.userInfo.avatarUrl,a.default.UserNickName=t.userInfo.nickName,cc.sys.localStorage.setItem("getTTUserInfo",!0),cc.sys.localStorage.setItem("UserAvatar",a.default.UserAvatarUrl),cc.sys.localStorage.setItem("UserNickName",a.default.UserNickName),""!=a.default.openId&&v.seletPostUserData(["head_url","nick_name"]),d.default.instance.setAvatar(),e.showCareer()},fail:function(t){console.log("getUserInfo \u8c03\u7528\u5931\u8d25",t),e.showCareer()}}):e.showCareer()):f.currentPlatform==f.platformEnum.wechat&&window.wx?1==a.default.getWxUserInfo?""==a.default.UserAvatarUrl?wx.getUserInfo({success:function(t){a.default.UserNickName=t.userInfo.nickName,a.default.UserAvatarUrl=t.userInfo.avatarUrl,console.log("---------------------\u53d6\u5f97\u5fae\u4fe1\u6388\u6743",t.userInfo),cc.sys.localStorage.setItem("getWxUserInfo",a.default.getWxUserInfo),cc.sys.localStorage.setItem("UserAvatar",a.default.UserAvatarUrl),cc.sys.localStorage.setItem("UserNickName",a.default.UserNickName),""!=a.default.openId&&v.seletPostUserData(["head_url","nick_name"]),d.default.instance.setAvatar(),e.showCareer()}}):e.showCareer():a.default.getWxInfo?e.showCareer():s.default.instance.initUserInfoButton():e.showCareer()},t.prototype.showCareer=function(){h.default.instance.showCareerPnl(!0),this.showGameClubBtn(!1)},t.prototype.clickGift=function(){p.reportButton("StartPage","giftBtn"),h.default.instance.giftPnl.active=!0,this.showGameClubBtn(!1)},t.prototype.clickRank=function(){if(p.reportButton("StartPage","rankBtn"),-1==a.default.myProvinceIndex)return p.showTips("\u8bf7\u9009\u62e9\u60a8\u7684\u5730\u533a"),h.default.instance.areaPnl.active=!0,void h.default.instance.areaPnl.getChildByName("bg").getComponent(cc.Animation).play("appear");window.tt&&f.currentPlatform==f.platformEnum.toutiao&&c.default.instance.getRank(),this.showGameClubBtn(!1)},t.prototype.clickSkin=function(){p.reportButton("StartPage","skinBtn"),p.showBannerAD(!1),p.showGridAD(!1),h.default.instance.showSkinPnl(!0),this.showGameClubBtn(!1)},t.prototype.loadLv=function(e){console.warn("-----------------GameMode",a.default.GameMode),a.default.currLevel=e,a.default.GameMode==a.GAME_MODE_ENUM.NORMAL?this.clickPlay(1):a.default.GameMode==a.GAME_MODE_ENUM.GARAPHICAL?this.clickGraphical(1):a.default.GameMode==a.GAME_MODE_ENUM.UNSCREW&&this.clickUnscrewBtn(1)},t.prototype.clickAddShortCut=function(){if(f.currentPlatform==f.platformEnum.toutiao){var e=this;m.addshortCut(function(){var t=cc.sys.localStorage.getItem("addshortCut");null!=t&&null!=t&&""!=t||(a.default.goldNum+=100,u.default.instance.changeGoldNum()),cc.sys.localStorage.setItem("addshortCut",!0),e.addShortCutButton.active=!1})}},t.prototype.initChanllengePool=function(){for(var e=110;e<=330;e++)a.default.challengePool.push(e)},t.prototype.initProvinceRank=function(){this.provinceContent.height=25e3;var e=a.default.provincePoint.map(function(e,t){return t});e.sort(function(e,t){return a.default.provincePoint[t]-a.default.provincePoint[e]}),this.sortedProvince=e.map(function(e){return a.default.provinceArr[e]}),this.sortedPoint=e.map(function(e){return a.default.provincePoint[e]});for(var t=0;t<this.visibleItemCount;t++)this.addRankItem(t)},t.prototype.removeRankItem=function(e){var t=this.provinceContent.getChildByName(String(e));t&&t.removeFromParent()},t.prototype.addRankItem=function(){},t.prototype.onScrolling=function(){for(var e=this.provinceContent.y-100,t=Math.floor(e/700)-1,o=t+this.visibleItemCount-1,n=0;n<t;n++)this.removeRankItem(n);for(n=o+1;n<a.default.provinceArr.length;n++)this.removeRankItem(n);for(n=t;n<=o;n++)n<0||n>=a.default.provinceArr.length||this.provinceContent.getChildByName(""+n)||this.addRankItem(n)},t.prototype.clickGzhBtn=function(){h.default.instance.showGZHPnl(!0),o.instance.showGameClubBtn(!1)},t.prototype.clickChooseBtn=function(){this.choosePnl.active=!0},t.instance=null,__decorate([S(cc.Node)],t.prototype,"gamePnl",void 0),__decorate([S(cc.Node)],t.prototype,"compPnl",void 0),__decorate([S(cc.Node)],t.prototype,"playButton",void 0),__decorate([S(cc.Node)],t.prototype,"giftButton",void 0),__decorate([S(cc.Node)],t.prototype,"addShortCutButton",void 0),__decorate([S(cc.Node)],t.prototype,"loadImg",void 0),__decorate([S(cc.Node)],t.prototype,"graphicalBtn",void 0),__decorate([S(cc.Node)],t.prototype,"unscrewBtn",void 0),__decorate([S(cc.Node)],t.prototype,"eliminateBtn",void 0),__decorate([S(cc.Node)],t.prototype,"choosePnl",void 0),__decorate([S(cc.SpriteFrame)],t.prototype,"provinceBoard",void 0),__decorate([S(cc.Prefab)],t.prototype,"provincePre",void 0),__decorate([S(cc.Prefab)],t.prototype,"screwLMPre",void 0),__decorate([S(cc.Node)],t.prototype,"provinceContent",void 0),o=__decorate([y],t)}(cc.Component);o.default=P,cc._RF.pop()},{BattleManager:"BattleManager",Game:"Game",GameLevel:"GameLevel",GameManager:"GameManager",GraphicalGameLevel:"GraphicalGameLevel",PostUserData:"PostUserData",UIManager:"UIManager",commonData:"commonData",compView:"compView",config:"config",platform:"platform",topView:"topView",toutiao:"toutiao",wechat:"wechat",wxSubContextView:"wxSubContextView"}],temp:[function(e,t){"use strict";cc._RF.push(t,"7a536YnohhK6JqdbMljIV1v","temp"),cc._RF.pop()},{}],test:[function(e,t,o){"use strict";cc._RF.push(t,"62801WkXolJqbsfYttjK0xJ","test"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,n=a.ccclass,i=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},__decorate([n],t)}(cc.Component));o.default=i,cc._RF.pop()},{}],topView:[function(e,t,o){"use strict";cc._RF.push(t,"8b060Zw/n1P6oteoxX8e8NC","topView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("commonData"),n=e("UIManager"),i=e("platform"),c=e("PostUserData"),r=cc._decorator,s=r.ccclass,l=r.property,u=function(e){function t(){var t=e.call(this)||this;return t.goldLabel=null,t.setBtn=null,t.PausePnl=null,t.bgNode=null,t.bgImg=[],t.pauseBtn=null,t.bgIndex=0,t.rgbEditArr=[],o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.goldLabel.string=a.default.goldNum+""},t.prototype.clickSetBtn=function(){var e=a.default.currLevel;0==a.default.isgameing&&(e=0),i.reportButton("StartPage","setBtn",e),n.default.instance.showSetPnl(!0)},t.prototype.clickPauseBtn=function(){i.reportButton("StartPage","pauseBtn",a.default.currLevel,1),a.default.GameMode==a.GAME_MODE_ENUM.COMPETITION||a.default.GameMode==a.GAME_MODE_ENUM.ELIMINATE?(console.log("-----------hi?"),this.PausePnl.active=!0,this.PausePnl.getChildByName("bg").getComponent(cc.Animation).play("appear")):n.default.instance.showSetPnl(!0),a.default.isPause=!0},t.prototype.changeGoldNum=function(){this.goldLabel.string=a.default.goldNum+"",""!=a.default.openId&&c.seletPostUserData(["coin"]),cc.sys.localStorage.setItem("goldNum",a.default.goldNum)},t.prototype.changeSetBtn=function(){a.default.isgameing?(this.setBtn.active=!1,this.pauseBtn.active=!0):(this.setBtn.active=!0,this.pauseBtn.active=!1)},t.prototype.closePausePnl=function(){var e=this;console.log("--------close pause Pnl!!!!!"),i.reportButton("setPage","closeSetBtn",a.default.currLevel,1),i.showBannerAD(!1),this.PausePnl.getChildByName("bg").getComponent(cc.Animation).play("disappear"),this.scheduleOnce(function(){e.PausePnl.active=!1},.2),a.default.isPause=!1},t.prototype.changeEdit=function(){var e=this,t=[255,255,255];this.rgbEditArr.forEach(function(o,a){t[a]=e.colorStringToNumber(o.string),o.string=t[a].toString()}),this.bgNode.color=cc.color(t[0],t[1],t[2]),cc.sys.localStorage.setItem("bgColor",t[0]+","+t[1]+","+t[2])},t.prototype.colorStringToNumber=function(e){return Math.max(0,Math.min(255,Number(e)))},t.prototype.clickChangeBG=function(){console.log("=====>\u5f53\u524dbgIndex",this.bgIndex),cc.sys.localStorage.setItem("bgIndex",this.bgIndex);var e=this.node.getChildByName("\u5207\u6362\u80cc\u666f").getChildByName("rgb");switch(e&&(e.active=!1),this.bgIndex){case 0:var t,o=cc.sys.localStorage.getItem("bgColor");t=""==o||null==o||null==o?["255","255","255"]:o.split(","),this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgIndex=1,e&&(e.active=!0,this.rgbEditArr.forEach(function(e,o){e.string=t[o]}),this.changeEdit(0));break;case 1:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgNode.color=cc.color(195,184,165),this.bgIndex=2;break;case 2:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgNode.color=cc.color(178,178,178),this.bgIndex=3;break;case 3:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgNode.color=cc.color(137,178,178),this.bgIndex=4;break;case 4:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgNode.color=cc.color(208,203,200),this.bgIndex=5;break;case 5:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgNode.color=cc.color(190,239,247),this.bgIndex=6;break;case 6:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgNode.color=cc.color(177,166,166),this.bgIndex=7;break;case 7:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[1],this.bgNode.color=cc.color(169,196,249),this.bgIndex=8;break;case 8:this.bgNode.getComponent(cc.Sprite).spriteFrame=this.bgImg[0],this.bgNode.color=cc.color(255,255,255),this.bgIndex=0}},t.prototype.BgColorInit=function(){var e=cc.sys.localStorage.getItem("bgIndex");this.bgIndex=""==e||null==e||null==e?8:parseInt(e)<0?8:parseInt(e),console.log("=====>\u80cc\u666f\u521d\u59cb\u5316",this.bgIndex),this.clickChangeBG()},t.instance=null,__decorate([l(cc.Label)],t.prototype,"goldLabel",void 0),__decorate([l(cc.Node)],t.prototype,"setBtn",void 0),__decorate([l(cc.Node)],t.prototype,"PausePnl",void 0),__decorate([l(cc.Node)],t.prototype,"bgNode",void 0),__decorate([l(cc.SpriteFrame)],t.prototype,"bgImg",void 0),__decorate([l(cc.Node)],t.prototype,"pauseBtn",void 0),__decorate([l({type:cc.EditBox,tooltip:"rgb\u7684\u7f16\u8f91\u6846"})],t.prototype,"rgbEditArr",void 0),o=__decorate([s],t)}(cc.Component);o.default=u,cc._RF.pop()},{PostUserData:"PostUserData",UIManager:"UIManager",commonData:"commonData",platform:"platform"}],toutiao:[function(e,t,o){"use strict";var a,n,i,c,r;cc._RF.push(t,"a5743+2vYNBhou9CtdB+A8O","toutiao"),Object.defineProperty(o,"__esModule",{value:!0}),o.getLocation3=o.requestSubscribe=o.reportRemain=o.reportPass=o.reportAny=o.reportPage=o.reportButton=o.removeDownloadFile=o.downImageFile=o.loadSubpackage=o.getRankList=o.setScore=o.checkTable=o.addshortCut=o.login=o.onShow=o.onHide=o.toMiniGame=o.getSystemInfo=o.getSystemInfoSync=o.vibrateShort=o.vibrateLong=o.showModal=o.shareLp=o.stopLp=o.resumeLp=o.pauseLp=o.startLp=o.showShare=o.setMoreGamesInfo=o.showTips=o.openShare=o.showRewardAD=o.showInterstitialAd=o.createInterstitialAd=o.showBannerAD=o.createRewardedVideoAd=o.createBannerAd=o.initAds=o.init=void 0;var s=e("config"),l=e("ShareTitle"),u=e("Oceanengine"),d=e("commonData"),h=cc._decorator,p=(h.ccclass,h.property,"2b72kgiilb61gkls18"),f="1a7pfpk9h2c8151201",m="brepi9u97i1e33gjhi",g=null,v=null,w=null,y=null,S=null,P=0;function _(){if(tt.createBannerAd){var e=tt.getSystemInfoSync();e.windowWidth,e.windowHeight,(v=tt.createBannerAd({adUnitId:p,style:{width:200,left:(tt.getSystemInfoSync().windowWidth-200)/2,top:tt.getSystemInfoSync().windowHeight-112.5}})).onResize(function(e){console.log(e.width,e.height),v.style.top=tt.getSystemInfoSync().windowHeight-e.height,v.style.left=(tt.getSystemInfoSync().windowWidth-e.width)/2}),v.onError(function(e){console.log(e,"createBannerAd fail")})}}function A(){tt.createRewardedVideoAd&&((S=tt.createRewardedVideoAd({adUnitId:m})).onLoad(function(){console.log("\u52a0\u8f7d\u6210\u529f")}),S.onClose(function(e){cc.game.resume(),e&&e.isEnded||void 0===e?(console.log("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),a&&(a(),a=null),console.log("bluem-test-cloce-ad"),setTimeout(function(){},1500)):(k("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6"),n&&(n(),n=null))}),S.onError(function(e){console.log("Rewarded \u52a0\u8f7d\u5931\u8d25"+e,e.errCode)}),S.load())}function b(){tt.createInterstitialAd&&((w=tt.createInterstitialAd({adUnitId:f})).onLoad(function(){console.log("showInterstitialAd load success")}),w.onClose(function(){y&&(y(),y=null),w.destroy&&w.destroy()}),w.onError(function(e){console.log("err",e),y&&(y(),y=null),b()}))}function k(e){tt.showToast({title:e,icon:"none",duration:2500})}o.init=function(){console.log("[\u5f55\u5c4f] \u521d\u59cb\u5316"),(g=new tt.getGameRecorderManager).onStop(function(e){console.log(e.videoPath),r=e.videoPath,console.log("[\u5f55\u5c4f] \u7ed3\u675f")}),u.init(),console.log("\u5de8\u91cf\u5f15\u64ce\u521d\u59cb\u5316\u7ed3\u675f")},o.initAds=function(){console.log("init ad"),b(),A()},o.createBannerAd=_,o.createRewardedVideoAd=A,o.showBannerAD=function(e){null!=v?e?v.show():v.hide():_()},o.createInterstitialAd=b,o.showInterstitialAd=function(e){if(Date.now()-P<=3e4)return console.log("showInterstitialAd fail err: \u95f4\u9694\u5c0f\u4e8e30s"),void(e&&e());null!=w?w.load().then(function(){P=Date.now(),w.show(),e&&(y=e)}).catch(function(t){e&&e(),console.log("showInterstitialAd fail err:",t)}):(e&&e(),b())},o.showRewardAD=function(e){return void 0===e&&(e=function(){}),new Promise(function(t,o){if(null==S)return A(),k("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),void o("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!");cc.game.pause(),S.show().then(function(){a=function(){e(),t("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),setTimeout(function(){u.postVideoSuccess()},1500)},n=function(){o("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6")}}).catch(function(){S.load(),k("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),o("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5!"),cc.game.resume()})})},o.openShare=function(){wx.showShareMenu&&(wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(){return{}}))},o.showTips=k,o.setMoreGamesInfo=function(){tt.setMoreGamesInfo&&tt.setMoreGamesInfo({appLaunchOptions:[]})},o.showShare=function(e,t){tt.shareAppMessage({title:l.default.getRandomTitle(),imageUrl:+l.default.getRandomImageUrl(),success:function(){console.log("\u5206\u4eab\u6210\u529f\uff01"),e&&e(t)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25\uff01")},complete:function(){console.log("complete")}})},o.startLp=function(){cc.log("startLp"),g&&(g.start({duration:300}),i=Date.now(),console.log("startLp"))},o.pauseLp=function(){g&&(g.pause(),console.log("pauseLp"))},o.resumeLp=function(){g&&(g.resume(),console.log("resumeLp"))},o.stopLp=function(){g&&(g.stop(),c=Date.now()),console.log("stopLp")},o.shareLp=function(e,t){g&&c-i>=3100?tt.shareAppMessage({channel:"video",query:"",extra:{videoPath:r,videoTopics:["\u6c49\u5b57\u70ed\u6897\u738b"],hashtag_list:["\u6c49\u5b57\u70ed\u6897\u738b"]},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),e&&e(t)},fail:function(e){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25",e),-1==e.errMsg.split(":")[1].search("cancel")?tt.getSystemInfo({success:function(e){console.log(e.appName),"XiGua"==e.appName||tt.showToast({title:"\u5206\u4eab\u5f55\u5c4f\u5931\u8d25\uff01",icon:"none",duration:2e3})}}):tt.showToast({})}}):tt.showToast({title:"\u5f55\u5236\u89c6\u9891\u4e0d\u8db33s",icon:"none",duration:2e3})},o.showModal=function(e,t,o,a){tt.showModal({title:e,content:t,success:function(e){e.confirm?o&&o():e.cancel&&a&&a()},fail:function(){console.log("showModal\u8c03\u7528\u5931\u8d25")}})},o.vibrateLong=function(){tt.vibrateLong({success:function(e){console.log(""+e)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},o.vibrateShort=function(){tt.vibrateShort({success:function(e){console.log(""+e)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},o.getSystemInfoSync=function(){try{return tt.getSystemInfoSync()}catch(e){console.log("getSystemInfoSync fail")}},o.getSystemInfo=function(e){tt.getSystemInfo({success:function(){e.success()},fail:function(){e.fail&&e.fail()},complete:function(){e.complete&&e.complete()}})},o.toMiniGame=function(){tt.showMoreGamesModal({appLaunchOptions:[],success:function(e){console.log("success",e.errMsg)},fail:function(e){console.log("fail",e.errMsg)}})},o.onHide=function(e){tt.onHide(function(){e()})},o.onShow=function(e){tt.onShow(function(){e()})},o.login=function(){return new Promise(function(e,t){tt.login({force:!1,success:function(t){t.isLogin?e(t.code):e(t.anonymousCode),console.log("\u6210\u529f\u767b\u5f55")},fail:function(e){t(e),console.log("\u767b\u5f55\u5931\u8d25")}})})},o.addshortCut=function(e,t){console.log("\u5934\u6761\u6dfb\u52a0\u684c\u9762"),tt.addShortcut({success:function(){console.log("\u6dfb\u52a0\u684c\u9762\u6210\u529f"),e&&e(t),tt.showToast({title:"\u6dfb\u52a0\u684c\u9762\u6210\u529f",icon:"none",duration:2500})},fail:function(e){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",e.errMsg),tt.showToast({title:"\u6dfb\u52a0\u684c\u9762\u5931\u8d25",icon:"none",duration:2500})}})},o.checkTable=function(e,t){tt.checkShortcut({success:function(t){e&&e(t),console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f",t.status.exist)},fail:function(e){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",e.errMsg),t&&t()}})},o.setScore=function(e){"Douyin"==tt.getSystemInfoSync().appName&&tt.setImRankData({dataType:0,value:String(e),priority:0,extra:"extra",success:function(e){console.log("setImRankData success res: "+e)},fail:function(e){console.log("setImRankData fail res: "+e.errMsg)}})},o.getRankList=function(){"Douyin"==tt.getSystemInfoSync().appName?tt.getImRankList({relationType:"default",dataType:0,rankType:"day",suffix:"\u5173",rankTitle:"\u6bcf\u65e5\u6392\u884c\u699c",success:function(e){console.log("getImRankData success res: "+e)},fail:function(e){console.log("getImRankData fail res: "+e.errMsg)}}):tt.showToast({title:"\u8be5\u5e73\u53f0\u6682\u65e0\u6392\u884c\u699c",icon:"none",duration:1500})},o.loadSubpackage=function(e){return new Promise(function(t,o){tt.loadSubpackage({name:e,success:function(){console.log("\u5934\u6761\u52a0\u8f7d\u5206\u5305====> \u6210\u529f","\u5206\u5305\u540d:"+e),t(0)},fail:function(t){console.log("\u5934\u6761\u52a0\u8f7d\u5206\u5305====> \u5931\u8d25","\u5206\u5305\u540d:"+e,"err = "+t),o()}})})},o.downImageFile=function(e){for(var t=""+tt.env.USER_DATA_PATH,o=e.split("resource/")[1];-1!=o.indexOf("/");){var a=o.indexOf("/"),n=o.substring(0,a),i=o.substring(a+1,o.length);o=n+"-"+i}var c=t+"/"+o,r=tt.getFileSystemManager();return new Promise(function(t,o){r.stat({path:c,success:function(e){e.stats.isDirectory(),e.stats.isFile()&&t(c)},fail:function(){tt.downloadFile({url:e,success:function(e){tt.saveFile({tempFilePath:e.tempFilePath,filePath:c,success:function(){console.log("\u4fdd\u5b58\u5230\u672c\u5730!!!"),t(c)},fail:function(){o("\u6587\u4ef6\u4fdd\u5b58\u5931\u8d25!")}})},fail:function(){o("\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25!")}})}})})},o.removeDownloadFile=function(e){for(var t=""+tt.env.USER_DATA_PATH,o=e.split("resource/")[1];-1!=o.indexOf("/");){var a=o.indexOf("/"),n=o.substring(0,a),i=o.substring(a+1,o.length);o=n+"-"+i}var c=t+"/"+o,r=tt.getFileSystemManager();return new Promise(function(t,o){r.stat({path:c,success:function(a){a.stats.isFile()&&(r.unlink({filePath:c,success:function(){console.log("\u5220\u9664\u672c\u5730\u56fe\u7247\u6210\u529f!!!!!",e),t(0)},fail:function(){o()}}),t(c))},fail:function(){console.log("\u672c\u5730\u56fe\u7247\u4e0d\u5b58\u5728",e),t(0)}})})},o.reportButton=function(e,t,o,a,n){s.currentPlatform===s.platformEnum.toutiao&&(window.tt&&(tt.reportAnalytics("Button",{page:e,name:t,level:o,type:a,mode:n,scene:d.default.sceneId}),1!=a&&2!=a||tt.reportAnalytics("video",{page:e,name:t,level:o,type:a,mode:n,scene:d.default.sceneId})),console.log("\u4e0a\u62a5\u6309\u94ae\u57cb\u70b9,page"+e+",name:"+t+",level:"+o+",type:"+a+",mode:"+n))},o.reportPage=function(e,t){s.currentPlatform===s.platformEnum.toutiao&&tt.reportAnalytics("page",{name:e,level:t})},o.reportAny=function(e,t){console.log("\u4e0a\u62a5\u81ea\u5b9a\u4e49\u57cb\u70b9",e,t),s.currentPlatform===s.platformEnum.toutiao&&tt.reportAnalytics(e,t)},o.reportPass=function(e,t,o,a,n){s.currentPlatform===s.platformEnum.toutiao&&(tt.reportAnalytics("level",{level:e,Mode:t,degree:o,ID:a,state:n}),console.log("\u4e0a\u62a5\u901a\u5173\u57cb\u70b9",e,t,o,a))},o.reportRemain=function(){if(s.currentPlatform===s.platformEnum.toutiao){var e,t=(e=new Date(864e5*d.default.loginDay),String(e.getMonth()+1)+"."+String(e.getDate()).padStart(2,"0")+"_"+String(d.default.ContinuousLoginDays));tt.reportAnalytics("remain",{continuum:t,scene:d.default.sceneId})}},o.requestSubscribe=function(){console.log("------toutiao show sub"),("Douyin"==tt.getSystemInfoSync().appName||"douyin_lite"==tt.getSystemInfoSync().appName)&&tt.requestSubscribeMessage({tmplIds:["MSG1698556137157348703892856637734"],success:function(e){console.log("-----\u8ba2\u9605\u5b8c\u6210",e),cc.sys.localStorage.setItem("isSubscribe","true"),d.default.isSubscribe=!0},fail:function(e){console.warn("----\u8ba2\u9605\u5931\u8d25",e)}})},o.getLocation3=function(){return console.log("\u8bbf\u95eeip 3-------------------"),new Promise(function(e,t){tt.request({url:"https://txt.go.sohu.com/ip/soip",method:"POST",header:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},success:function(t){console.warn("----3------\x3e>res:"),e(t.data.toString())},fail:function(){console.log("-----\x3e>fail"),t("\u8bbf\u95ee\u94fe\u63a5\u5931\u8d25")}})})},cc._RF.pop()},{Oceanengine:"Oceanengine",ShareTitle:"ShareTitle",commonData:"commonData",config:"config"}],treasureView:[function(e,t,o){"use strict";cc._RF.push(t,"2e450Xh+XtIRJ9d6/D+1bd8","treasureView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("BattleManager"),n=e("commonData"),i=e("platform"),c=e("PostUserData"),r=e("topView"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boxPnl=null,t.piecePnl=null,t.box=null,t.rewardTitle=null,t.rewardSprite=null,t.box_open=null,t.box_close=null,t.goldImg=null,t.pieceIndex=-1,t.rewardType=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.boxPnl.active=!0,this.box.scale=1,this.box.opacity=255,this.box.getComponent(cc.Sprite).spriteFrame=this.box_close,this.piecePnl.active=!1,this.giftAnim(),this.initReward()},t.prototype.clickBox=function(){this.stopGiftAnim()},t.prototype.initReward=function(){if(Math.random()<.4)this.rewardType=0,this.rewardSprite.spriteFrame=this.goldImg,this.rewardTitle.string="\u91d1\u5e01X100";else{this.rewardType=1,this.rewardTitle.string="\u76ae\u80a4\u788e\u7247X1";var e=Math.floor(6*Math.random()+7);this.rewardSprite.spriteFrame=n.default.skinPieceImgArr[e-7+6],this.pieceIndex=e,console.log("-----------\u5f00\u51fa\u6765\u7684\u76ae\u80a4\u788e\u7247",this.pieceIndex)}i.reportPage("comp_treasurePage_"+this.rewardType,0)},t.prototype.clickPiece=function(){0==this.rewardType?(n.default.goldNum+=100,i.showTips("\u606d\u559c\u83b7\u5f97100\u91d1\u5e01\uff01"),r.default.instance.changeGoldNum()):1==this.rewardType&&(n.default.boardSkinData.piece[this.pieceIndex]>=3?(n.default.goldNum+=500,i.showTips("\u5df2\u83b7\u5f97\u8be5\u76ae\u80a4\uff0c\u83b7\u5f97500\u91d1\u5e01\uff01"),r.default.instance.changeGoldNum()):(n.default.boardSkinData.piece[this.pieceIndex]++,i.showTips("\u606d\u559c\u83b7\u5f97\u76ae\u80a4\u788e\u7247\uff01"),""!=n.default.openId&&c.seletPostUserData(["skin_debris"]),a.default.instance.setArrData("piece"))),this.node.active=!1},t.prototype.showPiecePnl=function(){this.rewardSprite.node.scale=0,this.piecePnl.active=!0,cc.tween(this.rewardSprite.node).to(.3,{scale:1}).start()},t.prototype.giftAnim=function(){this.giftAnim[0]=cc.repeatForever(cc.sequence(cc.rotateTo(.18,10),cc.rotateTo(.18,-10),cc.rotateTo(.18,8),cc.rotateTo(.18,-8),cc.rotateTo(.18,4),cc.rotateTo(.18,0),cc.rotateTo(.5,0))),this.box.runAction(this.giftAnim[0])},t.prototype.stopGiftAnim=function(){var e=this;this.box.stopAction(this.giftAnim[0]),cc.tween(this.box).to(.1,{angle:0}).to(.3,{scale:.85}).call(function(){e.box.getComponent(cc.Sprite).spriteFrame=e.box_open,a.default.instance.playBoxOpenSound()}).to(.3,{scale:1.05}).delay(.2).to(.1,{scale:0,opacity:0}).call(function(){e.boxPnl.active=!1,e.showPiecePnl()}).start()},__decorate([u(cc.Node)],t.prototype,"boxPnl",void 0),__decorate([u(cc.Node)],t.prototype,"piecePnl",void 0),__decorate([u(cc.Node)],t.prototype,"box",void 0),__decorate([u(cc.Label)],t.prototype,"rewardTitle",void 0),__decorate([u(cc.Sprite)],t.prototype,"rewardSprite",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"box_open",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"box_close",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"goldImg",void 0),__decorate([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{BattleManager:"BattleManager",PostUserData:"PostUserData",commonData:"commonData",platform:"platform",topView:"topView"}],unscrew:[function(e,t,o){"use strict";var a;cc._RF.push(t,"fac9bIhdlJMlIXRqtZbirV6","unscrew"),Object.defineProperty(o,"__esModule",{value:!0}),o.ENUM_SCREW_TYPE=void 0;var n,i=cc._decorator,c=i.ccclass,r=i.property,s=e("nut"),l=e("commonData"),u=e("Game"),d=e("startView"),h=e("GameManager"),p=e("platform");(n=a=o.ENUM_SCREW_TYPE||(o.ENUM_SCREW_TYPE={})).IDLE="idle",n.MOVE="move",n.ANI="ani",n.BAKCANI="backAni";var f=function(e){function t(){var t=e.call(this)||this;return t.connectNode=null,t.screwNode=null,t.connectPre=null,t.screwPre=[],t.nutPre=null,t.screw_type=a.IDLE,t.moveScrew=null,t.screwNum=0,t.levelConfig=null,t.isLoadData=!1,t.nutNodeArr=[],o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.init()},t.prototype.init=function(){cc.director.getCollisionManager().enabled=!1,this.initData(),this.createLevel()},t.prototype.initData=function(){this.nutNodeArr=[],this.levelConfig=l.default.unscrewLevelConfig[l.default.currLevel],this.screwNum=this.levelConfig.screw.length,l.default.LevelSteel=this.screwNum,l.default.TotalSteel=this.screwNum,this.isLoadData=!1,l.default.isgameing=!0,l.default.Unscrew_isUnlock=!1},t.prototype.createLevel=function(){this.node.scale=this.levelConfig.scale;for(var e=0;e<this.levelConfig.connect.length;e++){var t=this.levelConfig.connect[e],o=cc.instantiate(this.connectPre);o.setPosition(t.position.x,t.position.y),o.opacity=0,o.setParent(this.connectNode)}for(e=0;e<this.screwNum;e++){var a=this.levelConfig.screw[e],n=cc.instantiate(this.screwPre[a.direction]);n.setPosition(a.position.x,a.position.y);var i="screw/"+a.color+"/"+a.color+"_"+a.size;this.loadTexture(i,n),this.setCollision(n,a.size),n.opacity=0,n.setParent(this.screwNode);for(var c=0;c<a.nutArr.length;c++){var r=a.nutArr[c],s=cc.instantiate(this.nutPre),l="nut/"+a.color;this.loadTexture(l,s),s.setPosition(r.position.x,r.position.y),s.setParent(n),s.opacity=0,this.nutNodeArr.push(s)}}d.default.instance.loadImg.active=!1,this.ScrewAni()},t.prototype.ScrewAni=function(){for(var e=this,t=function(t){var a=o.screwNode.children[t],n=o.levelConfig.screw[t],i=cc.v2(a.position);switch(n.direction){case 0:a.setPosition(2e3,i.y);break;case 1:a.setPosition(i.x,-2e3);break;case 2:a.setPosition(-2e3,i.y);break;case 3:a.setPosition(i.x,2e3)}var c=cc.moveTo(.5,i);a.opacity=255,o.scheduleOnce(function(){cc.tween(a).then(c).call(function(){t==e.levelConfig.screw.length-1&&e.nutAni()}).start()},.1*t)},o=this,a=0;a<this.screwNum;a++)t(a)},t.prototype.nutAni=function(){for(var e=this,t=function(t){var a=o.nutNodeArr[t],n=a.position;"nut_v"==a.name?a.setPosition(a.parent.width/2+20,0):a.setPosition(0,-a.parent.height/2-20),cc.tween(a).to(.3,{opacity:255}).to(.5,{position:n}).call(function(){t==e.nutNodeArr.length-1&&e.connectAni()}).start()},o=this,a=0;a<this.nutNodeArr.length;a++)t(a)},t.prototype.connectAni=function(){for(var e=this,t=function(t){var a=o.connectNode.children[t];a.scale=1.1,cc.tween(a).delay(.2).to(.2,{opacity:255}).to(.3,{scale:.8}).call(function(){t==e.connectNode.children.length-1&&e.startGame()}).start()},o=this,a=0;a<this.connectNode.children.length;a++)t(a)},t.prototype.startGame=function(){this.isLoadData=!0,h.default.instance.hideMask(),cc.director.getCollisionManager().enabled=!0,l.default.isPause=!1},t.prototype.clickScrew=function(e){if(this.screw_type==a.IDLE)if(this.moveScrew=e,this.moveScrewType=this.moveScrew.name.slice(6),this.originPosition=cc.v3(this.moveScrew.x,this.moveScrew.y,0),this.screwRect=this.moveScrew.getBoundingBox(),this.moveScrew.children.length<=0)this.screw_type=a.MOVE;else{for(var t=0;t<this.moveScrew.children.length;t++)this.moveScrew.children[t].getComponent(s.default).nutState=s.ENUM_NUT_STATES.PARENT_MOVE;this.playMove_backAni()}},t.prototype.ReturnToOriginalPosition=function(){var e=this;cc.Tween.stopAllByTarget(this.moveScrew),cc.tween(this.moveScrew).to(.2,{position:this.originPosition},{easing:"sineOutIn"}).call(function(){e.screw_type=a.IDLE,e.moveScrew=null,e.moveScrewType=""}).start()},t.prototype.playMove_backAni=function(){var e=this;if(o.instance.screw_type!=a.BAKCANI){var t;switch(o.instance.screw_type=a.BAKCANI,console.log("play back ani"),this.moveScrewType){case"left":t=cc.moveBy(.2,cc.v2(-50,0));break;case"right":t=cc.moveBy(.2,cc.v2(50,0));break;case"up":t=cc.moveBy(.2,cc.v2(0,50));break;case"down":t=cc.moveBy(.2,cc.v2(0,-50))}cc.tween(this.moveScrew).then(t).call(function(){e.ReturnToOriginalPosition()}).start()}},t.prototype.deleteScrew=function(){this.screw_type=a.IDLE;for(var e=function(e){var o=t.connectNode.children[e],a=o.getBoundingBox(),n=o.position;cc.Intersection.rectRect(t.screwRect,a)&&cc.tween(o).to(.3,{scale:1.3,position:new cc.Vec3(n.x,n.y+150,0)}).to(.2,{y:-500,opacity:0}).call(function(){o.destroy()}).start()},t=this,o=0;o<this.connectNode.children.length;o++)e(o);this.moveScrew.destroy(),this.moveScrew=null,this.moveScrewType="",this.screwNum--,l.default.TotalSteel--,this.checkSuccess()},t.prototype.checkSuccess=function(){var e=this;if(this.screwNum<=0){p.reportLevel(l.default.currLevel,"passLevel",l.default.GameMode);var t=cc.sys.localStorage.getItem("currLvUnscrew");if(parseInt(t)>=l.default.unscrewMaxLv){t==l.default.unscrewMaxLv&&cc.sys.localStorage.setItem("currLvUnscrew",l.default.currLevel+1);for(var o=Math.ceil(Math.random()*l.default.unscrewMaxLv);o==l.default.currLevel;)o=Math.ceil(Math.random()*l.default.unscrewMaxLv);l.default.currLevel=o,console.warn("-------\u5df2\u7ecf\u901a\u5173\u4e86\uff0c\u8fdb\u5165\u968f\u673a\u5173\u5361",o),this.scheduleOnce(function(){h.default.instance.showGameoverPnl(1)},.5)}else{if(l.default.currLevel==l.default.unscrewMaxLv)return cc.sys.localStorage.setItem("currLvUnscrew",l.default.currLevel),void this.checkSuccess();l.default.currLevel++,cc.sys.localStorage.setItem("currLvUnscrew",l.default.currLevel),l.default.currLevel%2==0?this.scheduleOnce(function(){h.default.instance.init(),e.reset()}):this.scheduleOnce(function(){h.default.instance.showGameoverPnl(1)},.5)}}},t.prototype.reset=function(){this.node.children[0].removeAllChildren(),this.node.children[1].removeAllChildren(),this.init()},t.prototype.update=function(){if(this.screw_type==a.MOVE)switch(this.moveScrewType){case"left":this.moveScrew.x-=15;break;case"right":this.moveScrew.x+=15;break;case"up":this.moveScrew.y+=15;break;case"down":this.moveScrew.y-=15}},t.prototype.loadTexture=function(e,t){u.default.resManager.loadBundleRes("UnscrewMode","texture/"+e,cc.SpriteFrame).catch(function(){console.error("\u52a0\u8f7d"+e+"\u5931\u8d25!")}).then(function(e){t.getComponent(cc.Sprite).spriteFrame=e})},t.prototype.setCollision=function(e,t){var o=e.getComponent(cc.BoxCollider);switch(o.size.width=e.width-30,t){case 1:o.size.height=436;break;case 2:o.size.height=519;break;case 3:o.size.height=642;break;case 4:o.size.height=758}},t.instance=null,__decorate([r(cc.Node)],t.prototype,"connectNode",void 0),__decorate([r(cc.Node)],t.prototype,"screwNode",void 0),__decorate([r(cc.Prefab)],t.prototype,"connectPre",void 0),__decorate([r({type:cc.Prefab,tooltip:"0:left 1:up 2:right 3:down"})],t.prototype,"screwPre",void 0),__decorate([r(cc.Prefab)],t.prototype,"nutPre",void 0),o=__decorate([c],t)}(cc.Component);o.default=f,cc._RF.pop()},{Game:"Game",GameManager:"GameManager",commonData:"commonData",nut:"nut",platform:"platform",startView:"startView"}],vivo:[function(e,t,o){"use strict";cc._RF.push(t,"8619fBRmsJN95qvzkTBBg3S","vivo"),Object.defineProperty(o,"__esModule",{value:!0}),o.vibrateLong=o.vibrateShort=o.showTips=o.showModal=o.showRewardAD=o.showInterstitialAd=o.showBannerAD=o.installShortcut=o.hasShortcutInstalled=o.createNativeAd=o.createRewardedVideoAd=o.createInterstitialAd=o.createBannerAd=o.initAds=o.init=void 0;var a=e("localStorage"),n=cc._decorator,i=(n.ccclass,n.property,"e8e6a5465401451e925d8fa781228e9c"),c="3bfbc4c17efd4959bdaf98bd5f3de8ea",r="7d10385095eb42cda405d0568e3007e3",s=null,l=null,u=null,d=null,h=!1,p=!1;function f(){console.log("createBannerAd"),qg.getSystemInfoSync().platformVersionCode<1031||qg.createBannerAd&&((s=qg.createBannerAd({posId:i,style:{}})).onLoad(function(){console.log("createBannerAd success")}),s.onError(function(e){console.log(e.errCode),console.log("createBannerAd fail")}))}function m(){console.log("createInterstitialAd"),qg.getSystemInfoSync().platformVersionCode<1031||qg.createInterstitialAd&&""!=c&&((l=qg.createInterstitialAd({posId:c})).onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d")}),l.onError(function(e){console.log(e.errCode,"createInterstitialAd fail")}))}function g(){qg.getSystemInfoSync().platformVersionCode<1041||""!=r&&(h=!1,(u=qg.createRewardedVideoAd({posId:r})).load(),u.onLoad(function(){console.log("\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),h=!0}),u.onError(function(e){console.log("Rewarded \u52a0\u8f7d\u5931\u8d25"+e.errCode),h=!1}))}o.init=function(){},o.initAds=function(){f(),m(),g()},o.createBannerAd=f,o.createInterstitialAd=m,o.createRewardedVideoAd=g;var v=null;function w(e){qg.showToast({message:e})}o.createNativeAd=function(){qg.getSystemInfoSync().platformVersionCode<1053||qg.createNativeAd&&null!=(d=qg.createNativeAd({posId:"e4ab257204c34f988328e9a17c0083e4"}))&&(d.onLoad(function(e){e&&e.adList&&(v=e.adList.pop(),console.log("[\u539f\u751f\u5e7f\u544a]",e,v))}),d.onError(function(e){console.log("[\u539f\u751f\u5e7f\u544a]",e)}))},o.hasShortcutInstalled=function(e){qg&&qg.hasShortcutInstalled&&qg.hasShortcutInstalled({success:function(t){0==t?e.fail():e.success()},fail:function(){},complete:function(){}})},o.installShortcut=function(e){qg&&qg.installShortcut&&qg.installShortcut({success:function(){e.success()},fail:function(){e.fail&&e.fail()},complete:function(){}})},o.showBannerAD=function(e){if(null!=s){if(!e)return s.hide(),void(p=!1);if(!p){var t=a.default.getLocalItem("showBannerTimes",0),o=a.default.getLocalItem("secondBannerShowTime",0),n=Date.now()-o;n<30&&t>=2||(n>30&&t>=2&&(t=0,o=Date.now()),t++,s.show().then(function(){p=!0,console.log("banner\u5c55\u793a"),a.default.setLocalItem("showBannerTimes",t),a.default.setLocalItem("secondBannerShowTime",o)}).catch(function(e){console.log("banner err",e.errCode),f(),s.show()}))}}},o.showInterstitialAd=function(){null!=l?l.show().then(function(){console.log("interstitialAd")}).catch(function(e){console.log("interstitialAd err",e),m(),l.show()}):m()},o.showRewardAD=function(e){return void 0===e&&(e=function(){}),new Promise(function(t,o){console.log(u,h),null!=u&&h?(u.show().catch(function(e){w("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),console.log("showRewardAD err",e),u.load()}),u.onClose(function(a){h=!1,u.load(),a&&a.isEnded||void 0===a?(console.log(e),e(),e=function(){},console.log("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),t("\u64ad\u653e\u5b8c\u6210")):(o("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6"),console.log("\u4e2d\u9014\u5173\u95ed\u64ad\u653e"),w("\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6"))})):(w("\u6682\u65f6\u6ca1\u6709\u53ef\u64ad\u653e\u7684\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),o(),g())})},o.showModal=function(e,t,o,a){qg.showDialog({title:e,message:t,buttons:[{text:"\u786e\u8ba4",color:"#33dd44"},{text:"\u53d6\u6d88",color:"#FF0044"}],success:function(){o(),console.log("handling callback")},cancel:function(){a(),console.log("handling cancel")},fail:function(e,t){a(),console.log("handling fail, code = "+t)}})},o.showTips=w,o.vibrateShort=function(){qg.vibrateShort()},o.vibrateLong=function(){qg.vibrateLong()},cc._RF.pop()},{localStorage:"localStorage"}],web:[function(e,t,o){"use strict";cc._RF.push(t,"94106M9U8hFuJrob9TlRh7h","web"),Object.defineProperty(o,"__esModule",{value:!0}),o.showShare=o.checkHad4399Ad=o.showRewardAd=void 0;var a=cc.Enum({playSuccess:0,successClose:1,playFaild:2});o.showRewardAd=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),new Promise(function(o){window.h5api.playAd(function(n){console.log("code"+n.code+", msg"+n.message),1e4===n.code?(cc.log("\u5f00\u59cb\u64ad\u653e"),a.playSuccess):10001===n.code?(cc.log("\u64ad\u653e\u7ed3\u675f"),a.successClose,e&&e(t),o()):(cc.log("\u5e7f\u544a\u5f02\u5e38"),a.playFaild)})})},o.checkHad4399Ad=function(e){window.h5api.canPlayAd(function(t){console.log("\u662f\u5426\u53ef\u64ad\u653e\u5e7f\u544a",t.canPlayAd,"\u5269\u4f59\u6b21\u6570",t.remain),t.canPlayAd?e():console.log("\u6ca1\u6709\u5e7f\u544a")})},o.showShare=function(e,t){window.h5api.share(),e(t)},cc._RF.pop()},{}],wechat:[function(e,t,o){"use strict";var a,n,i,c,r,s;cc._RF.push(t,"5abea8Nf51M3a5xDx5G6UxE","wechat"),Object.defineProperty(o,"__esModule",{value:!0}),o.getWXOpenid=o.reportAny=o.reportPage=o.reportButton=o.removeDownloadFile=o.downImageFile=o.loadSubpackage=o.login=o.onShow=o.onHide=o.toMiniGame=o.getSystemInfo=o.getSystemInfoSync=o.vibrateShort=o.vibrateLong=o.showModal=o.showShare2=o.showShare=o.showTips=o.openShare=o.showRewardAD=o.showInterstitialAd=o.showGridAD=o.showCustomAd=o.showBannerAD=o.createRewardedVideoAd=o.createInterstitialAd=o.createCustomAd=o.createGridAd=o.createBannerAd=o.initAds=o.newShareRecall=o.shareSuccess=o.init=void 0;var l=e("BattleManager"),u=e("ShareTitle"),d=e("commonData"),h=e("config"),p=e("Analysis"),f=e("PostUserData"),m=cc._decorator,g=(m.ccclass,m.property,"adunit-41ffca41a435f653"),v="adunit-a94f16489dcb45f9",w="adunit-97ca8a76ac62613a",y="adunit-c923b50e0d65be21",S=null,P=null,_=null,A=null,b=!1,k=!1,N=0,C=function(){},M="";function I(){N=0,c&&c(s),console.log("------------\u5206\u4eab\u6210\u529f\u83b7\u5f97\u9053\u5177------------")}function L(e){0==e?Math.random()<.5?wx.showToast({title:"\u8bf7\u5206\u4eab\u5230\u7fa4\u83b7\u53d6",icon:"none",duration:2500}):wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u7fa4\u91cc",icon:"none",duration:2500}):Math.random()<.33?wx.showToast({title:"\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7fa4\u83b7\u53d6",icon:"none",duration:2500}):Math.random()<.66?wx.showToast({title:"\u8be5\u7fa4\u5df2\u5206\u4eab\u8fc7\uff0c\u8bf7\u6362\u4e2a\u7fa4",icon:"none",duration:2500}):wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u6362\u4e2a\u7fa4\u91cd\u8bd5",icon:"none",duration:2500})}o.init=function(){wx.onShow(function(){b&&(b=!1,i&&i(r),i=null)}),V(),O(),p.init()},o.shareSuccess=I,o.newShareRecall=function(){if(k){if(k=!1,Date.now()-n>=2e3)switch(d.default.shareUseProp){case 0:1==N?Math.random()<.7?L(0):I():2==N&&Math.random()<.35?L(0):I();break;case 1:1==N?Math.random()<.8?L(2):I():2==N&&Math.random()<.4?L(2):I();break;default:1==N?Math.random()<.9?L(2):I():2==N&&Math.random()<.45?L(2):I()}else{var e=Math.floor(Math.random()*B.length);U(B[e])}c=null}};var B=["\u8bf7\u5206\u4eab\u81f3\u5927\u4e8e20\u4eba\u7684\u7fa4\uff01","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u60a8\u6362\u4e2a\u7fa4\u91cd\u8bd5\uff01","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u7fa4\u91cc\uff01","\u6ce8\u610f\uff01\u8bf7\u5206\u4eab\u5230\u4e0d\u540c\u7684\u7fa4\uff01","\u8be5\u7fa4\u5df2\u5206\u4eab\u8fc7\uff0c\u8bf7\u6362\u4e2a\u7fa4","\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u65b0\u7684\u7fa4","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u5206\u4eab\u5230\u591a\u4eba\u7fa4"];function D(){wx.createBannerAd&&""!=g&&(S=wx.createBannerAd({adUnitId:g,style:{width:200,left:wx.getSystemInfoSync().windowWidth/2-100,top:wx.getSystemInfoSync().windowHeight-112.5}}),wx.getSystemInfo({success:function(){S.onResize(function(e){console.log(e.width,e.height),S.style.top=wx.getSystemInfoSync().windowHeight-e.height,S.style.left=(wx.getSystemInfoSync().windowWidth-e.width)/2}),S.onError(function(e){console.log(e),console.log("createBannerAd fail")}),S.onLoad(function(){G?S.show():S.hide(),console.log("----create banner success")})}}))}function E(){if(wx.createGridAd&&""!=y){var e=110;wx.getSystemInfoSync().windowHeight/wx.getSystemInfoSync().windowWidth>2.1&&(e=130),(A=wx.createGridAd({adUnitId:y,adTheme:"white",gridCount:5,style:{left:(wx.getSystemInfoSync().windowWidth-330)/2,top:wx.getSystemInfoSync().windowHeight-e,width:330,opacity:.8}})).onLoad(function(){a=!1,console.warn("createGridAd onLoad")}),A.onError(function(e){a=!0,console.warn("createGridAd fail",e),A.destroy()})}}function x(){if(wx.createCustomAd&&""!=y&&wx.getSystemInfoSync().SDKVersion>="2.11.1"){var e=wx.getSystemInfoSync().windowHeight/10;(A=wx.createCustomAd({adUnitId:y,adIntervals:60,style:{left:wx.getSystemInfoSync().windowWidth/4*3,top:e}})).onLoad(function(){a=!1,console.warn("createGridAd onLoad")}),A.onError(function(e){a=!0,console.warn("createGridAd fail",e),A.destroy()})}}function R(){wx.createInterstitialAd&&""!=v&&(P=wx.createInterstitialAd({adUnitId:v}))}function T(){wx.createRewardedVideoAd&&""!=w&&((_=wx.createRewardedVideoAd({adUnitId:w})).onLoad(function(){console.log("\u52a0\u8f7d\u6210\u529f")}),_.onError(function(e){console.log("Rewarded \u52a0\u8f7d\u5931\u8d25"+e)}),_.onClose(function(e){_.onClose=null,cc.game.resume(),e&&e.isEnded||void 0===e?(console.log("\u64ad\u653e\u5b8c\u6210\u5173\u95ed"),C&&C()):(console.log("\u4e2d\u9014\u5173\u95ed\u64ad\u653e"),wx.showToast({title:"\u5b8c\u6574\u89c2\u770b\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1\u54e6",icon:"none",duration:2500})),l.default.instance.playBGM()}))}o.initAds=function(){D(),T(),R(),x(),console.log("\u52a0\u8f7d\u5e7f\u544a")},o.createBannerAd=D,o.createGridAd=E,o.createCustomAd=x,o.createInterstitialAd=R,o.createRewardedVideoAd=T;var G=!1;function O(){wx.showShareMenu&&(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){return{title:u.default.getRandomTitle(),imageUrl:u.default.getRandomImageUrl(),imageUrlId:"12MoTxt+QBipr5RF0qcfGg==",query:u.default.getShareIdInfo()}}),wx.onShareTimeline&&wx.onShareTimeline(function(){return{title:u.default.getRandomTitle(),imageUrl:u.default.getRandomImageUrl(),imageUrlId:"12MoTxt+QBipr5RF0qcfGg==",query:u.default.getShareIdInfo()}}))}function U(e){wx.showToast({title:e,icon:"none",duration:2500})}function V(){return new Promise(function(e){wx.login({success:function(t){var o=t.code;wx.request({url:"https://api.flysheeep.com/api/expro/getopenid",header:{"Content-Type":"application/json;charset=utf-8"},data:{appid:"wxe81c4bd460b9a891",code:o},method:"POST",success:function(t){var o=t.data.data;console.log("----------------------\x3e get open-id res",t),console.log("----------------------\x3e get open-id json",o),o.openid?(M=o.openid,d.default.openId=M,console.log("----------------------\x3e openid_get",cc.sys.localStorage.getItem("openid_get")),"true"!=cc.sys.localStorage.getItem("openid_get")&&f.getUserInformation()):o.anonymous_openid&&(M=o.anonymous_openid,d.default.openId=M),console.log("----------------------\x3e get open-id success",M),cc.sys.localStorage.setItem("openid",M),e(M)},fail:function(e){console.log("------------get openid---------fail-------",e),f.getUserInformation()}})},fail:function(e){console.log("------------login---------fail-------",e)}})})}o.showBannerAD=function(e){if(G=e,null!=S)try{e?S.show():S.hide()}catch(t){}else D()},o.showCustomAd=function(e){if(null!=A)try{e?A.show():A.hide()}catch(t){}else E()},o.showGridAD=function(e){null!=A?e?a?S.show():A.show():a?S.hide():A.hide():E()},o.showInterstitialAd=function(){null!=P?P.show().catch(function(e){console.warn("interAD error",e)}):R()},o.showRewardAD=function(e){var t=this;return new Promise(function(o,a){if(null==_)return wx.showToast({title:"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u4e00\u4e0b\u6e38\u620f\u5427\uff01",icon:"none",duration:2500}),T(),t.showShare(function(){console.log("\u5206\u4eab\u6210\u529f\uff01\uff01\uff01\uff01"),(C=e)&&C(),o(null)}),void a("\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u4e00\u4e0b\u6e38\u620f\u5427\uff01");cc.game.pause(),_.show().then(function(){l.default.instance.playBGM(),C=e,o(null)}).catch(function(){_.onClose=null,console.log("show catch"),_.load(),wx.showToast({title:"\u6682\u65e0\u5e7f\u544a\uff0c\u5206\u4eab\u4e00\u4e0b\u6e38\u620f\u5427\uff01",icon:"none",duration:2500}),t.showShare(function(){console.log("\u5206\u4eab\u6210\u529f\uff01\uff01\uff01"),(C=e)&&C(),o(null)}),cc.game.resume()})})},o.openShare=O,o.showTips=U,o.showShare=function(e,t,o){void 0===o&&(o=0);var a=u.default.getRandomTitle2(o);wx.shareAppMessage({title:a,imageUrl:u.default.getRandomImageUrl(),imageUrlId:"12MoTxt+QBipr5RF0qcfGg=="}),i=e,r=t,b=!0,Date.now()},o.showShare2=function(e,t){console.log("-----------------showShare2");var o=u.default.getRandomTitle2(5);wx.shareAppMessage({title:o,imageUrl:u.default.getRandomImageUrl(),imageUrlId:"12MoTxt+QBipr5RF0qcfGg=="}),c=e,s=t,k=!0,N++,n=Date.now()},o.showModal=function(e,t,o,a){wx.showModal({title:e,content:t,success:function(e){e.confirm?o&&o():e.cancel&&a&&a()}})},o.vibrateLong=function(){wx.vibrateLong({success:function(e){console.log(""+e)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},o.vibrateShort=function(){wx.vibrateShort({success:function(e){console.log(""+e)},fail:function(){console.log("vibrateLong\u8c03\u7528\u5931\u8d25")}})},o.getSystemInfoSync=function(){try{return wx.getSystemInfoSync()}catch(e){console.log("getSystemInfoSync fail")}},o.getSystemInfo=function(e){wx.getSystemInfo({success:function(){e.success()},fail:function(){e.fail&&e.fail()},complete:function(){e.complete&&e.complete()}})},o.toMiniGame=function(e){wx.navigateToMiniProgram({appId:e,path:"",extraData:{time:(new Date).valueOf()},success:function(){}})},o.onHide=function(e){wx.onHide(function(){e()})},o.onShow=function(e){wx.onShow(function(){e()})},o.login=function(){return new Promise(function(e,t){wx.login({timeout:3e3,success:function(o){o.code?e(o.code):t("\u672a\u83b7\u53d6\u5230code")},fail:function(e){t(e)}})})},o.loadSubpackage=function(e){return new Promise(function(t,o){wx.loadSubpackage({name:e,success:function(){console.log("\u5fae\u4fe1\u52a0\u8f7d\u5206\u5305====> \u6210\u529f","\u5206\u5305\u540d:"+e),t(0)},fail:function(t){console.log("\u5fae\u4fe1\u52a0\u8f7d\u5206\u5305====> \u5931\u8d25","\u5206\u5305\u540d:"+e,"err = "+t),o()}})})},o.downImageFile=function(e){for(var t=""+wx.env.USER_DATA_PATH,o=e.split("resource/")[1];-1!=o.indexOf("/");){var a=o.indexOf("/"),n=o.substring(0,a),i=o.substring(a+1,o.length);o=n+"-"+i}var c=t+"/"+o,r=wx.getFileSystemManager();return new Promise(function(t,o){r.stat({path:c,success:function(e){e.stats.isDirectory(),e.stats.isFile()&&t(c)},fail:function(){wx.downloadFile({url:e,success:function(e){wx.saveFile({tempFilePath:e.tempFilePath,filePath:c,success:function(){console.log("\u4fdd\u5b58\u5230\u672c\u5730!!!"),t(c)},fail:function(){o("\u6587\u4ef6\u4fdd\u5b58\u5931\u8d25!")}})},fail:function(){o("\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25!")}})}})})},o.removeDownloadFile=function(e){for(var t=""+wx.env.USER_DATA_PATH,o=e.split("resource/")[1];-1!=o.indexOf("/");){var a=o.indexOf("/"),n=o.substring(0,a),i=o.substring(a+1,o.length);o=n+"-"+i}var c=t+"/"+o,r=wx.getFileSystemManager();return new Promise(function(t,o){r.stat({path:c,success:function(a){a.stats.isFile()&&(r.unlink({filePath:c,success:function(){console.log("\u5220\u9664\u672c\u5730\u56fe\u7247\u6210\u529f!!!!!",e),t(0)},fail:function(){o()}}),t(c))},fail:function(){console.log("\u672c\u5730\u56fe\u7247\u4e0d\u5b58\u5728",e),t(0)}})})},o.reportButton=function(e,t,o,a,n){h.currentPlatform===h.platformEnum.wechat&&(window.wx&&(wx.reportEvent("button",{name:t,page:e,level:o,type:a}),p.reportAnalytics("button",{page:e,name:t,level:o,type:a,mode:n})),console.log("\u4e0a\u62a5\u6309\u94ae\u57cb\u70b9",e,t,o,a))},o.reportPage=function(e,t){h.currentPlatform===h.platformEnum.wechat&&(wx.reportEvent("page",{page_name:e,level:t}),p.reportAnalytics("page",{pagename:e,level:t}))},o.reportAny=function(e,t){console.log("\u4e0a\u62a5\u81ea\u5b9a\u4e49\u57cb\u70b9",e,t),h.currentPlatform===h.platformEnum.wechat&&(wx.reportEvent(e,t),p.reportAnalytics(e,t))},o.getWXOpenid=V,cc._RF.pop()},{Analysis:"Analysis",BattleManager:"BattleManager",PostUserData:"PostUserData",ShareTitle:"ShareTitle",commonData:"commonData",config:"config"}],wxGzhView:[function(e,t,o){"use strict";cc._RF.push(t,"248c2vX2zRNMrcMQm1qqPdj","wxGzhView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("UIManager"),n=e("platform"),i=e("BattleManager"),c=e("getSkinView"),r=e("commonData"),s=e("startView"),l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.RewardEditBox=null,t.inputCode="",t}return __extends(t,e),t.prototype.closeGZHPnl=function(){a.default.instance.showGZHPnl(!1),s.default.instance.showGameClubBtn(!0)},t.prototype.changeEditBox=function(){this.inputCode=this.RewardEditBox.string},t.prototype.clickGetReward=function(){"DLSDR666"==this.inputCode?(console.log("----\u83b7\u53d6\u5956\u52b1"),r.default.screwSkinData.skinData[7]=1,i.default.instance.setArrData("screwSkinData"),c.default.instance.initScrewSkinAni(7),c.default.instance.showGetSkinView(),i.default.instance.wxGZHNode.active=!1,a.default.instance.showGZHPnl(!1),s.default.instance.showGameClubBtn(!0)):n.showTips("\u5151\u6362\u7801\u9519\u8befQAQ")},__decorate([d(cc.EditBox)],t.prototype,"RewardEditBox",void 0),__decorate([u],t)}(cc.Component);o.default=h,cc._RF.pop()},{BattleManager:"BattleManager",UIManager:"UIManager",commonData:"commonData",getSkinView:"getSkinView",platform:"platform",startView:"startView"}],wxSubContextView:[function(e,t,o){"use strict";cc._RF.push(t,"059e4FDVHFH8LnzHRlPUA6K","wxSubContextView"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("config"),n=e("platform"),i=e("commonData"),c=e("PostUserData"),r=e("startView"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=e.call(this)||this;return t.rankBox=null,t.rankButton=null,t.openData=null,t.count=0,t.firstclick=!1,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;a.currentPlatform==a.platformEnum.wechat&&"undefined"!=typeof wx&&(this.checkUserInfo(),this.checkFriendInfo(),this.rankBox.opacity=0,this.rankBox.active=!0,this.openData.getComponent(cc.SubContextView).enabled=!0,console.log("--------set SubContextView enabled",!0),this.scheduleOnce(function(){e.openData.getComponent(cc.SubContextView).enabled=!1,console.log("--------set SubContextView enabled",!1),e.scheduleOnce(function(){e.rankBox.active=!1},.2)},.1))},t.prototype.clickRank=function(){a.currentPlatform==a.platformEnum.wechat&&"undefined"!=typeof wx&&-1!=i.default.myProvinceIndex&&(0==this.firstclick?(console.log("wxSubContextView----clickRank----"),i.default.getWxUserInfo&&i.default.getWxFriendInfo?(console.log("\u53d6\u5f97\u6240\u6709\u6743\u9650"),this.showRanks()):(this.initSubContextView(),console.log("\u6ca1\u6709\u53d6\u5f97\u6240\u6709\u6743\u9650\uff0c\u83b7\u53d6\u7528\u6237\u6388\u6743")),this.firstclick=!0):this.showRanks())},t.prototype.initSubContextView=function(){a.currentPlatform==a.platformEnum.wechat&&"undefined"!=typeof wx?(console.log("wxSubContextView----init----"),i.default.getWxUserInfo||this.initUserInfoButton(),i.default.getWxFriendInfo||i.default.getWxFriendInfo||(wx.authorize({scope:"scope.WxFriendInteraction",success:function(){console.log("\u5df2\u83b7\u5f97\u7528\u6237\u670b\u53cb\u6388\u6743"),i.default.getWxFriendInfo=!0},fail:function(){i.default.getWxFriendInfo=!1}}),n.showTips("\u8bf7\u5f00\u542f\u5fae\u4fe1\u670b\u53cb\u6743\u9650"))):console.log("?")},t.prototype.checkUserInfo=function(){wx.getSetting({success:function(e){e.authSetting["scope.userInfo"]?(console.log("\u5df2\u83b7\u5f97\u7528\u6237\u6388\u6743"),i.default.getWxUserInfo=!0,cc.sys.localStorage.setItem("getWxUserInfo",i.default.getWxUserInfo)):(console.log("\u672a\u83b7\u5f97\u7528\u6237\u6388\u6743"),i.default.getWxUserInfo=!1)}})},t.prototype.checkFriendInfo=function(){console.log("wxSubContextView----checkFriendInfo"),wx.getSetting({success:function(e){e.authSetting["scope.WxFriendInteraction"]?(console.log("\u5df2\u83b7\u5f97\u7528\u6237\u670b\u53cb\u6388\u6743"),i.default.getWxFriendInfo=!0):i.default.getWxFriendInfo=!1}})},t.prototype.initUserInfoButton=function(){var e=this;console.log("wxSubContextView----initUserInfoButton----");var t=wx.getSystemInfoSync(),o=t.windowWidth,a=t.windowHeight,n=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:o,height:a,lineHeight:40,backgroundColor:"#00000000",color:"#00000000",textAlign:"center",fontSize:10,borderRadius:4}});n.onTap(function(t){t.userInfo?(console.log("authorized success!"),i.default.UserNickName=t.userInfo.nickName,i.default.UserAvatarUrl=t.userInfo.avatarUrl,console.log("---------------------\u53d6\u5f97\u5fae\u4fe1\u6388\u6743",t.userInfo),cc.sys.localStorage.setItem("UserAvatar",i.default.UserAvatarUrl),cc.sys.localStorage.setItem("UserNickName",i.default.UserNickName),""!=i.default.openId&&c.seletPostUserData(["head_url","nick_name"]),e.checkUserInfo(),i.default.getWxInfo=!0):(i.default.getWxInfo=!0,console.log("authorized fail!")),n.hide(),n.destroy()})},t.prototype.showRanks=function(){var e=this;if(a.currentPlatform==a.platformEnum.wechat&&"undefined"!=typeof wx)if(i.default.getWxUserInfo){if(!i.default.getWxFriendInfo)return wx.authorize({scope:"scope.WxFriendInteraction",success:function(){console.log("\u5df2\u83b7\u5f97\u7528\u6237\u670b\u53cb\u6388\u6743"),i.default.getWxFriendInfo=!0},fail:function(){i.default.getWxFriendInfo=!1}}),void n.showTips("\u8bf7\u5f00\u542f\u5fae\u4fe1\u670b\u53cb\u6743\u9650");console.log("wxshowranks"),this.rankBox.opacity=255,this.rankBox.active=!0,this.scheduleOnce(function(){e.openData.getComponent(cc.SubContextView).enabled=!0,console.log("--------set SubContextView enabled",!0)},.2),this.rankBox.getChildByName("bg").getComponent(cc.Animation).play("appear");var t=cc.sys.localStorage.getItem("passLevel");null!=t&&null!=t&&""!=t||(t="0"),wx.getSystemInfoSync().SDKVersion>="1.9.92"?(console.log("\u53d1\u9001\u6d88\u606f\u5230\u5b50\u57df---1---"),wx.postMessage({message:parseInt(t),type:1}),this.scheduleOnce(function(){if(!i.default.getWxUserInfo)return n.showTips("\u8bf7\u5f00\u542f\u6743\u9650"),void e.clickclose();i.default.getWxFriendInfo||(n.showTips("\u8bf7\u5f00\u542f\u5fae\u4fe1\u670b\u53cb\u6743\u9650"),e.clickclose())},1)):wx.showModal({title:"\u63d0\u793a",content:"\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u6392\u884c\u699c\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002"})}else n.showTips("\u8bf7\u5f00\u542f\u6743\u9650");else console.log("?")},t.prototype.clickclose=function(){var e=this;this.rankBox.getChildByName("bg").getComponent(cc.Animation).play("disappear"),n.reportButton("rankPage","closeBtn",i.default.currLevel),console.log("\u53d1\u9001\u6d88\u606f\u5230\u5b50\u57df---2---"),wx.postMessage({message:"clear",type:2}),this.scheduleOnce(function(){e.openData.getComponent(cc.SubContextView).enabled=!1,console.log("--------set SubContextView enabled",!1),e.scheduleOnce(function(){e.rankBox.active=!1,r.default.instance.showGameClubBtn(!0)},.2)},.2)},t.prototype.clickShare=function(){n.reportButton("rankPage","shareBtn",i.default.currLevel,3),n.showShare(function(){n.reportButton("rankPage","shareBtn_success",i.default.currLevel,4)},null,1)},t.instance=null,__decorate([u(cc.Node)],t.prototype,"rankBox",void 0),__decorate([u(cc.Button)],t.prototype,"rankButton",void 0),__decorate([u(cc.Node)],t.prototype,"openData",void 0),o=__decorate([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{PostUserData:"PostUserData",commonData:"commonData",config:"config",platform:"platform",startView:"startView"}]},{},["Analysis","AudioManager","BattleManager","CompGameLevel","CompGameManager","Enum","Game","GameLevel","GameManager","GraphicalCreateLevel","GraphicalGameLevel","Hole","Level","Load","Oceanengine","PostUserData","ResourcesManager","SceneManager","Screw","ScrewNumberManager","ScrewSkin","ShareTitle","Steel","UIManager","achievementPopupView","achievementView","android","areaView","boardSKin","careerView","chooseView","commonData","compExitView","compGameOvertView","compRecordView","compView","config","exitView","gameOverView","getSkinView","giftView","ios","itemView","ks","localStorage","lock","longScrew","mateView","meizu","newSkinView","noviceView","nut","oppo","pauseView","platform","province","qq","rankView","reviveView","setView","showScrewView","startView","test","topView","toutiao","treasureView","unscrew","vivo","web","wechat","wxGzhView","wxSubContextView","temp"]);